<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/inc/MemberRefInvalidator.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> sbt.inc

<span class="keyword">import</span> sbt.Relation
<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> sbt.Logger
<span class="keyword">import</span> xsbt.api.APIUtil

<span class="comment">/**
 * Implements various strategies for invalidating dependencies introduced by member reference.
 *
 * The strategy is represented as function T =&gt; Set[File] where T is a source file that other
 * source files depend on. When you apply that function to given element `src` you get set of
 * files that depend on `src` by member reference and should be invalidated due to api change
 * that was passed to a method constructing that function. There are two questions that arise:
 *
 *    1. Why is signature T =&gt; Set[File] and not T =&gt; Set[T] or File =&gt; Set[File]?
 *    2. Why would we apply that function to any other `src` that then one that got modified
 *       and the modification is described by APIChange?
 *
 * Let's address the second question with the following example of source code structure:
 *
 * // A.scala
 * class A
 *
 * // B.scala
 * class B extends A
 *
 * // C.scala
 * class C { def foo(a: A) = ??? }
 *
 * // D.scala
 * class D { def bar(b: B) = ??? }
 *
 * Member reference dependencies on A.scala are B.scala, C.scala. When the api of A changes
 * then we would consider B and C for invalidation. However, B is also a dependency by inheritance
 * so we always invalidate it. The api change to A is relevant when B is considered (because
 * of how inheritance works) so we would invalidate B by inheritance and then we would like to
 * invalidate member reference dependencies of B as well. In other words, we have a function
 * because we want to apply it (with the same api change in mind) to all src files invalidated
 * by inheritance of the originally modified file.
 *
 * The first question is a bit more straightforward to answer. We always invalidate internal
 * source files (in given project) that are represented as File but they might depend either on
 * internal source files (then T=File) or they can depend on external class name (then T=String).
 *
 * The specific invalidation strategy is determined based on APIChange that describes a change to api
 * of a single source file.
 *
 * For example, if we get APIChangeDueToMacroDefinition then we invalidate all member reference
 * dependencies unconditionally. On the other hand, if api change is due to modified name hashes
 * of regular members then we'll invalidate sources that use those names.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>inc<span class="delimiter">]</span> <span class="keyword">class</span> <a title="class MemberRefInvalidator extends AnyRef" id="sbt.inc;MemberRefInvalidator">MemberRefInvalidator</a><a href="#sbt.inc;MemberRefInvalidator" title="sbt.inc.MemberRefInvalidator" class="delimiter">(</a><a title="sbt.Logger" id="sbt.inc;MemberRefInvalidator.log">log</a>: <a href="../Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[T](memberRef: sbt.Relation[java.io.File,T], usedNames: sbt.Relation[java.io.File,String], apiChange: sbt.inc.APIChange[_])T =&gt; Set[java.io.File]" id="sbt.inc;MemberRefInvalidator.get">get</a><span class="delimiter">[</span><a title="" id="sbt.inc;MemberRefInvalidator.get;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.Relation[java.io.File,T]" id="sbt.inc;MemberRefInvalidator.get.memberRef">memberRef</a>: <a href="../Relation.scala.html#sbt;Relation" title="sbt.Relation[java.io.File,T]">Relation</a><span class="delimiter">[</span>File, T<span class="delimiter">]</span>, <a title="sbt.Relation[java.io.File,String]" id="sbt.inc;MemberRefInvalidator.get.usedNames">usedNames</a>: <a href="../Relation.scala.html#sbt;Relation" title="sbt.Relation[java.io.File,String]">Relation</a><span class="delimiter">[</span>File, String<span class="delimiter">]</span>, <a title="sbt.inc.APIChange[_]" id="sbt.inc;MemberRefInvalidator.get.apiChange">apiChange</a>: <a href="Changes.scala.html#sbt.inc;APIChange" title="sbt.inc.APIChange[_]">APIChange</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: T =&gt; Set<span class="delimiter">[</span>File<span class="delimiter">]</span> = <a href="#sbt.inc;MemberRefInvalidator.get.apiChange" title="sbt.inc.APIChange[_]">apiChange</a> <span title="T =&gt; Set[java.io.File]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> _: <a href="Changes.scala.html#sbt.inc;APIChangeDueToMacroDefinition" title="sbt.inc.APIChangeDueToMacroDefinition[_]">APIChangeDueToMacroDefinition</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
      <span title="MemberRefInvalidator.this.InvalidateUnconditionally[T]" class="keyword">new</span> <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally" title="MemberRefInvalidator.this.InvalidateUnconditionally[T]">InvalidateUnconditionally</a><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator.get.memberRef" title="sbt.Relation[java.io.File,T]">memberRef</a><span class="delimiter">)</span>
    <span class="keyword">case</span> NamesChange<span class="delimiter">(</span>_, <span title="sbt.inc.ModifiedNames">modifiedNames</span><span class="delimiter">)</span> <span class="keyword">if</span> <span title="sbt.inc.ModifiedNames">modifiedNames</span>.<a href="Changes.scala.html#sbt.inc;ModifiedNames.implicitNames" title="=&gt; Set[String]">implicitNames</a>.<span title="=&gt; Boolean">nonEmpty</span> =&gt;
      <span title="MemberRefInvalidator.this.InvalidateUnconditionally[T]" class="keyword">new</span> <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally" title="MemberRefInvalidator.this.InvalidateUnconditionally[T]">InvalidateUnconditionally</a><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator.get.memberRef" title="sbt.Relation[java.io.File,T]">memberRef</a><span class="delimiter">)</span>
    <span class="keyword">case</span> NamesChange<span class="delimiter">(</span><a title="_$1" id="sbt.inc;MemberRefInvalidator.get.modifiedSrcFile">modifiedSrcFile</a>, <span title="sbt.inc.ModifiedNames">modifiedNames</span><span class="delimiter">)</span> =&gt;
      <span title="MemberRefInvalidator.this.NameHashFilteredInvalidator[T]" class="keyword">new</span> <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator" title="MemberRefInvalidator.this.NameHashFilteredInvalidator[T]">NameHashFilteredInvalidator</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator.get.usedNames" title="sbt.Relation[java.io.File,String]">usedNames</a>, <a href="#sbt.inc;MemberRefInvalidator.get.memberRef" title="sbt.Relation[java.io.File,T]">memberRef</a>, <span title="sbt.inc.ModifiedNames">modifiedNames</span>.<a href="Changes.scala.html#sbt.inc;ModifiedNames.regularNames" title="=&gt; Set[String]">regularNames</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _: <a href="Changes.scala.html#sbt.inc;SourceAPIChange" title="sbt.inc.SourceAPIChange[_]">SourceAPIChange</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
      sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator.wrongAPIChangeMsg" title="=&gt; String">wrongAPIChangeMsg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(apiChange: sbt.inc.APIChange[_])String" id="sbt.inc;MemberRefInvalidator.invalidationReason">invalidationReason</a><span class="delimiter">(</span><a title="sbt.inc.APIChange[_]" id="sbt.inc;MemberRefInvalidator.invalidationReason.apiChange">apiChange</a>: <a href="Changes.scala.html#sbt.inc;APIChange" title="sbt.inc.APIChange[_]">APIChange</a><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#sbt.inc;MemberRefInvalidator.invalidationReason.apiChange" title="sbt.inc.APIChange[_]">apiChange</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> APIChangeDueToMacroDefinition<span class="delimiter">(</span><span title="_$2">modifiedSrcFile</span><span class="delimiter">)</span> =&gt;
      <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;The &quot;)">The $</span><span title="_$2">modifiedSrcFile</span><span title="String(&quot; source file declares a macro.&quot;)" class="string"> source file declares a macro.&quot;</span>
    <span class="keyword">case</span> NamesChange<span class="delimiter">(</span><span title="_$2">modifiedSrcFile</span>, <span title="sbt.inc.ModifiedNames">modifiedNames</span><span class="delimiter">)</span> <span class="keyword">if</span> <span title="sbt.inc.ModifiedNames">modifiedNames</span>.<a href="Changes.scala.html#sbt.inc;ModifiedNames.implicitNames" title="=&gt; Set[String]">implicitNames</a>.<span title="=&gt; Boolean">nonEmpty</span> =&gt;
      <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</span>&quot;&quot;&quot;<span title="String(&quot;|The &quot;)">|The $</span><span title="_$2">modifiedSrcFile</span><span title="String(&quot; source file has the following implicit definitions changed:\n\t\t\t\t|\\t&quot;)"> source file has the following implicit definitions changed:
				|\t$</span><span class="delimiter">{</span><span title="sbt.inc.ModifiedNames">modifiedNames</span>.<a href="Changes.scala.html#sbt.inc;ModifiedNames.implicitNames" title="=&gt; Set[String]">implicitNames</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;.&quot;)" class="string">.&quot;&quot;&quot;</span>.<span title="=&gt; String">stripMargin</span>
    <span class="keyword">case</span> NamesChange<span class="delimiter">(</span><span title="_$2">modifiedSrcFile</span>, <span title="sbt.inc.ModifiedNames">modifiedNames</span><span class="delimiter">)</span> =&gt;
      <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</span>&quot;&quot;&quot;<span title="String(&quot;|The &quot;)">|The $</span><span title="_$2">modifiedSrcFile</span><span title="String(&quot; source file has the following regular definitions changed:\n\t\t\t\t|\\t&quot;)"> source file has the following regular definitions changed:
				|\t$</span><span class="delimiter">{</span><span title="sbt.inc.ModifiedNames">modifiedNames</span>.<a href="Changes.scala.html#sbt.inc;ModifiedNames.regularNames" title="=&gt; Set[String]">regularNames</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">}</span><span title="String(&quot;.&quot;)" class="string">.&quot;&quot;&quot;</span>.<span title="=&gt; String">stripMargin</span>
    <span class="keyword">case</span> _: <a href="Changes.scala.html#sbt.inc;SourceAPIChange" title="sbt.inc.SourceAPIChange[_]">SourceAPIChange</a><span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt;
      sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator.wrongAPIChangeMsg" title="=&gt; String">wrongAPIChangeMsg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="String" id="sbt.inc;MemberRefInvalidator.wrongAPIChangeMsg">wrongAPIChangeMsg</a> =
    <span class="string">&quot;MemberReferenceInvalidator.get should be called when name hashing is enabled &quot;</span> <span title="String(&quot;MemberReferenceInvalidator.get should be called when name hashing is enabled and in that case we shouldn\'t have SourceAPIChange as an api change.&quot;)">+</span>
      <span class="string">&quot;and in that case we shouldn't have SourceAPIChange as an api change.&quot;</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class InvalidateUnconditionally[T] extends AnyRef with T =&gt; Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally">InvalidateUnconditionally</a><span class="delimiter">[</span><a title="" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally;T">T</a><span class="delimiter">]</span><a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally" title="MemberRefInvalidator.this.InvalidateUnconditionally[T]" class="delimiter">(</a><a title="sbt.Relation[java.io.File,T]" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.memberRef">memberRef</a>: <a href="../Relation.scala.html#sbt;Relation" title="sbt.Relation[java.io.File,T]">Relation</a><span class="delimiter">[</span>File, T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span class="delimiter">(</span>T =&gt; Set<span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(from: T)Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply">apply</a><span class="delimiter">(</span><a title="T" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply.from">from</a>: <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally;T" title="T">T</a><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply.invalidated">invalidated</a> = <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.memberRef" title="sbt.Relation[java.io.File,T]">memberRef</a>.<a href="../Relation.scala.html#sbt;Relation.reverse" title="(_2: T)Set[java.io.File]">reverse</a><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply.from" title="T">from</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply.invalidated" title="Set[java.io.File]">invalidated</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="#sbt.inc;MemberRefInvalidator.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;The following member ref dependencies of &quot;)">The following member ref dependencies of $</span><a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply.from" title="T">from</a><span title="String(&quot; are invalidated:\\n&quot;)" class="string"> are invalidated:\n&quot;</span> <span title="(x$1: Any)String">+</span>
          <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated" title="(invalidated: Set[java.io.File])String">formatInvalidated</a><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply.invalidated" title="Set[java.io.File]">invalidated</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.apply.invalidated" title="Set[java.io.File]">invalidated</a>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(invalidated: Set[java.io.File])String" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated">formatInvalidated</a><span class="delimiter">(</span><a title="Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated.invalidated">invalidated</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Seq[java.io.File]" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated.sortedFiles">sortedFiles</a> = <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated.invalidated" title="Set[java.io.File]">invalidated</a>.<span title="=&gt; Seq[java.io.File]">toSeq</span>.<span title="(f: java.io.File =&gt; String)(implicit ord: scala.math.Ordering[String])Seq[java.io.File]">sortBy</span><span title="scala.math.Ordering.String.type" class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated.sortedFiles.$anonfun.x$1" title="java.io.File">_</a>.<span title="()String">getAbsolutePath</span><span class="delimiter">)</span>
      <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated.sortedFiles" title="Seq[java.io.File]">sortedFiles</a>.<span title="(f: java.io.File =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[java.io.File],String,Seq[String]])Seq[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</span><a title="java.io.File" id="sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated.$anonfun.file">file</a> =&gt; <span title="String(&quot;\t&quot;)" class="string">&quot;\t&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;MemberRefInvalidator;InvalidateUnconditionally.formatInvalidated.$anonfun.file" title="java.io.File">file</a><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class NameHashFilteredInvalidator[T] extends AnyRef with T =&gt; Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator">NameHashFilteredInvalidator</a><span class="delimiter">[</span><a title="" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator;T">T</a><span class="delimiter">]</span><a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator" title="MemberRefInvalidator.this.NameHashFilteredInvalidator[T]" class="delimiter">(</a>
      <a title="sbt.Relation[java.io.File,String]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.usedNames">usedNames</a>: <a href="../Relation.scala.html#sbt;Relation" title="sbt.Relation[java.io.File,String]">Relation</a><span class="delimiter">[</span>File, String<span class="delimiter">]</span>,
      <a title="sbt.Relation[java.io.File,T]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.memberRef">memberRef</a>: <a href="../Relation.scala.html#sbt;Relation" title="sbt.Relation[java.io.File,T]">Relation</a><span class="delimiter">[</span>File, T<span class="delimiter">]</span>,
      <a title="Set[String]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.modifiedNames">modifiedNames</a>: <span title="Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span class="delimiter">(</span>T =&gt; Set<span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(to: T)Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.apply">apply</a><span class="delimiter">(</span><a title="T" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.apply.to">to</a>: <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator;T" title="T">T</a><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.apply.dependent">dependent</a> = <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.memberRef" title="sbt.Relation[java.io.File,T]">memberRef</a>.<a href="../Relation.scala.html#sbt;Relation.reverse" title="(_2: T)Set[java.io.File]">reverse</a><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.apply.to" title="T">to</a><span class="delimiter">)</span>
      <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies" title="(dependent: Set[java.io.File])Set[java.io.File]">filteredDependencies</a><span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.apply.dependent" title="Set[java.io.File]">dependent</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dependent: Set[java.io.File])Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies">filteredDependencies</a><span class="delimiter">(</span><a title="Set[java.io.File]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.dependent">dependent</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.dependent" title="Set[java.io.File]">dependent</a>.<span title="(p: java.io.File =&gt; Boolean)scala.collection.immutable.Set[java.io.File]">filter</span> <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.$anonfun.x0$1" title="Boolean" class="delimiter">{</a>
        <span class="keyword">case</span> <span title="java.io.File">from</span> <span class="keyword">if</span> <a href="../../xsbt/api/APIUtil.scala.html#xsbt.api.APIUtil" title="xsbt.api.APIUtil.type">APIUtil</a>.<a href="../../xsbt/api/APIUtil.scala.html#xsbt.api.APIUtil.isScalaSourceName" title="(name: String)Boolean">isScalaSourceName</a><span class="delimiter">(</span><span title="java.io.File">from</span>.<span title="()String">getName</span><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Set[String]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.$anonfun.usedNamesInDependent">usedNamesInDependent</a> = <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.usedNames" title="sbt.Relation[java.io.File,String]">usedNames</a>.<a href="../Relation.scala.html#sbt;Relation.forward" title="(_1: java.io.File)Set[String]">forward</a><span class="delimiter">(</span><span title="java.io.File">from</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.$anonfun.modifiedAndUsedNames">modifiedAndUsedNames</a> = <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.modifiedNames" title="Set[String]">modifiedNames</a> <span title="(that: scala.collection.GenSet[String])scala.collection.immutable.Set[String]">intersect</span> <a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.$anonfun.usedNamesInDependent" title="Set[String]">usedNamesInDependent</a>
          <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.$anonfun.modifiedAndUsedNames" title="scala.collection.immutable.Set[String]">modifiedAndUsedNames</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#sbt.inc;MemberRefInvalidator.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;None of the modified names appears in &quot;)">None of the modified names appears in $</span><span title="java.io.File">from</span><span title="String(&quot;. This dependency is not being considered for invalidation.&quot;)" class="string">. This dependency is not being considered for invalidation.&quot;</span><span class="delimiter">)</span>
            <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#sbt.inc;MemberRefInvalidator.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;The following modified names cause invalidation of &quot;)">The following modified names cause invalidation of $</span><span title="java.io.File">from</span><span title="String(&quot;: &quot;)">: $</span><a href="#sbt.inc;MemberRefInvalidator;NameHashFilteredInvalidator.filteredDependencies.$anonfun.modifiedAndUsedNames" title="scala.collection.immutable.Set[String]">modifiedAndUsedNames</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            <span title="Boolean(true)" class="keyword">true</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <span title="java.io.File">from</span> =&gt;
          <a href="#sbt.inc;MemberRefInvalidator.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Name hashing optimization doesn\'t apply to non-Scala dependency: &quot;)">Name hashing optimization doesn't apply to non-Scala dependency: $</span><span title="java.io.File">from</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
