


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configure and use logging &mdash; sbt Documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/issuetracker.css" type="text/css" />
    <link rel="stylesheet" href="../_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="../_static/syntax.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Exo:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.12.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../versions.js"></script>
    <script type="text/javascript" src="../_static/set-versions.js"></script>
    <script type="text/javascript" src="../../../assets/warnOldDocs.js"></script>
    <link rel="top" title="sbt Documentation" href="../index.html" />
    <link rel="up" title="How to..." href="index.html" />
    <link rel="next" title="Project metadata" href="metadata.html" />
    <link rel="prev" title="Interactive mode" href="interactive.html" /> 
  </head>
  <body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <ul class="nav">
          <li><a href="http://www.scala-sbt.org/">Home</a></li>
          <li><a href="../index.html">Documentation</a></li>
          <li><a href="../Getting-Started/Setup.html">Download</a></li>
          <li><a href="http://groups.google.com/group/simple-build-tool">Mailing List</a></li>
          <li><a href="http://github.com/sbt/sbt">Project</a></li>           
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Configure and use logging</div>
      <div class="search-box">
        <form method="get" action="http://www.google.com/search" id="search">
          <input type="search" placeholder="Search 0.12.3 on Google" name="q" results="10" size="29" id="search-input">
          <input type="hidden"  name="sitesearch" value="http://www.scala-sbt.org/release/docs/"> 
          <input type="submit" id="submit-search">
        </form>
      </div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">        
              <li>
                 <span class="divider">|</span> <a href="metadata.html">Project metadata</a> <span class="divider">»</span>
              </li>
              <li>
                 <span class="divider">&gt;</span><a href="index.html">How to...</a>
              </li>
              <li>
                <a href="../index.html">Contents</a>
              </li>
              <li>
                <span class="divider">«</span> <a href="interactive.html">Interactive mode</a> <span class="divider">|</span>
              </li>
              <li>
                <select id="versions"><option selected value="0.12.3">Version 0.12.3</option></select>
              </li>
            </ul>         
          </div>
        </div>
        <div class="row">
          <div class="span9">
            
  <div class="section" id="configure-and-use-logging">
<h1>Configure and use logging<a class="headerlink" href="#configure-and-use-logging" title="Permalink to this headline">¶</a></h1>
<div class="full-howto section" id="last">
<h2>View the logging output of the previously executed command<a class="headerlink" href="#last" title="Permalink to this headline">¶</a></h2>
</div>
<p>When a command is run, more detailed logging output is sent to a file than to the screen (by default).
This output can be recalled for the command just executed by running <tt class="docutils literal"><span class="pre">last</span></tt>.</p>
<p>For example, the output of <tt class="docutils literal"><span class="pre">run</span></tt> when the sources are uptodate is:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> run
<span class="go">[info] Running A</span>
<span class="go">Hi!</span>
<span class="go">[success] Total time: 0 s, completed Feb 25, 2012 1:00:00 PM</span>
</pre></div>
</div>
<p>The details of this execution can be recalled by running <tt class="docutils literal"><span class="pre">last</span></tt>:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> last
<span class="go">[debug] Running task... Cancelable: false, max worker threads: 4, check cycles: false</span>
<span class="go">[debug]</span>
<span class="go">[debug] Initial source changes:</span>
<span class="go">[debug]     removed:Set()</span>
<span class="go">[debug]     added: Set()</span>
<span class="go">[debug]     modified: Set()</span>
<span class="go">[debug] Removed products: Set()</span>
<span class="go">[debug] Modified external sources: Set()</span>
<span class="go">[debug] Modified binary dependencies: Set()</span>
<span class="go">[debug] Initial directly invalidated sources: Set()</span>
<span class="go">[debug]</span>
<span class="go">[debug] Sources indirectly invalidated by:</span>
<span class="go">[debug]     product: Set()</span>
<span class="go">[debug]     binary dep: Set()</span>
<span class="go">[debug]     external source: Set()</span>
<span class="go">[debug] Initially invalidated: Set()</span>
<span class="go">[debug] Copy resource mappings:</span>
<span class="go">[debug]</span>
<span class="go">[info] Running A</span>
<span class="go">[debug] Starting sandboxed run...</span>
<span class="go">[debug] Waiting for threads to exit or System.exit to be called.</span>
<span class="go">[debug]   Classpath:</span>
<span class="go">[debug]     /tmp/e/target/scala-2.9.2/classes</span>
<span class="go">[debug]     /tmp/e/.sbt/0.12.0/boot/scala-2.9.2/lib/scala-library.jar</span>
<span class="go">[debug] Waiting for thread run-main to exit</span>
<span class="go">[debug]     Thread run-main exited.</span>
<span class="go">[debug] Interrupting remaining threads (should be all daemons).</span>
<span class="go">[debug] Sandboxed run complete..</span>
<span class="go">[debug] Exited with code 0</span>
<span class="go">[success] Total time: 0 s, completed Jan 1, 2012 1:00:00 PM</span>
</pre></div>
</div>
<p>Configuration of the logging level for the console and for the backing file are described in following sections.</p>
<div class="full-howto section" id="tasklast">
<h2>View the previous logging output of a specific task<a class="headerlink" href="#tasklast" title="Permalink to this headline">¶</a></h2>
</div>
<p>When a task is run, more detailed logging output is sent to a file than to the screen (by default).
This output can be recalled for a specific task by running <tt class="docutils literal"><span class="pre">last</span> <span class="pre">&lt;task&gt;</span></tt>.
For example, the first time <tt class="docutils literal"><span class="pre">compile</span></tt> is run, output might look like:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> compile
<span class="go">[info] Updating {file:/.../demo/}example...</span>
<span class="go">[info] Resolving org.scala-lang#scala-library;2.9.2 ...</span>
<span class="go">[info] Done updating.</span>
<span class="go">[info] Compiling 1 Scala source to .../demo/target/scala-2.9.2/classes...</span>
<span class="go">[success] Total time: 0 s, completed Jun 1, 2012 1:11:11 PM</span>
</pre></div>
</div>
<p>The output indicates that both dependency resolution and compilation were performed.
The detailed output of each of these may be recalled individually.
For example,</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> last compile
<span class="go">[debug]</span>
<span class="go">[debug] Initial source changes:</span>
<span class="go">[debug]     removed:Set()</span>
<span class="go">[debug]     added: Set(/home/mark/tmp/a/b/A.scala)</span>
<span class="go">[debug]     modified: Set()</span>
<span class="go">...</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> last update
<span class="go">[info] Updating {file:/.../demo/}example...</span>
<span class="go">[debug] post 1.3 ivy file: using exact as default matcher</span>
<span class="go">[debug] :: resolving dependencies :: example#example_2.9.2;0.1-SNAPSHOT</span>
<span class="go">[debug]     confs: [compile, runtime, test, provided, optional, compile-internal, runtime-internal, test-internal, plugin, sources, docs, pom]</span>
<span class="go">[debug]     validate = true</span>
<span class="go">[debug]     refresh = false</span>
<span class="go">[debug] resolving dependencies for configuration &#39;compile&#39;</span>
<span class="go">...</span>
</pre></div>
</div>
<div class="full-howto section" id="printwarnings">
<h2>Show warnings from the previous compilation<a class="headerlink" href="#printwarnings" title="Permalink to this headline">¶</a></h2>
</div>
<p>The Scala compiler does not print the full details of warnings by default.
Compiling code that uses the deprecated <tt class="docutils literal"><span class="pre">error</span></tt> method from Predef might generate the following output:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> compile
<span class="go">[info] Compiling 1 Scala source to &lt;...&gt;/classes...</span>
<span class="go">[warn] there were 1 deprecation warnings; re-run with -deprecation for details</span>
<span class="go">[warn] one warning found</span>
</pre></div>
</div>
<p>The details aren't provided, so it is necessary to add <tt class="docutils literal"><span class="pre">-deprecation</span></tt> to the options passed to the compiler (<tt class="docutils literal"><span class="pre">scalacOptions</span></tt>) and recompile.
An alternative when using Scala 2.10 and later is to run <tt class="docutils literal"><span class="pre">print-warnings</span></tt>.
This task will display all warnings from the previous compilation.
For example,</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> print-warnings
<span class="go">[warn] A.scala:2: method error in object Predef is deprecated: Use sys.error(message) instead</span>
<span class="go">[warn]      def x = error(&quot;Failed.&quot;)</span>
<span class="go">[warn]              ^</span>
</pre></div>
</div>
<div class="full-howto section" id="level">
<h2>Change the logging level globally<a class="headerlink" href="#level" title="Permalink to this headline">¶</a></h2>
</div>
<p>The amount of logging is controlled by the <tt class="docutils literal"><span class="pre">logLevel</span></tt> setting, which takes values from the <tt class="docutils literal"><span class="pre">Level</span></tt> enumeration.
Valid values are <tt class="docutils literal"><span class="pre">Error</span></tt>, <tt class="docutils literal"><span class="pre">Warn</span></tt>, <tt class="docutils literal"><span class="pre">Info</span></tt>, and <tt class="docutils literal"><span class="pre">Debug</span></tt> in order of increasing verbosity.
To change the global logging level, set <tt class="docutils literal"><span class="pre">logLevel</span> <span class="pre">in</span> <span class="pre">Global</span></tt>.
For example, to set it temporarily from the sbt prompt,</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">   &gt; set logLevel in Global := Level.Warn</span>


<span class="go">- id: tasklevel</span>
<span class="go">  :title: Change the logging level for a specific task, configuration, or project</span>
<span class="go">  setting: logLevel in compile := Level.Debug</span>
</pre></div>
</div>
<p>The amount of logging is controlled by the <tt class="docutils literal"><span class="pre">logLevel</span></tt> setting, which takes values from the <tt class="docutils literal"><span class="pre">Level</span></tt> enumeration.
Valid values are <tt class="docutils literal"><span class="pre">Error</span></tt>, <tt class="docutils literal"><span class="pre">Warn</span></tt>, <tt class="docutils literal"><span class="pre">Info</span></tt>, and <tt class="docutils literal"><span class="pre">Debug</span></tt> in order of increasing verbosity.
The logging level may be configured globally, as described in the previous section, or it may be applied to a specific project, configuration, or task.
For example, to change the logging level for compilation to only show warnings and errors:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> <span class="nb">set </span>logLevel in compile :<span class="o">=</span> Level.Warn
</pre></div>
</div>
<p>To enable debug logging for all tasks in the current project,</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> <span class="nb">set </span>logLevel :<span class="o">=</span> Level.Warn
</pre></div>
</div>
<p>A common scenario is that after running a task, you notice that you need more information than was shown by default.
A <tt class="docutils literal"><span class="pre">logLevel</span></tt> based solution typically requires changing the logging level and running a task again.
However, there are two cases where this is unnecessary.
First, warnings from a previous compilation may be displayed using <tt class="docutils literal"><span class="pre">print-warnings</span></tt> for the main sources or <tt class="docutils literal"><span class="pre">test:print-warnings</span></tt> for test sources.
Second, output from the previous execution is available either for a single task or for in its entirety.
See the section on <a class="reference external" href="#printwarnings">print-warnings</a> and the sections on <a class="reference external" href="#last">previous output</a>.</p>
<div class="full-howto section" id="trace">
<h2>Configure printing of stack traces<a class="headerlink" href="#trace" title="Permalink to this headline">¶</a></h2>
</div>
<p>By default, sbt hides the stack trace of most exceptions thrown during execution.
It prints a message that indicates how to display the exception.
However, you may want to show more of stack traces by default.</p>
<p>The setting to configure is <tt class="docutils literal"><span class="pre">traceLevel</span></tt>, which is a setting with an Int value.
When <tt class="docutils literal"><span class="pre">traceLevel</span></tt> is set to a negative value, no stack traces are shown.
When it is zero, the stack trace is displayed up to the first sbt stack frame.
When positive, the stack trace is shown up to that many stack frames.</p>
<p>For example, the following configures sbt to show stack traces up to the first sbt frame:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> <span class="nb">set </span>every traceLevel :<span class="o">=</span> 0
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">every</span></tt> part means to override the setting in all scopes.
To change the trace printing behavior for a single project, configuration, or task, scope <tt class="docutils literal"><span class="pre">traceLevel</span></tt> appropriately:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> <span class="nb">set </span>traceLevel in Test :<span class="o">=</span> 5
<span class="gp">&gt;</span> <span class="nb">set </span>traceLevel in update :<span class="o">=</span> 0
<span class="gp">&gt;</span> <span class="nb">set </span>traceLevel in ThisProject :<span class="o">=</span> -1
</pre></div>
</div>
<div class="full-howto section" id="nobuffer">
<h2>Print the output of tests immediately instead of buffering<a class="headerlink" href="#nobuffer" title="Permalink to this headline">¶</a></h2>
</div>
<p>By default, sbt buffers the logging output of a test until the whole class finishes.
This is so that output does not get mixed up when executing in parallel.
To disable buffering, set the <tt class="docutils literal"><span class="pre">logBuffered</span></tt> setting to false:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">logBuffered</span> <span class="o">:=</span> <span class="kc">false</span>
</pre></div>
</div>
<div class="full-howto section" id="custom">
<h2>Add a custom logger<a class="headerlink" href="#custom" title="Permalink to this headline">¶</a></h2>
</div>
<p>The setting <tt class="docutils literal"><span class="pre">extraLoggers</span></tt> can be used to add custom loggers.
A custom logger should implement [AbstractLogger].
<tt class="docutils literal"><span class="pre">extraLoggers</span></tt> is a function <tt class="docutils literal"><span class="pre">ScopedKey[_]</span> <span class="pre">=&gt;</span> <span class="pre">Seq[AbstractLogger]</span></tt>.
This means that it can provide different logging based on the task that requests the logger.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">extraLoggers</span> <span class="o">~=</span> <span class="o">{</span> <span class="n">currentFunction</span> <span class="k">=&gt;</span>
    <span class="o">(</span><span class="n">key</span><span class="k">:</span> <span class="kt">ScopedKey</span><span class="o">[</span><span class="k">_</span><span class="o">])</span> <span class="k">=&gt;</span> <span class="o">{</span>
            <span class="n">myCustomLogger</span><span class="o">(</span><span class="n">key</span><span class="o">)</span> <span class="o">+:</span> <span class="n">currentFunction</span><span class="o">(</span><span class="n">key</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Here, we take the current function for the setting <tt class="docutils literal"><span class="pre">currentFunction</span></tt> and provide a new function.
The new function prepends our custom logger to the ones provided by the old function.</p>
<div class="full-howto section" id="log">
<h2>Log messages in a task<a class="headerlink" href="#log" title="Permalink to this headline">¶</a></h2>
</div>
<p>The special task <tt class="docutils literal"><span class="pre">streams</span></tt> provides per-task logging and I/O via a <a class="reference external" href="../../api/#sbt.std.Streams">Streams</a> instance.
To log, a task maps the <tt class="docutils literal"><span class="pre">streams</span></tt> task and uses its <tt class="docutils literal"><span class="pre">log</span></tt> member:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">myTask</span> <span class="o">&lt;&lt;=</span> <span class="o">(...,</span> <span class="n">streams</span><span class="o">)</span> <span class="n">map</span> <span class="o">{</span> <span class="o">(...,</span> <span class="n">s</span><span class="o">)</span> <span class="k">=&gt;</span>
    <span class="n">s</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warn</span><span class="o">(</span><span class="s">&quot;A warning.&quot;</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"><ul>
<li><a class="reference internal" href="#">Configure and use logging</a><ul>
<li><a class="reference internal" href="#last">View the logging output of the previously executed command</a></li>
<li><a class="reference internal" href="#tasklast">View the previous logging output of a specific task</a></li>
<li><a class="reference internal" href="#printwarnings">Show warnings from the previous compilation</a></li>
<li><a class="reference internal" href="#level">Change the logging level globally</a></li>
<li><a class="reference internal" href="#trace">Configure printing of stack traces</a></li>
<li><a class="reference internal" href="#nobuffer">Print the output of tests immediately instead of buffering</a></li>
<li><a class="reference internal" href="#custom">Add a custom logger</a></li>
<li><a class="reference internal" href="#log">Log messages in a task</a></li>
</ul>
</li>
</ul>
</div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>  
  

  </body>
</html>