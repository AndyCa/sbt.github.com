<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/compiler/javac/DiagnosticsReporter.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> sbt.compiler.javac

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> javax.tools.<span class="delimiter">{</span> Diagnostic, JavaFileObject, DiagnosticListener <span class="delimiter">}</span>

<span class="keyword">import</span> sbt.Logger
<span class="keyword">import</span> xsbti.<span class="delimiter">{</span> Severity, Reporter, Maybe <span class="delimiter">}</span>
<span class="keyword">import</span> javax.tools.<span title="javax.tools.Diagnostic.type">Diagnostic</span>.NOPOS

<span class="comment">/**
 * A diagnostics listener that feeds all messages into the given reporter.
 * @param reporter
 */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class DiagnosticsReporter extends Object with javax.tools.DiagnosticListener[javax.tools.JavaFileObject]" id="sbt.compiler.javac;DiagnosticsReporter">DiagnosticsReporter</a><a href="#sbt.compiler.javac;DiagnosticsReporter" title="sbt.compiler.javac.DiagnosticsReporter" class="delimiter">(</a><a title="xsbti.Reporter" id="sbt.compiler.javac;DiagnosticsReporter.reporter">reporter</a>: <a href="../../../xsbti/Reporter.java.html#xsbti;Reporter" title="xsbti.Reporter">Reporter</a><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="javax.tools.DiagnosticListener[javax.tools.JavaFileObject]">DiagnosticListener</span><span class="delimiter">[</span>JavaFileObject<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="keyword">val</span> <a title="String" id="sbt.compiler.javac;DiagnosticsReporter.END_OF_LINE_MATCHER">END_OF_LINE_MATCHER</a> = <span title="String(&quot;(\r\n)|[\r]|[\n]&quot;)" class="string">&quot;(\r\n)|[\r]|[\n]&quot;</span>
  <span class="keyword">val</span> <a title="String" id="sbt.compiler.javac;DiagnosticsReporter.EOL">EOL</a> = <span title="System.type">System</span>.<span title="(x$1: String)String">getProperty</span><span class="delimiter">(</span><span title="String(&quot;line.separator&quot;)" class="string">&quot;line.separator&quot;</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">var</span> <a title="Boolean" id="sbt.compiler.javac;DiagnosticsReporter.errorEncountered">errorEncountered</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="sbt.compiler.javac;DiagnosticsReporter.hasErrors">hasErrors</a>: <span title="Boolean">Boolean</span> = <a href="#sbt.compiler.javac;DiagnosticsReporter.errorEncountered" title="Boolean">errorEncountered</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(d: javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject])String" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage">fixedDiagnosticMessage</a><span class="delimiter">(</span><a title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.d">d</a>: <span title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">Diagnostic</span><span class="delimiter">[</span>_ &lt;: JavaFileObject<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.getRawMessage">getRawMessage</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="(x$1: java.util.Locale)String">getMessage</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage">fixWarnOrErrorMessage</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.tmp">tmp</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.getRawMessage" title="=&gt; String">getRawMessage</a>
      <span class="comment">// we fragment off the line/source/type report from the message.</span>
      <span class="comment">// NOTE - End of line handling may be off.</span>
      <span class="keyword">val</span> <a title="Seq[String]" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines">lines</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
        <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.tmp" title="String">tmp</a>.<span title="(x$1: String)Array[String]">split</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.END_OF_LINE_MATCHER" title="=&gt; String">END_OF_LINE_MATCHER</a><span class="delimiter">)</span> <span title="Seq[String]" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.<unapply-selector>" title="(x: Array[String])Option[IndexedSeq[String]]">Array</a><span class="delimiter">(</span><span title="String">head</span>, <a title="Seq[String]" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.tail">tail</a> @ _*<span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.newHead">newHead</a> = <span title="String">head</span>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span class="delimiter">)</span>.<span title="=&gt; String">last</span>
            <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.newHead" title="String">newHead</a> <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.x$1" title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">+:</a> <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.tail" title="Seq[String]">tail</a>
          <span class="keyword">case</span> <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.<unapply-selector>" title="(x: Array[String])Option[IndexedSeq[String]]">Array</a><span class="delimiter">(</span><span title="String">head</span><span class="delimiter">)</span> =&gt;
            <span title="String">head</span>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span class="delimiter">)</span>.<span title="=&gt; String">last</span> <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.x$2" title="(x: String)List[String]">::</a> <span title="scala.collection.immutable.Nil.type">Nil</span>
          <span class="keyword">case</span> <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines.<unapply-selector>" title="(x: Array[String])Option[IndexedSeq[String]]">Array</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="scala.collection.Seq.type">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span>
        <span class="delimiter">}</span>
      <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage.lines" title="Seq[String]">lines</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.EOL" title="=&gt; String">EOL</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()javax.tools.Diagnostic.Kind">getKind</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Diagnostic.Kind.<span title="javax.tools.Diagnostic.Kind(ERROR)">ERROR</span> | Diagnostic.Kind.<span title="javax.tools.Diagnostic.Kind(WARNING)">WARNING</span> | Diagnostic.Kind.<span title="javax.tools.Diagnostic.Kind(MANDATORY_WARNING)">MANDATORY_WARNING</span> =&gt; <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.fixWarnOrErrorMessage" title="=&gt; String">fixWarnOrErrorMessage</a>
      <span class="keyword">case</span> _ =&gt; <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage.getRawMessage" title="=&gt; String">getRawMessage</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T &lt;: javax.tools.JavaFileObject](source: T)Option[String]" id="sbt.compiler.javac;DiagnosticsReporter.fixSource">fixSource</a><span class="delimiter">[</span><a title=" &lt;: javax.tools.JavaFileObject" id="sbt.compiler.javac;DiagnosticsReporter.fixSource;T">T</a> &lt;: JavaFileObject<span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="sbt.compiler.javac;DiagnosticsReporter.fixSource.source">source</a>: <a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource;T" title="T">T</a><span class="delimiter">)</span>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span title="(x: T)Option[T]">Option</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource.source" title="T">source</a><span class="delimiter">)</span>.<span title="(f: T =&gt; java.net.URI)Option[java.net.URI]">map</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource.$anonfun.x$3" title="T">_</a>.<span title="()java.net.URI">toUri</span>.<span title="()java.net.URI">normalize</span><span class="delimiter">)</span>.<span title="(f: java.net.URI =&gt; java.io.File)Option[java.io.File]">map</span><span class="delimiter">(</span><span title="(x$1: java.net.URI)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource.$anonfun.x$4" title="java.net.URI">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: java.io.File =&gt; String)Option[String]">map</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource.$anonfun.x$5" title="java.io.File">_</a>.<span title="()String">getAbsolutePath</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="IllegalArgumentException" id="sbt.compiler.javac;DiagnosticsReporter.fixSource.t">t</a>: <span title="IllegalArgumentException">IllegalArgumentException</span> =&gt;
        <span class="comment">// Oracle JDK6 has a super dumb notion of what a URI is.  In fact, it's not even a legimitate URL, but a dump</span>
        <span class="comment">// of the filename in a &quot;I hope this works to toString it&quot; kind of way.  This appears to work in practice</span>
        <span class="comment">// but we may need to re-evaluate.</span>
        <span title="(x: T)Option[T]">Option</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource.source" title="T">source</a><span class="delimiter">)</span>.<span title="(f: T =&gt; String)Option[String]">map</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource.$anonfun.x$6" title="T">_</a>.<span title="()java.net.URI">toUri</span>.<span title="()String">toString</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(d: javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject])Unit" id="sbt.compiler.javac;DiagnosticsReporter.report">report</a><span class="delimiter">(</span><a title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]" id="sbt.compiler.javac;DiagnosticsReporter.report.d">d</a>: <span title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">Diagnostic</span><span class="delimiter">[</span>_ &lt;: JavaFileObject<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="xsbti.Severity" id="sbt.compiler.javac;DiagnosticsReporter.report.severity">severity</a> =
      <a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()javax.tools.Diagnostic.Kind">getKind</span> <span title="xsbti.Severity" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Diagnostic.Kind.<span title="javax.tools.Diagnostic.Kind(ERROR)">ERROR</span> =&gt; Severity.<span title="xsbti.Severity(Error)">Error</span>
        <span class="keyword">case</span> Diagnostic.Kind.<span title="javax.tools.Diagnostic.Kind(WARNING)">WARNING</span> | Diagnostic.Kind.<span title="javax.tools.Diagnostic.Kind(MANDATORY_WARNING)">MANDATORY_WARNING</span> =&gt; Severity.<span title="xsbti.Severity(Warn)">Warn</span>
        <span class="keyword">case</span> _ =&gt; Severity.<span title="xsbti.Severity(Info)">Info</span>
      <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="String" id="sbt.compiler.javac;DiagnosticsReporter.report.msg">msg</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.fixedDiagnosticMessage" title="(d: javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject])String">fixedDiagnosticMessage</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="xsbti.Position" id="sbt.compiler.javac;DiagnosticsReporter.report.pos">pos</a>: xsbti.<a href="../../../xsbti/Position.java.html#xsbti;Position" title="xsbti.Position">Position</a> =
      <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon" title="xsbti.Position{}" class="keyword">new</a> <a title="anonymous class $anon extends Object with xsbti.Position" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon">xsbti</a>.<a href="../../../xsbti/Position.java.html#xsbti;Position" title="xsbti.Position">Position</a> <span class="delimiter">{</span>
        <span class="comment">// https://docs.oracle.com/javase/7/docs/api/javax/tools/Diagnostic.html</span>
        <span class="comment">// Negative values (except NOPOS) and 0 are not valid line or column numbers.</span>
        <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(n: Long)Option[Long]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.checkNoPos">checkNoPos</a><span class="delimiter">(</span><a title="Long" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.checkNoPos.n">n</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> =
          <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.checkNoPos.n" title="Long">n</a> <span title="Option[Long]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="Long(-1L)">NOPOS</span>       =&gt; <span title="None.type">None</span>
            <span class="keyword">case</span> <span title="Long">x</span> <span class="keyword">if</span> <span title="Long">x</span> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(0)" class="int">0</span> =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Invalid position: &quot;)">Invalid position: $</span><span title="Long">x</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="Long">x</span>           =&gt; <span title="(x: Long)Option[Long]">Option</span><span class="delimiter">(</span><span title="Long">x</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        <span class="keyword">override</span> <span class="keyword">val</span> <a title="xsbti.Maybe[Integer]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.line">line</a>: <a href="../../../xsbti/Maybe.java.html#xsbti;Maybe" title="xsbti.Maybe[Integer]">Maybe</a><span class="delimiter">[</span>Integer<span class="delimiter">]</span> = <a href="../../Logger.scala.html#sbt.Logger" title="sbt.Logger.type">Logger</a>.<a href="../../Logger.scala.html#sbt.Logger.o2m" title="(o: Option[Integer])xsbti.Maybe[Integer]">o2m</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.checkNoPos" title="(n: Long)Option[Long]">checkNoPos</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()Long">getLineNumber</span><span class="delimiter">)</span> <span title="(f: Long =&gt; Integer)Option[Integer]">map</span> <span class="delimiter">{</span> <a title="Long" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.line.$anonfun.x">x</a> =&gt; <span title="Integer" class="keyword">new</span> <span title="Integer">Integer</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.line.$anonfun.x" title="Long">x</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="=&gt; Option[Long]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.startPosition">startPosition</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> = <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.checkNoPos" title="(n: Long)Option[Long]">checkNoPos</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()Long">getStartPosition</span><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="=&gt; Option[Long]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.endPosition">endPosition</a>: <span title="Option[Long]">Option</span><span class="delimiter">[</span>Long<span class="delimiter">]</span> = <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.checkNoPos" title="(n: Long)Option[Long]">checkNoPos</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()Long">getEndPosition</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">val</span> <a title="xsbti.Maybe[Integer]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.offset">offset</a>: <a href="../../../xsbti/Maybe.java.html#xsbti;Maybe" title="xsbti.Maybe[Integer]">Maybe</a><span class="delimiter">[</span>Integer<span class="delimiter">]</span> = <a href="../../Logger.scala.html#sbt.Logger" title="sbt.Logger.type">Logger</a>.<a href="../../Logger.scala.html#sbt.Logger.o2m" title="(o: Option[Integer])xsbti.Maybe[Integer]">o2m</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.checkNoPos" title="(n: Long)Option[Long]">checkNoPos</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()Long">getPosition</span><span class="delimiter">)</span> <span title="(f: Long =&gt; Integer)Option[Integer]">map</span> <span class="delimiter">{</span> <a title="Long" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.offset.$anonfun.x">x</a> =&gt; <span title="Integer" class="keyword">new</span> <span title="Integer">Integer</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.offset.$anonfun.x" title="Long">x</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent">lineContent</a>: <span title="String">String</span> = <span class="delimiter">{</span>
          <span class="keyword">def</span> <a title="=&gt; Option[String]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine">getDiagnosticLine</a>: <span title="Option[String]">Option</span><span class="delimiter">[</span>String<span class="delimiter">]</span> =
            <span class="keyword">try</span> <span class="delimiter">{</span>
              <span class="comment">// See com.sun.tools.javac.api.ClientCodeWrapper.DiagnosticSourceUnwrapper</span>
              <span class="keyword">val</span> <a title="Object" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnostic">diagnostic</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()Class[_]">getClass</span>.<span title="(x$1: String)java.lang.reflect.Field">getField</span><span class="delimiter">(</span><span title="String(&quot;d&quot;)" class="string">&quot;d&quot;</span><span class="delimiter">)</span>.<span title="(x$1: Any)Object">get</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a><span class="delimiter">)</span>
              <span class="comment">// See com.sun.tools.javac.util.JCDiagnostic#getDiagnosticSource</span>
              <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.getDiagnosticSourceMethod">getDiagnosticSourceMethod</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnostic" title="Object">diagnostic</a>.<span title="()Class[_]">getClass</span>.<span title="(x$1: String, x$2: &lt;repeated...&gt;[Class[_]])java.lang.reflect.Method">getDeclaredMethod</span><span class="delimiter">(</span><span title="String(&quot;getDiagnosticSource&quot;)" class="string">&quot;getDiagnosticSource&quot;</span><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.getPositionMethod">getPositionMethod</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnostic" title="Object">diagnostic</a>.<span title="()Class[_]">getClass</span>.<span title="(x$1: String, x$2: &lt;repeated...&gt;[Class[_]])java.lang.reflect.Method">getDeclaredMethod</span><span class="delimiter">(</span><span title="String(&quot;getPosition&quot;)" class="string">&quot;getPosition&quot;</span><span class="delimiter">)</span>
              <span title="(_1: Option[Object], _2: Option[Object])(Option[Object], Option[Object])" class="delimiter">(</span><span title="(x: Object)Option[Object]">Option</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.getDiagnosticSourceMethod" title="java.lang.reflect.Method">getDiagnosticSourceMethod</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnostic" title="Object">diagnostic</a><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="(x: Object)Option[Object]">Option</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.getPositionMethod" title="java.lang.reflect.Method">getPositionMethod</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnostic" title="Object">diagnostic</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Option[String]" class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="Object" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnosticSource">diagnosticSource</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="Long" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.position">position</a>: java.lang.<span title="Long">Long</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                  <span class="comment">// See com.sun.tools.javac.util.DiagnosticSource</span>
                  <span class="keyword">val</span> <a title="java.lang.reflect.Method" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.getLineMethod">getLineMethod</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnosticSource" title="Object">diagnosticSource</a>.<span title="()Class[_]">getClass</span>.<span title="(x$1: String, x$2: &lt;repeated...&gt;[Class[_]])java.lang.reflect.Method">getMethod</span><span class="delimiter">(</span><span title="String(&quot;getLine&quot;)" class="string">&quot;getLine&quot;</span>, <span title="Integer.type">Integer</span>.<span title="Class[Integer]">TYPE</span><span class="delimiter">)</span>
                  <span title="(x: Object)Option[Object]">Option</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.getLineMethod" title="java.lang.reflect.Method">getLineMethod</a>.<span title="(x$1: Any, x$2: &lt;repeated...&gt;[Object])Object">invoke</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.diagnosticSource" title="Object">diagnosticSource</a>, <span title="Integer" class="keyword">new</span> <span title="Integer">Integer</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.position" title="Long">position</a>.<span title="()Int">intValue</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: Object =&gt; String)Option[String]">map</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.$anonfun.x$7" title="Object">_</a>.<span title="()String">toString</span><span class="delimiter">)</span>
                <span class="keyword">case</span> _ =&gt; <span title="None.type">None</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
              <span class="comment">// TODO - catch ReflectiveOperationException once sbt is migrated to JDK7</span>
              <span class="keyword">case</span> <a title="Throwable" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine.ignored">ignored</a>: <span title="Throwable">Throwable</span> =&gt; <span title="None.type">None</span>
            <span class="delimiter">}</span>

          <span class="keyword">def</span> <a title="=&gt; String" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression">getExpression</a>: <span title="String">String</span> =
            <span title="(x: _$2)Option[_$2]">Option</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()_$2">getSource</span><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="javax.tools.JavaFileObject" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.source">source</a>: <span title="javax.tools.JavaFileObject">JavaFileObject</span><span class="delimiter">)</span> =&gt;
                <span title="(_1: Option[CharSequence], _2: Option[Long], _3: Option[Long])(Option[CharSequence], Option[Long], Option[Long])" class="delimiter">(</span><span title="(x: CharSequence)Option[CharSequence]">Option</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.source" title="javax.tools.JavaFileObject">source</a>.<span title="(x$1: Boolean)CharSequence">getCharContent</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.startPosition" title="=&gt; Option[Long]">startPosition</a>, <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.endPosition" title="=&gt; Option[Long]">endPosition</a><span class="delimiter">)</span> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
                  <span class="keyword">case</span> <span class="delimiter">(</span>Some<span class="delimiter">(</span><a title="CharSequence" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.cc">cc</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="Long" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.start">start</a><span class="delimiter">)</span>, Some<span class="delimiter">(</span><a title="Long" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.end">end</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.cc" title="CharSequence">cc</a>.<span title="(x$1: Int, x$2: Int)CharSequence">subSequence</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.start" title="Long">start</a>.<span title="=&gt; Int">toInt</span>, <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression.end" title="Long">end</a>.<span title="=&gt; Int">toInt</span><span class="delimiter">)</span>.<span title="()String">toString</span>
                  <span class="keyword">case</span> _                                  =&gt; <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
                <span class="delimiter">}</span>
              <span class="keyword">case</span> _ =&gt; <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
            <span class="delimiter">}</span>

          <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getDiagnosticLine" title="=&gt; Option[String]">getDiagnosticLine</a>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.lineContent.getExpression" title="=&gt; String">getExpression</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">private</span> <span class="keyword">val</span> <a title="Option[String]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourceUri">sourceUri</a> = <a href="#sbt.compiler.javac;DiagnosticsReporter.fixSource" title="(source: _$2)Option[String]">fixSource</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.d" title="javax.tools.Diagnostic[_ &lt;: javax.tools.JavaFileObject]">d</a>.<span title="()_$2">getSource</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">val</span> <a title="xsbti.Maybe[String]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourcePath">sourcePath</a> = <a href="../../Logger.scala.html#sbt.Logger" title="sbt.Logger.type">Logger</a>.<a href="../../Logger.scala.html#sbt.Logger.o2m" title="(o: Option[String])xsbti.Maybe[String]">o2m</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourceUri" title="=&gt; Option[String]">sourceUri</a><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">val</span> <a title="xsbti.Maybe[java.io.File]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourceFile">sourceFile</a> = <a href="../../Logger.scala.html#sbt.Logger" title="sbt.Logger.type">Logger</a>.<a href="../../Logger.scala.html#sbt.Logger.o2m" title="(o: Option[java.io.File])xsbti.Maybe[java.io.File]">o2m</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourceUri" title="=&gt; Option[String]">sourceUri</a>.<span title="(f: String =&gt; java.io.File)Option[java.io.File]">map</span><span class="delimiter">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourceFile.$anonfun.x$8" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">val</span> <a title="xsbti.Maybe[Integer]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.pointer">pointer</a> = <a href="../../Logger.scala.html#sbt.Logger" title="sbt.Logger.type">Logger</a>.<a href="../../Logger.scala.html#sbt.Logger.o2m" title="(o: Option[Integer])xsbti.Maybe[Integer]">o2m</a><span class="delimiter">(</span><span title="Option.type">Option</span>.<span title="[A]=&gt; Option[A]">empty</span><span title="Option[Integer]" class="delimiter">[</span><span title="Integer">Integer</span><span class="delimiter">]</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">val</span> <a title="xsbti.Maybe[String]" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.pointerSpace">pointerSpace</a> = <a href="../../Logger.scala.html#sbt.Logger" title="sbt.Logger.type">Logger</a>.<a href="../../Logger.scala.html#sbt.Logger.o2m" title="(o: Option[String])xsbti.Maybe[String]">o2m</a><span class="delimiter">(</span><span title="Option.type">Option</span>.<span title="[A]=&gt; Option[A]">empty</span><span title="Option[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">)</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.toString">toString</a> =
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourceUri" title="=&gt; Option[String]">sourceUri</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><span class="delimiter">{</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.sourceUri" title="=&gt; Option[String]">sourceUri</a>.<span title="=&gt; String">get</span><span class="delimiter">}</span><span title="String(&quot;:&quot;)">:$</span><span class="delimiter">{</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.line" title="=&gt; xsbti.Maybe[Integer]">line</a>.<a href="../../../xsbti/Maybe.java.html#xsbti;Maybe.isDefined" title="()Boolean">isDefined</a><span class="delimiter">)</span> <a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos;$anon.line" title="=&gt; xsbti.Maybe[Integer]">line</a>.<a href="../../../xsbti/Maybe.java.html#xsbti;Maybe.get" title="()Integer">get</a> <span class="keyword">else</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span>
          <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.severity" title="xsbti.Severity">severity</a> <span title="(x$1: AnyRef)Boolean">==</span> Severity.<span title="xsbti.Severity(Error)">Error</span><span class="delimiter">)</span> <a href="#sbt.compiler.javac;DiagnosticsReporter.errorEncountered" title="Boolean">errorEncountered</a> = <span title="Boolean(true)" class="keyword">true</span>
    <a href="#sbt.compiler.javac;DiagnosticsReporter.reporter" title="xsbti.Reporter">reporter</a>.<a href="../../../xsbti/Reporter.java.html#xsbti;Reporter.log" title="(pos: xsbti.Position, msg: String, sev: xsbti.Severity)Unit">log</a><span class="delimiter">(</span><a href="#sbt.compiler.javac;DiagnosticsReporter.report.pos" title="xsbti.Position">pos</a>, <a href="#sbt.compiler.javac;DiagnosticsReporter.report.msg" title="String">msg</a>, <a href="#sbt.compiler.javac;DiagnosticsReporter.report.severity" title="xsbti.Severity">severity</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
