

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configure and use Scala &mdash; sbt Documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/issuetracker.css" type="text/css" />
    <link rel="stylesheet" href="../_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="../_static/syntax.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Exo:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.13.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../versions.js"></script>
    <script type="text/javascript" src="../_static/set-versions.js"></script>
    <script type="text/javascript" src="../../../assets/warnOldDocs.js"></script>
    <link rel="top" title="sbt Documentation" href="../index.html" />
    <link rel="up" title="How to..." href="index.html" />
    <link rel="next" title="Generate Documentation" href="scaladoc.html" />
    <link rel="prev" title="Running commands" href="runningcommands.html" /> 
  </head>
  <body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <ul class="nav">
          <li><a href="http://www.scala-sbt.org/">Home</a></li>
          <li><a href="../index.html">Documentation</a></li>
          <li><a href="../Getting-Started/Setup.html">Download</a></li>
          <li><a href="https://groups.google.com/forum/#!forum/sbt-dev">Mailing List</a></li>
          <li><a href="http://github.com/sbt/sbt">Project</a></li>           
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Configure and use Scala</div>
      <div class="search-box">
        <form method="get" action="http://www.google.com/search" id="search">
          <input type="search" placeholder="Search 0.13.5 on Google" name="q" results="10" size="29" id="search-input">
          <input type="hidden"  name="sitesearch" value="http://www.scala-sbt.org/0.13.5/docs/"> 
          <input type="submit" id="submit-search">
        </form>
      </div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <ul class="breadcrumb">        
              <li>
                 <span class="divider">|</span> <a href="scaladoc.html">Generate Documentation</a> <span class="divider">»</span>
              </li>
              <li>
                 <span class="divider">&gt;</span><a href="index.html">How to...</a>
              </li>
              <li>
                <a href="../index.html">Contents</a>
              </li>
              <li>
                <span class="divider">«</span> <a href="runningcommands.html">Running commands</a> <span class="divider">|</span>
              </li>
              <li>
                <select id="versions"><option selected value="0.13.5">Version 0.13.5</option></select>
              </li>
            </ul>         
          </div>
        </div>
        <div class="row">
          <div class="span9">
            
  <div class="section" id="configure-and-use-scala">
<h1>Configure and use Scala<a class="headerlink" href="#configure-and-use-scala" title="Permalink to this headline">¶</a></h1>
<div class="full-howto section" id="version">
<h2>Set the Scala version used for building the project<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h2>
</div>
<p>The <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.scalaVersion">scalaVersion</a> configures the version of Scala used for compilation.  By default, sbt also adds a dependency on the Scala library with this version.  See the next section for how to disable this automatic dependency.  If the Scala version is not specified, the version sbt was built against is used.  It is recommended to explicitly specify the version of Scala.</p>
<p>For example, to set the Scala version to &quot;2.9.2&quot;,</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">&quot;2.9.2&quot;</span>
</pre></div>
</div>
<div class="full-howto section" id="noauto">
<h2>Disable the automatic dependency on the Scala library<a class="headerlink" href="#noauto" title="Permalink to this headline">¶</a></h2>
</div>
<p>sbt adds a dependency on the Scala standard library by default.  To disable this behavior, set the <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.autoScalaLibrary">autoScalaLibrary</a> setting to false.</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">autoScalaLibrary</span> <span class="o">:=</span> <span class="kc">false</span>
</pre></div>
</div>
<div class="full-howto section" id="temporary">
<h2>Temporarily switch to a different Scala version<a class="headerlink" href="#temporary" title="Permalink to this headline">¶</a></h2>
</div>
<p>To set the Scala version in all scopes to a specific value, use the <span class="pre">++</span> command.  For example, to temporarily use Scala 2.8.2, run:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> ++ 2.8.2
</pre></div>
</div>
<div class="full-howto section" id="local">
<h2>Use a local Scala installation for building a project<a class="headerlink" href="#local" title="Permalink to this headline">¶</a></h2>
</div>
<p>Defining the <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.scalaHome">scalaHome</a> setting with the path to the Scala home directory will use that Scala installation.  sbt still requires <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.scalaVersion">scalaVersion</a> to be set when a local Scala version is used.  For example,</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">&quot;2.10.0-local&quot;</span>

<span class="n">scalaHome</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="n">file</span><span class="o">(</span><span class="s">&quot;/path/to/scala/home/&quot;</span><span class="o">))</span>
</pre></div>
</div>
<div class="full-howto section" id="cross">
<h2>Build a project against multiple Scala versions<a class="headerlink" href="#cross" title="Permalink to this headline">¶</a></h2>
</div>
<p>See <a class="reference internal" href="../Detailed-Topics/Cross-Build.html"><em>cross building</em></a>.</p>
<div class="full-howto section" id="consolequick">
<h2>Enter the Scala REPL with a project's dependencies on the classpath, but not the compiled project classes<a class="headerlink" href="#consolequick" title="Permalink to this headline">¶</a></h2>
</div>
<p>The <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.consoleQuick">consoleQuick</a> action retrieves dependencies and puts them on the classpath of the Scala REPL.  The project's sources are not compiled, but sources of any source dependencies are compiled.  To enter the REPL with test dependencies on the classpath but without compiling test sources, run <span class="pre">test:consoleQuick</span>.  This will force compilation of main sources.</p>
<div class="full-howto section" id="console">
<h2>Enter the Scala REPL with a project's dependencies and compiled code on the classpath<a class="headerlink" href="#console" title="Permalink to this headline">¶</a></h2>
</div>
<p>The <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.console">console</a> action retrieves dependencies and compiles sources and puts them on the classpath of the Scala REPL.  To enter the REPL with test dependencies and compiled test sources on the classpath, run <span class="pre">test:console</span>.</p>
<div class="full-howto section" id="consoleproject">
<h2>Enter the Scala REPL with plugins and the build definition on the classpath<a class="headerlink" href="#consoleproject" title="Permalink to this headline">¶</a></h2>
</div>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">&gt;</span> consoleProject
</pre></div>
</div>
<p>For details, see the <a class="reference internal" href="../Detailed-Topics/Console-Project.html"><em>consoleProject</em></a> page.</p>
<div class="full-howto section" id="initial">
<h2>Define the initial commands evaluated when entering the Scala REPL<a class="headerlink" href="#initial" title="Permalink to this headline">¶</a></h2>
</div>
<p>Set <span class="pre">initialCommands in console</span> to set the initial statements to evaluate when <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.console">console</a> and <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.consoleQuick">consoleQuick</a> are run.  To configure <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.consoleQuick">consoleQuick</a> separately, use <span class="pre">initialCommands in consoleQuick</span>.
For example,</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">initialCommands</span> <span class="n">in</span> <span class="n">console</span> <span class="o">:=</span> <span class="s">&quot;&quot;&quot;println(&quot;Hello from console&quot;)&quot;&quot;&quot;</span>

<span class="n">initialCommands</span> <span class="n">in</span> <span class="n">consoleQuick</span> <span class="o">:=</span> <span class="s">&quot;&quot;&quot;println(&quot;Hello from consoleQuick&quot;)&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.consoleProject">consoleProject</a> command is configured separately by <span class="pre">initialCommands in consoleProject</span>.  It does not use the value from <span class="pre">initialCommands in console</span> by default.  For example,</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">initialCommands</span> <span class="n">in</span> <span class="n">consoleProject</span> <span class="o">:=</span> <span class="s">&quot;&quot;&quot;println(&quot;Hello from consoleProject&quot;)&quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="full-howto section" id="cleanup">
<h2>Define the commands evaluated when exiting the Scala REPL<a class="headerlink" href="#cleanup" title="Permalink to this headline">¶</a></h2>
</div>
<p>Set <span class="pre">cleanupCommands in console</span> to set the statements to evaluate after exiting the Scala REPL started by <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.console">console</a> and <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.consoleQuick">consoleQuick</a>.  To configure <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.consoleQuick">consoleQuick</a> separately, use <span class="pre">cleanupCommands in consoleQuick</span>.
For example,</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">cleanupCommands</span> <span class="n">in</span> <span class="n">console</span> <span class="o">:=</span> <span class="s">&quot;&quot;&quot;println(&quot;Bye from console&quot;)&quot;&quot;&quot;</span>

<span class="n">cleanupCommands</span> <span class="n">in</span> <span class="n">consoleQuick</span> <span class="o">:=</span> <span class="s">&quot;&quot;&quot;println(&quot;Bye from consoleQuick&quot;)&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.consoleProject">consoleProject</a> command is configured separately by <span class="pre">cleanupCommands in consoleProject</span>.  It does not use the value from <span class="pre">cleanupCommands in console</span> by default.  For example,</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="n">cleanupCommands</span> <span class="n">in</span> <span class="n">consoleProject</span> <span class="o">:=</span> <span class="s">&quot;&quot;&quot;println(&quot;Bye from consoleProject&quot;)&quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="full-howto section" id="embed">
<h2>Use the Scala REPL from project code<a class="headerlink" href="#embed" title="Permalink to this headline">¶</a></h2>
</div>
<p>sbt runs tests in the same JVM as sbt itself and Scala classes are not in the same class loader as the application classes.  This is also the case in <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.console">console</a> and when <a class="pre reference external" href="../../sxr/sbt/Keys.scala.html#sbt.Keys.run">run</a> is not forked. Therefore, when using the Scala interpreter, it is important to set it up properly to avoid an error message like:</p>
<div class="highlight-text"><div class="highlight"><pre>Failed to initialize compiler: class scala.runtime.VolatileBooleanRef not found.
** Note that as of 2.8 scala does not assume use of the java classpath.
** For the old behavior pass -usejavacp to scala, or if using a Settings
** object programmatically, settings.usejavacp.value = true.
</pre></div>
</div>
<p>The key is to initialize the Settings for the interpreter using <em>embeddedDefaults</em>.  For example:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">val</span> <span class="n">settings</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Settings</span>
<span class="n">settings</span><span class="o">.</span><span class="n">embeddedDefaults</span><span class="o">[</span><span class="kt">MyType</span><span class="o">]</span>
<span class="k">val</span> <span class="n">interpreter</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Interpreter</span><span class="o">(</span><span class="n">settings</span><span class="o">,</span> <span class="o">...)</span>
</pre></div>
</div>
<p>Here, MyType is a representative class that should be included on the interpreter's classpath and in its application class loader.  For more background, see the <a class="reference external" href="https://gist.github.com/404272">original proposal</a> that resulted in <em>embeddedDefaults</em> being added.</p>
<p>Similarly, use a representative class as the type argument when using the <em>break</em> and <em>breakIf</em> methods of <em>ILoop</em>, as in the following example:</p>
<div class="highlight-scala"><div class="highlight"><pre><span class="k">def</span> <span class="n">x</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">import</span> <span class="nn">scala.tools.nsc.interpreter.ILoop</span>
  <span class="nc">ILoop</span><span class="o">.</span><span class="n">breakIf</span><span class="o">[</span><span class="kt">MyType</span><span class="o">](</span><span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="o">,</span> <span class="s">&quot;a&quot;</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">,</span> <span class="s">&quot;b&quot;</span> <span class="o">-&gt;</span> <span class="n">b</span> <span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
<p><p class="page-source"><a class="reference external" href="https://github.com/sbt/sbt/raw/0.13.5/src/sphinx/Howto/scala.rst">Source for this page</a></p>
</p>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"><ul>
<li><a class="reference internal" href="#">Configure and use Scala</a><ul>
<li><a class="reference internal" href="#version">Set the Scala version used for building the project</a></li>
<li><a class="reference internal" href="#noauto">Disable the automatic dependency on the Scala library</a></li>
<li><a class="reference internal" href="#temporary">Temporarily switch to a different Scala version</a></li>
<li><a class="reference internal" href="#local">Use a local Scala installation for building a project</a></li>
<li><a class="reference internal" href="#cross">Build a project against multiple Scala versions</a></li>
<li><a class="reference internal" href="#consolequick">Enter the Scala REPL with a project's dependencies on the classpath, but not the compiled project classes</a></li>
<li><a class="reference internal" href="#console">Enter the Scala REPL with a project's dependencies and compiled code on the classpath</a></li>
<li><a class="reference internal" href="#consoleproject">Enter the Scala REPL with plugins and the build definition on the classpath</a></li>
<li><a class="reference internal" href="#initial">Define the initial commands evaluated when entering the Scala REPL</a></li>
<li><a class="reference internal" href="#cleanup">Define the commands evaluated when exiting the Scala REPL</a></li>
<li><a class="reference internal" href="#embed">Use the Scala REPL from project code</a></li>
</ul>
</li>
</ul>
</div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41449189-1', 'scala-sbt.org');
  ga('send', 'pageview');

  </script>
  

  </body>
</html>