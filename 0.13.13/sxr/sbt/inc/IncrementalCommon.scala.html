<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/inc/IncrementalCommon.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> sbt
<span class="keyword">package</span> inc

<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> xsbti.compile.DependencyChanges
<span class="keyword">import</span> xsbti.api.<span class="delimiter">{</span> Compilation, Source <span class="delimiter">}</span>
<span class="keyword">import</span> java.io.File

<span class="keyword">private</span><span class="delimiter">[</span>inc<span class="delimiter">]</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class IncrementalCommon extends AnyRef" id="sbt.inc;IncrementalCommon">IncrementalCommon</a><a href="#sbt.inc;IncrementalCommon" title="sbt.inc.IncrementalCommon" class="delimiter">(</a><a title="sbt.Logger" id="sbt.inc;IncrementalCommon.log">log</a>: <a href="../Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a>, <a title="sbt.inc.IncOptions" id="sbt.inc;IncrementalCommon.options">options</a>: <a href="IncOptions.scala.html#sbt.inc;IncOptions" title="sbt.inc.IncOptions">IncOptions</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(options: sbt.inc.IncOptions)Boolean" id="sbt.inc;IncrementalCommon.incDebug">incDebug</a><span class="delimiter">(</span><a title="sbt.inc.IncOptions" id="sbt.inc;IncrementalCommon.incDebug.options">options</a>: <a href="IncOptions.scala.html#sbt.inc;IncOptions" title="sbt.inc.IncOptions">IncOptions</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#sbt.inc;IncrementalCommon.incDebug.options" title="sbt.inc.IncOptions">options</a>.<a href="IncOptions.scala.html#sbt.inc;IncOptions.relationsDebug" title="=&gt; Boolean">relationsDebug</a> <span title="(x: Boolean)Boolean">||</span> java.lang.<span title="Boolean.type">Boolean</span>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><a href="Incremental.scala.html#sbt.inc.Incremental" title="sbt.inc.Incremental.type">Incremental</a>.<a href="Incremental.scala.html#sbt.inc.Incremental.incDebugProp" title="=&gt; String">incDebugProp</a><span class="delimiter">)</span>

  <span class="comment">// setting the related system property to true will skip checking that the class name</span>
  <span class="comment">// still comes from the same classpath entry.  This can workaround bugs in classpath construction,</span>
  <span class="comment">// such as the currently problematic -javabootclasspath.  This is subject to removal at any time.</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="sbt.inc;IncrementalCommon.skipClasspathLookup">skipClasspathLookup</a> = java.lang.<span title="Boolean.type">Boolean</span>.<span title="(x$1: String)Boolean">getBoolean</span><span class="delimiter">(</span><span title="String(&quot;xsbt.skip.cp.lookup&quot;)" class="string">&quot;xsbt.skip.cp.lookup&quot;</span><span class="delimiter">)</span>

  <span class="comment">// TODO: the Analysis for the last successful compilation should get returned + Boolean indicating success</span>
  <span class="comment">// TODO: full external name changes, scopeInvalidations</span>
  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(invalidatedRaw: Set[java.io.File], allSources: Set[java.io.File], binaryChanges: xsbti.compile.DependencyChanges, previous: sbt.inc.Analysis, doCompile: (Set[java.io.File], xsbti.compile.DependencyChanges) =&gt; sbt.inc.Analysis, classfileManager: sbt.inc.ClassfileManager, cycleNum: Int)sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.cycle">cycle</a><span class="delimiter">(</span><a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.cycle.invalidatedRaw">invalidatedRaw</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.cycle.allSources">allSources</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="xsbti.compile.DependencyChanges" id="sbt.inc;IncrementalCommon.cycle.binaryChanges">binaryChanges</a>: <a href="../../xsbti/compile/DependencyChanges.java.html#xsbti.compile;DependencyChanges" title="xsbti.compile.DependencyChanges">DependencyChanges</a>, <a title="sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.cycle.previous">previous</a>: <a href="Analysis.scala.html#sbt.inc;Analysis" title="sbt.inc.Analysis">Analysis</a>,
    <a title="(Set[java.io.File], xsbti.compile.DependencyChanges) =&gt; sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.cycle.doCompile">doCompile</a>: <span class="delimiter">(</span>Set<span class="delimiter">[</span>File<span class="delimiter">]</span>, DependencyChanges<span class="delimiter">)</span> =&gt; Analysis, <a title="sbt.inc.ClassfileManager" id="sbt.inc;IncrementalCommon.cycle.classfileManager">classfileManager</a>: <a href="ClassfileManager.scala.html#sbt.inc;ClassfileManager" title="sbt.inc.ClassfileManager">ClassfileManager</a>, <a title="Int" id="sbt.inc;IncrementalCommon.cycle.cycleNum">cycleNum</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="Analysis.scala.html#sbt.inc;Analysis" title="sbt.inc.Analysis">Analysis</a> =
    <span title="sbt.inc.Analysis" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.invalidatedRaw" title="Set[java.io.File]">invalidatedRaw</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.cycle.previous" title="sbt.inc.Analysis">previous</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="sbt.inc.Incremental.PrefixingLogger" id="sbt.inc;IncrementalCommon.cycle.wrappedLog">wrappedLog</a> = <span title="sbt.inc.Incremental.PrefixingLogger" class="keyword">new</span> <a href="Incremental.scala.html#sbt.inc.Incremental" title="sbt.inc.Incremental.type">Incremental</a>.<a href="Incremental.scala.html#sbt.inc.Incremental;PrefixingLogger" title="sbt.inc.Incremental.PrefixingLogger">PrefixingLogger</a><span class="delimiter">(</span><span title="String(&quot;[inv] &quot;)" class="string">&quot;[inv] &quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(s: =&gt; String)Unit" id="sbt.inc;IncrementalCommon.cycle.debug">debug</a><span class="delimiter">(</span><a title="=&gt; String" id="sbt.inc;IncrementalCommon.cycle.debug.s">s</a>: =&gt; String<span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.incDebug" title="(options: sbt.inc.IncOptions)Boolean">incDebug</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.options" title="sbt.inc.IncOptions">options</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#sbt.inc;IncrementalCommon.cycle.wrappedLog" title="sbt.inc.Incremental.PrefixingLogger">wrappedLog</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.debug.s" title="=&gt; String">s</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.cycle.withPackageObjects">withPackageObjects</a> = <a href="#sbt.inc;IncrementalCommon.cycle.invalidatedRaw" title="Set[java.io.File]">invalidatedRaw</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidatedPackageObjects" title="(invalidated: Set[java.io.File], relations: sbt.inc.Relations, apis: sbt.inc.APIs)Set[java.io.File]">invalidatedPackageObjects</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.invalidatedRaw" title="Set[java.io.File]">invalidatedRaw</a>, <a href="#sbt.inc;IncrementalCommon.cycle.previous" title="sbt.inc.Analysis">previous</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.relations" title="=&gt; sbt.inc.Relations">relations</a>, <a href="#sbt.inc;IncrementalCommon.cycle.previous" title="sbt.inc.Analysis">previous</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.apis" title="=&gt; sbt.inc.APIs">apis</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.cycle.invalidated">invalidated</a> = <a href="#sbt.inc;IncrementalCommon.expand" title="(invalidated: Set[java.io.File], all: Set[java.io.File])Set[java.io.File]">expand</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.withPackageObjects" title="scala.collection.immutable.Set[java.io.File]">withPackageObjects</a>, <a href="#sbt.inc;IncrementalCommon.cycle.allSources" title="Set[java.io.File]">allSources</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.cycle.pruned">pruned</a> = <a href="Incremental.scala.html#sbt.inc.Incremental" title="sbt.inc.Incremental.type">Incremental</a>.<a href="Incremental.scala.html#sbt.inc.Incremental.prune(0997909fca)" title="(invalidatedSrcs: Set[java.io.File], previous: sbt.inc.Analysis, classfileManager: sbt.inc.ClassfileManager)sbt.inc.Analysis">prune</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.invalidated" title="Set[java.io.File]">invalidated</a>, <a href="#sbt.inc;IncrementalCommon.cycle.previous" title="sbt.inc.Analysis">previous</a>, <a href="#sbt.inc;IncrementalCommon.cycle.classfileManager" title="sbt.inc.ClassfileManager">classfileManager</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.cycle.debug" title="(s: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;********* Pruned: \n&quot;)" class="string">&quot;********* Pruned: \n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.cycle.pruned" title="sbt.inc.Analysis">pruned</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.relations" title="=&gt; sbt.inc.Relations">relations</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n*********&quot;)" class="string">&quot;\n*********&quot;</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.cycle.fresh">fresh</a> = <a href="#sbt.inc;IncrementalCommon.cycle.doCompile" title="(v1: Set[java.io.File], v2: xsbti.compile.DependencyChanges)sbt.inc.Analysis">doCompile</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.invalidated" title="Set[java.io.File]">invalidated</a>, <a href="#sbt.inc;IncrementalCommon.cycle.binaryChanges" title="xsbti.compile.DependencyChanges">binaryChanges</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.cycle.classfileManager" title="sbt.inc.ClassfileManager">classfileManager</a>.<a href="ClassfileManager.scala.html#sbt.inc;ClassfileManager.generated" title="(classes: Iterable[java.io.File])Unit">generated</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.fresh" title="sbt.inc.Analysis">fresh</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.relations" title="=&gt; sbt.inc.Relations">relations</a>.<a href="Relations.scala.html#sbt.inc;Relations.allProducts" title="=&gt; scala.collection.Set[java.io.File]">allProducts</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.cycle.debug" title="(s: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;********* Fresh: \n&quot;)" class="string">&quot;********* Fresh: \n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.cycle.fresh" title="sbt.inc.Analysis">fresh</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.relations" title="=&gt; sbt.inc.Relations">relations</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n*********&quot;)" class="string">&quot;\n*********&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.cycle.merged">merged</a> = <a href="#sbt.inc;IncrementalCommon.cycle.pruned" title="sbt.inc.Analysis">pruned</a> <a href="Analysis.scala.html#sbt.inc;Analysis.++" title="(other: sbt.inc.Analysis)sbt.inc.Analysis">++</a> <a href="#sbt.inc;IncrementalCommon.cycle.fresh" title="sbt.inc.Analysis">fresh</a> <span class="comment">//.copy(relations = pruned.relations ++ fresh.relations, apis = pruned.apis ++ fresh.apis)</span>
      <a href="#sbt.inc;IncrementalCommon.cycle.debug" title="(s: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;********* Merged: \n&quot;)" class="string">&quot;********* Merged: \n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.cycle.merged" title="sbt.inc.Analysis">merged</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.relations" title="=&gt; sbt.inc.Relations">relations</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n*********&quot;)" class="string">&quot;\n*********&quot;</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="sbt.inc.APIChanges[java.io.File]" id="sbt.inc;IncrementalCommon.cycle.incChanges">incChanges</a> = <a href="#sbt.inc;IncrementalCommon.changedIncremental" title="(lastSources: scala.collection.Set[java.io.File], oldAPI: java.io.File =&gt; xsbti.api.Source, newAPI: java.io.File =&gt; xsbti.api.Source)sbt.inc.APIChanges[java.io.File]">changedIncremental</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.invalidated" title="Set[java.io.File]">invalidated</a>, <a href="#sbt.inc;IncrementalCommon.cycle.previous" title="sbt.inc.Analysis">previous</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.apis" title="=&gt; sbt.inc.APIs">apis</a>.<a href="APIs.scala.html#sbt.inc;APIs.internalAPI" title="(src: java.io.File)xsbti.api.Source">internalAPI</a> _, <a href="#sbt.inc;IncrementalCommon.cycle.merged" title="sbt.inc.Analysis">merged</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.apis" title="=&gt; sbt.inc.APIs">apis</a>.<a href="APIs.scala.html#sbt.inc;APIs.internalAPI" title="(src: java.io.File)xsbti.api.Source">internalAPI</a> _<span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.cycle.debug" title="(s: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;\nChanges:\n&quot;)" class="string">&quot;\nChanges:\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.cycle.incChanges" title="sbt.inc.APIChanges[java.io.File]">incChanges</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Int" id="sbt.inc;IncrementalCommon.cycle.transitiveStep">transitiveStep</a> = <a href="#sbt.inc;IncrementalCommon.options" title="sbt.inc.IncOptions">options</a>.<a href="IncOptions.scala.html#sbt.inc;IncOptions.transitiveStep" title="=&gt; Int">transitiveStep</a>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.cycle.incInv">incInv</a> = <a href="#sbt.inc;IncrementalCommon.invalidateIncremental" title="(previous: sbt.inc.Relations, apis: sbt.inc.APIs, changes: sbt.inc.APIChanges[java.io.File], recompiledSources: Set[java.io.File], transitive: Boolean)Set[java.io.File]">invalidateIncremental</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.merged" title="sbt.inc.Analysis">merged</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.relations" title="=&gt; sbt.inc.Relations">relations</a>, <a href="#sbt.inc;IncrementalCommon.cycle.merged" title="sbt.inc.Analysis">merged</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.apis" title="=&gt; sbt.inc.APIs">apis</a>, <a href="#sbt.inc;IncrementalCommon.cycle.incChanges" title="sbt.inc.APIChanges[java.io.File]">incChanges</a>, <a href="#sbt.inc;IncrementalCommon.cycle.invalidated" title="Set[java.io.File]">invalidated</a>, <a href="#sbt.inc;IncrementalCommon.cycle.cycleNum" title="Int">cycleNum</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#sbt.inc;IncrementalCommon.cycle.transitiveStep" title="Int">transitiveStep</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.cycle" title="(invalidatedRaw: Set[java.io.File], allSources: Set[java.io.File], binaryChanges: xsbti.compile.DependencyChanges, previous: sbt.inc.Analysis, doCompile: (Set[java.io.File], xsbti.compile.DependencyChanges) =&gt; sbt.inc.Analysis, classfileManager: sbt.inc.ClassfileManager, cycleNum: Int)sbt.inc.Analysis">cycle</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.cycle.incInv" title="Set[java.io.File]">incInv</a>, <a href="#sbt.inc;IncrementalCommon.cycle.allSources" title="Set[java.io.File]">allSources</a>, <a href="#sbt.inc;IncrementalCommon.emptyChanges" title="=&gt; xsbti.compile.DependencyChanges">emptyChanges</a>, <a href="#sbt.inc;IncrementalCommon.cycle.merged" title="sbt.inc.Analysis">merged</a>, <a href="#sbt.inc;IncrementalCommon.cycle.doCompile" title="(Set[java.io.File], xsbti.compile.DependencyChanges) =&gt; sbt.inc.Analysis">doCompile</a>, <a href="#sbt.inc;IncrementalCommon.cycle.classfileManager" title="sbt.inc.ClassfileManager">classfileManager</a>, <a href="#sbt.inc;IncrementalCommon.cycle.cycleNum" title="Int">cycleNum</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="=&gt; xsbti.compile.DependencyChanges" id="sbt.inc;IncrementalCommon.emptyChanges">emptyChanges</a>: <a href="../../xsbti/compile/DependencyChanges.java.html#xsbti.compile;DependencyChanges" title="xsbti.compile.DependencyChanges">DependencyChanges</a> = <a href="#sbt.inc;IncrementalCommon.emptyChanges;$anon" title="xsbti.compile.DependencyChanges{}" class="keyword">new</a> <a title="anonymous class $anon extends Object with xsbti.compile.DependencyChanges" id="sbt.inc;IncrementalCommon.emptyChanges;$anon">DependencyChanges</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Array[java.io.File]" id="sbt.inc;IncrementalCommon.emptyChanges;$anon.modifiedBinaries">modifiedBinaries</a> = <span title="Array[java.io.File]" class="keyword">new</span> <span title="Array[java.io.File]">Array</span><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Array[String]" id="sbt.inc;IncrementalCommon.emptyChanges;$anon.modifiedClasses">modifiedClasses</a> = <span title="Array[String]" class="keyword">new</span> <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()Boolean" id="sbt.inc;IncrementalCommon.emptyChanges;$anon.isEmpty">isEmpty</a> = <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(invalidated: Set[java.io.File], all: Set[java.io.File])Set[java.io.File]" id="sbt.inc;IncrementalCommon.expand">expand</a><span class="delimiter">(</span><a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.expand.invalidated">invalidated</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.expand.all">all</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Double" id="sbt.inc;IncrementalCommon.expand.recompileAllFraction">recompileAllFraction</a> = <a href="#sbt.inc;IncrementalCommon.options" title="sbt.inc.IncOptions">options</a>.<a href="IncOptions.scala.html#sbt.inc;IncOptions.recompileAllFraction" title="=&gt; Double">recompileAllFraction</a>
    <span title="scala.collection.immutable.Set[java.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.expand.invalidated" title="Set[java.io.File]">invalidated</a>.<span title="=&gt; Int">size</span> <span title="(x: Double)Boolean">&gt;</span> <a href="#sbt.inc;IncrementalCommon.expand.all" title="Set[java.io.File]">all</a>.<span title="=&gt; Int">size</span> <span title="(x: Double)Double">*</span> <a href="#sbt.inc;IncrementalCommon.expand.recompileAllFraction" title="Double">recompileAllFraction</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Recompiling all &quot;)" class="string">&quot;Recompiling all &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.expand.all" title="Set[java.io.File]">all</a>.<span title="=&gt; Int">size</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; sources: invalidated sources (&quot;)" class="string">&quot; sources: invalidated sources (&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.expand.invalidated" title="Set[java.io.File]">invalidated</a>.<span title="=&gt; Int">size</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;) exceeded &quot;)" class="string">&quot;) exceeded &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.expand.recompileAllFraction" title="Double">recompileAllFraction</a> <span title="(x: Double)Double">*</span> <span title="Double(100.0)" class="double">100.0</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;% of all sources&quot;)" class="string">&quot;% of all sources&quot;</span><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.expand.all" title="Set[java.io.File]">all</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.expand.invalidated" title="Set[java.io.File]">invalidated</a> <span class="comment">// need the union because all doesn't contain removed sources</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#sbt.inc;IncrementalCommon.expand.invalidated" title="Set[java.io.File]">invalidated</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(invalidated: Set[java.io.File], relations: sbt.inc.Relations, apis: sbt.inc.APIs)Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidatedPackageObjects">invalidatedPackageObjects</a><span class="delimiter">(</span><a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidatedPackageObjects.invalidated">invalidated</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidatedPackageObjects.relations">relations</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.APIs" id="sbt.inc;IncrementalCommon.invalidatedPackageObjects.apis">apis</a>: <a href="APIs.scala.html#sbt.inc;APIs" title="sbt.inc.APIs">APIs</a><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>

  <span class="comment">/**
   * Logs API changes using debug-level logging. The API are obtained using the APIDiff class.
   *
   * NOTE: This method creates a new APIDiff instance on every invocation.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](apiChanges: Iterable[sbt.inc.APIChange[T]], oldAPIMapping: T =&gt; xsbti.api.Source, newAPIMapping: T =&gt; xsbti.api.Source)Unit" id="sbt.inc;IncrementalCommon.logApiChanges">logApiChanges</a><span class="delimiter">[</span><a title="" id="sbt.inc;IncrementalCommon.logApiChanges;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[sbt.inc.APIChange[T]]" id="sbt.inc;IncrementalCommon.logApiChanges.apiChanges">apiChanges</a>: <span title="Iterable[sbt.inc.APIChange[T]]">Iterable</span><span class="delimiter">[</span>APIChange<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="T =&gt; xsbti.api.Source" id="sbt.inc;IncrementalCommon.logApiChanges.oldAPIMapping">oldAPIMapping</a>: T =&gt; Source,
    <a title="T =&gt; xsbti.api.Source" id="sbt.inc;IncrementalCommon.logApiChanges.newAPIMapping">newAPIMapping</a>: T =&gt; Source<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="sbt.inc;IncrementalCommon.logApiChanges.contextSize">contextSize</a> = <a href="#sbt.inc;IncrementalCommon.options" title="sbt.inc.IncOptions">options</a>.<a href="IncOptions.scala.html#sbt.inc;IncOptions.apiDiffContextSize" title="=&gt; Int">apiDiffContextSize</a>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="sbt.inc.Incremental.PrefixingLogger" id="sbt.inc;IncrementalCommon.logApiChanges.wrappedLog">wrappedLog</a> = <span title="sbt.inc.Incremental.PrefixingLogger" class="keyword">new</span> <a href="Incremental.scala.html#sbt.inc.Incremental" title="sbt.inc.Incremental.type">Incremental</a>.<a href="Incremental.scala.html#sbt.inc.Incremental;PrefixingLogger" title="sbt.inc.Incremental.PrefixingLogger">PrefixingLogger</a><span class="delimiter">(</span><span title="String(&quot;[diff] &quot;)" class="string">&quot;[diff] &quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="sbt.inc.APIDiff" id="sbt.inc;IncrementalCommon.logApiChanges.apiDiff">apiDiff</a> = <span title="sbt.inc.APIDiff" class="keyword">new</span> <a href="APIDiff.scala.html#sbt.inc;APIDiff" title="sbt.inc.APIDiff">APIDiff</a>
      <a href="#sbt.inc;IncrementalCommon.logApiChanges.apiChanges" title="Iterable[sbt.inc.APIChange[T]]">apiChanges</a> <span title="(f: sbt.inc.APIChange[T] =&gt; Unit)Unit">foreach</span> <a href="#sbt.inc;IncrementalCommon.logApiChanges.$anonfun.x0$1" title="Unit" class="delimiter">{</a>
        <span class="keyword">case</span> APIChangeDueToMacroDefinition<span class="delimiter">(</span><span title="T">src</span><span class="delimiter">)</span> =&gt;
          <a href="#sbt.inc;IncrementalCommon.logApiChanges.wrappedLog" title="sbt.inc.Incremental.PrefixingLogger">wrappedLog</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Public API is considered to be changed because &quot;)">Public API is considered to be changed because $</span><span title="T">src</span><span title="String(&quot; contains a macro definition.&quot;)" class="string"> contains a macro definition.&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="sbt.inc.APIChange[T]" id="sbt.inc;IncrementalCommon.logApiChanges.$anonfun.apiChange">apiChange</a> @ <span class="delimiter">(</span>_: <a href="Changes.scala.html#sbt.inc;SourceAPIChange" title="sbt.inc.SourceAPIChange[T]">SourceAPIChange</a><span class="delimiter">[</span>T<span class="delimiter">]</span> | _: <a href="Changes.scala.html#sbt.inc;NamesChange" title="sbt.inc.NamesChange[T]">NamesChange</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <span title="T">src</span> = <a href="#sbt.inc;IncrementalCommon.logApiChanges.$anonfun.apiChange" title="sbt.inc.APIChange[T]">apiChange</a>.<a href="Changes.scala.html#sbt.inc;APIChange.modified" title="=&gt; T">modified</a>
          <span class="keyword">val</span> <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.logApiChanges.$anonfun.oldApi">oldApi</a> = <a href="#sbt.inc;IncrementalCommon.logApiChanges.oldAPIMapping" title="(v1: T)xsbti.api.Source">oldAPIMapping</a><span class="delimiter">(</span><span title="T">src</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.logApiChanges.$anonfun.newApi">newApi</a> = <a href="#sbt.inc;IncrementalCommon.logApiChanges.newAPIMapping" title="(v1: T)xsbti.api.Source">newAPIMapping</a><span class="delimiter">(</span><span title="T">src</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="String" id="sbt.inc;IncrementalCommon.logApiChanges.$anonfun.apiUnifiedPatch">apiUnifiedPatch</a> = <a href="#sbt.inc;IncrementalCommon.logApiChanges.apiDiff" title="sbt.inc.APIDiff">apiDiff</a>.<a href="APIDiff.scala.html#sbt.inc;APIDiff.generateApiDiff(2677ecc8ce)" title="(fileName: String, api1: xsbti.api.SourceAPI, api2: xsbti.api.SourceAPI, contextSize: Int)String">generateApiDiff</a><span class="delimiter">(</span><span title="T">src</span>.<span title="()String">toString</span>, <a href="#sbt.inc;IncrementalCommon.logApiChanges.$anonfun.oldApi" title="xsbti.api.Source">oldApi</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.api(3177bd1769)" title="()xsbti.api.SourceAPI">api</a>, <a href="#sbt.inc;IncrementalCommon.logApiChanges.$anonfun.newApi" title="xsbti.api.Source">newApi</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.api(3177bd1769)" title="()xsbti.api.SourceAPI">api</a>, <a href="#sbt.inc;IncrementalCommon.logApiChanges.contextSize" title="Int">contextSize</a><span class="delimiter">)</span>
          <a href="#sbt.inc;IncrementalCommon.logApiChanges.wrappedLog" title="sbt.inc.Incremental.PrefixingLogger">wrappedLog</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Detected a change in a public API (&quot;)">Detected a change in a public API ($</span><span title="T">src</span><span title="String(&quot;):\\n&quot;)">):\n$</span><a href="#sbt.inc;IncrementalCommon.logApiChanges.$anonfun.apiUnifiedPatch" title="String">apiUnifiedPatch</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="ClassNotFoundException">e</span>: <span title="ClassNotFoundException">ClassNotFoundException</span> =&gt;
        <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.error(83d3728a3c)" title="(message: =&gt; String)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;You have api debugging enabled but DiffUtils library cannot be found on sbt\'s classpath&quot;)" class="string">&quot;You have api debugging enabled but DiffUtils library cannot be found on sbt's classpath&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="LinkageError">e</span>: <span title="LinkageError">LinkageError</span> =&gt;
        <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.error(83d3728a3c)" title="(message: =&gt; String)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;Encountered linkage error while trying to load DiffUtils library.&quot;)" class="string">&quot;Encountered linkage error while trying to load DiffUtils library.&quot;</span><span class="delimiter">)</span>
        <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.trace(5f37c81d43)" title="(t: =&gt; Throwable)Unit">trace</a><span class="delimiter">(</span><span title="LinkageError">e</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Exception">e</span>: <span title="Exception">Exception</span> =&gt;
        <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.error(83d3728a3c)" title="(message: =&gt; String)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;An exception has been thrown while trying to dump an api diff.&quot;)" class="string">&quot;An exception has been thrown while trying to dump an api diff.&quot;</span><span class="delimiter">)</span>
        <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.trace(5f37c81d43)" title="(t: =&gt; Throwable)Unit">trace</a><span class="delimiter">(</span><span title="Exception">e</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Accepts the sources that were recompiled during the last step and functions
   * providing the API before and after the last step.  The functions should return
   * an empty API if the file did not/does not exist.
   */</span>
  <span class="keyword">def</span> <a title="[T](lastSources: scala.collection.Set[T], oldAPI: T =&gt; xsbti.api.Source, newAPI: T =&gt; xsbti.api.Source)sbt.inc.APIChanges[T]" id="sbt.inc;IncrementalCommon.changedIncremental">changedIncremental</a><span class="delimiter">[</span><a title="" id="sbt.inc;IncrementalCommon.changedIncremental;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.collection.Set[T]" id="sbt.inc;IncrementalCommon.changedIncremental.lastSources">lastSources</a>: collection.<span title="scala.collection.Set[T]">Set</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="T =&gt; xsbti.api.Source" id="sbt.inc;IncrementalCommon.changedIncremental.oldAPI">oldAPI</a>: T =&gt; Source, <a title="T =&gt; xsbti.api.Source" id="sbt.inc;IncrementalCommon.changedIncremental.newAPI">newAPI</a>: T =&gt; Source<span class="delimiter">)</span>: <a href="Changes.scala.html#sbt.inc;APIChanges" title="sbt.inc.APIChanges[T]">APIChanges</a><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Seq[xsbti.api.Source]" id="sbt.inc;IncrementalCommon.changedIncremental.oldApis">oldApis</a> = <a href="#sbt.inc;IncrementalCommon.changedIncremental.lastSources" title="scala.collection.Set[T]">lastSources</a>.<span title="=&gt; Seq[T]">toSeq</span> <span title="(f: T =&gt; xsbti.api.Source)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],xsbti.api.Source,Seq[xsbti.api.Source]])Seq[xsbti.api.Source]">map</span> <a href="#sbt.inc;IncrementalCommon.changedIncremental.oldAPI" title="T =&gt; xsbti.api.Source">oldAPI</a>
      <span class="keyword">val</span> <a title="Seq[xsbti.api.Source]" id="sbt.inc;IncrementalCommon.changedIncremental.newApis">newApis</a> = <a href="#sbt.inc;IncrementalCommon.changedIncremental.lastSources" title="scala.collection.Set[T]">lastSources</a>.<span title="=&gt; Seq[T]">toSeq</span> <span title="(f: T =&gt; xsbti.api.Source)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],xsbti.api.Source,Seq[xsbti.api.Source]])Seq[xsbti.api.Source]">map</span> <a href="#sbt.inc;IncrementalCommon.changedIncremental.newAPI" title="T =&gt; xsbti.api.Source">newAPI</a>
      <span class="keyword">val</span> <a title="scala.collection.Set[sbt.inc.APIChange[T]]" id="sbt.inc;IncrementalCommon.changedIncremental.apiChanges">apiChanges</a> = <span title="(x: (scala.collection.Set[T], Seq[xsbti.api.Source], Seq[xsbti.api.Source]))runtime.Tuple3Zipped.Ops[scala.collection.Set[T],Seq[xsbti.api.Source],Seq[xsbti.api.Source]]" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedIncremental.lastSources" title="scala.collection.Set[T]">lastSources</a>, <a href="#sbt.inc;IncrementalCommon.changedIncremental.oldApis" title="Seq[xsbti.api.Source]">oldApis</a>, <a href="#sbt.inc;IncrementalCommon.changedIncremental.newApis" title="Seq[xsbti.api.Source]">newApis</a><span class="delimiter">)</span>.<span title="(implicit w1: scala.collection.Set[T] =&gt; scala.collection.TraversableLike[T,scala.collection.Set[T]], implicit w2: Seq[xsbti.api.Source] =&gt; scala.collection.IterableLike[xsbti.api.Source,Seq[xsbti.api.Source]], implicit w3: Seq[xsbti.api.Source] =&gt; scala.collection.IterableLike[xsbti.api.Source,Seq[xsbti.api.Source]])scala.runtime.Tuple3Zipped[T,scala.collection.Set[T],xsbti.api.Source,Seq[xsbti.api.Source],xsbti.api.Source,Seq[xsbti.api.Source]]">zipped</span>.<span title="(f: (T, xsbti.api.Source, xsbti.api.Source) =&gt; TraversableOnce[sbt.inc.APIChange[T]])(implicit cbf: scala.collection.generic.CanBuildFrom[scala.collection.Set[T],sbt.inc.APIChange[T],scala.collection.Set[sbt.inc.APIChange[T]]])scala.collection.Set[sbt.inc.APIChange[T]]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Set.Coll,sbt.inc.APIChange[T],scala.collection.Set[sbt.inc.APIChange[T]]]" class="delimiter">{</span> <span class="delimiter">(</span><a title="T" id="sbt.inc;IncrementalCommon.changedIncremental.apiChanges.$anonfun.src">src</a>, <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.changedIncremental.apiChanges.$anonfun.oldApi">oldApi</a>, <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.changedIncremental.apiChanges.$anonfun.newApi">newApi</a><span class="delimiter">)</span> =&gt; <a href="#sbt.inc;IncrementalCommon.sameSource" title="(src: T, a: xsbti.api.Source, b: xsbti.api.Source)Option[sbt.inc.APIChange[T]]">sameSource</a><span title="(xo: Option[sbt.inc.APIChange[T]])Iterable[sbt.inc.APIChange[T]]" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedIncremental.apiChanges.$anonfun.src" title="T">src</a>, <a href="#sbt.inc;IncrementalCommon.changedIncremental.apiChanges.$anonfun.oldApi" title="xsbti.api.Source">oldApi</a>, <a href="#sbt.inc;IncrementalCommon.changedIncremental.apiChanges.$anonfun.newApi" title="xsbti.api.Source">newApi</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="Incremental.scala.html#sbt.inc.Incremental" title="sbt.inc.Incremental.type">Incremental</a>.<a href="Incremental.scala.html#sbt.inc.Incremental.apiDebug" title="(options: sbt.inc.IncOptions)Boolean">apiDebug</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.options" title="sbt.inc.IncOptions">options</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#sbt.inc;IncrementalCommon.changedIncremental.apiChanges" title="scala.collection.Set[sbt.inc.APIChange[T]]">apiChanges</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#sbt.inc;IncrementalCommon.logApiChanges" title="(apiChanges: Iterable[sbt.inc.APIChange[T]], oldAPIMapping: T =&gt; xsbti.api.Source, newAPIMapping: T =&gt; xsbti.api.Source)Unit">logApiChanges</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedIncremental.apiChanges" title="scala.collection.Set[sbt.inc.APIChange[T]]">apiChanges</a>, <a href="#sbt.inc;IncrementalCommon.changedIncremental.oldAPI" title="T =&gt; xsbti.api.Source">oldAPI</a>, <a href="#sbt.inc;IncrementalCommon.changedIncremental.newAPI" title="T =&gt; xsbti.api.Source">newAPI</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="sbt.inc.APIChanges[T]" class="keyword">new</span> <a href="Changes.scala.html#sbt.inc;APIChanges" title="sbt.inc.APIChanges[T]">APIChanges</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedIncremental.apiChanges" title="scala.collection.Set[sbt.inc.APIChange[T]]">apiChanges</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](src: T, a: xsbti.api.Source, b: xsbti.api.Source)Option[sbt.inc.APIChange[T]]" id="sbt.inc;IncrementalCommon.sameSource">sameSource</a><span class="delimiter">[</span><a title="" id="sbt.inc;IncrementalCommon.sameSource;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="sbt.inc;IncrementalCommon.sameSource.src">src</a>: <a href="#sbt.inc;IncrementalCommon.sameSource;T" title="T">T</a>, <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.sameSource.a">a</a>: <a href="../../xsbti/api/Source.java.html#xsbti.api;Source" title="xsbti.api.Source">Source</a>, <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.sameSource.b">b</a>: <a href="../../xsbti/api/Source.java.html#xsbti.api;Source" title="xsbti.api.Source">Source</a><span class="delimiter">)</span>: <span title="Option[sbt.inc.APIChange[T]]">Option</span><span class="delimiter">[</span>APIChange<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="comment">// Clients of a modified source file (ie, one that doesn't satisfy `shortcutSameSource`) containing macros must be recompiled.</span>
    <span class="keyword">val</span> <a title="Boolean" id="sbt.inc;IncrementalCommon.sameSource.hasMacro">hasMacro</a> = <a href="#sbt.inc;IncrementalCommon.sameSource.a" title="xsbti.api.Source">a</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.hasMacro(f32ef3bcdd)" title="()Boolean">hasMacro</a> <span title="(x: Boolean)Boolean">||</span> <a href="#sbt.inc;IncrementalCommon.sameSource.b" title="xsbti.api.Source">b</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.hasMacro(f32ef3bcdd)" title="()Boolean">hasMacro</a>
    <span title="Option[sbt.inc.APIChange[T]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.shortcutSameSource" title="(a: xsbti.api.Source, b: xsbti.api.Source)Boolean">shortcutSameSource</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.sameSource.a" title="xsbti.api.Source">a</a>, <a href="#sbt.inc;IncrementalCommon.sameSource.b" title="xsbti.api.Source">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="None.type">None</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span title="Option[sbt.inc.APIChange[T]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.sameSource.hasMacro" title="Boolean">hasMacro</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#sbt.inc;IncrementalCommon.options" title="sbt.inc.IncOptions">options</a>.<a href="IncOptions.scala.html#sbt.inc;IncOptions.recompileOnMacroDef" title="=&gt; Boolean">recompileOnMacroDef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="(x: sbt.inc.APIChangeDueToMacroDefinition[T])Some[sbt.inc.APIChangeDueToMacroDefinition[T]]">Some</span><span class="delimiter">(</span><a href="Changes.scala.html#sbt.inc;APIChangeDueToMacroDefinition" title="(modified0: T)sbt.inc.APIChangeDueToMacroDefinition[T]">APIChangeDueToMacroDefinition</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.sameSource.src" title="T">src</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#sbt.inc;IncrementalCommon.sameAPI" title="(src: T, a: xsbti.api.Source, b: xsbti.api.Source)Option[sbt.inc.APIChange[T]]">sameAPI</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.sameSource.src" title="T">src</a>, <a href="#sbt.inc;IncrementalCommon.sameSource.a" title="xsbti.api.Source">a</a>, <a href="#sbt.inc;IncrementalCommon.sameSource.b" title="xsbti.api.Source">b</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](src: T, a: xsbti.api.Source, b: xsbti.api.Source)Option[sbt.inc.APIChange[T]]" id="sbt.inc;IncrementalCommon.sameAPI">sameAPI</a><span class="delimiter">[</span><a title="" id="sbt.inc;IncrementalCommon.sameAPI;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="T" id="sbt.inc;IncrementalCommon.sameAPI.src">src</a>: <a href="#sbt.inc;IncrementalCommon.sameAPI;T" title="T">T</a>, <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.sameAPI.a">a</a>: <a href="../../xsbti/api/Source.java.html#xsbti.api;Source" title="xsbti.api.Source">Source</a>, <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.sameAPI.b">b</a>: <a href="../../xsbti/api/Source.java.html#xsbti.api;Source" title="xsbti.api.Source">Source</a><span class="delimiter">)</span>: <span title="Option[sbt.inc.APIChange[T]]">Option</span><span class="delimiter">[</span>APIChange<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(a: xsbti.api.Source, b: xsbti.api.Source)Boolean" id="sbt.inc;IncrementalCommon.shortcutSameSource">shortcutSameSource</a><span class="delimiter">(</span><a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.shortcutSameSource.a">a</a>: <a href="../../xsbti/api/Source.java.html#xsbti.api;Source" title="xsbti.api.Source">Source</a>, <a title="xsbti.api.Source" id="sbt.inc;IncrementalCommon.shortcutSameSource.b">b</a>: <a href="../../xsbti/api/Source.java.html#xsbti.api;Source" title="xsbti.api.Source">Source</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#sbt.inc;IncrementalCommon.shortcutSameSource.a" title="xsbti.api.Source">a</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.hash(42d8891cb1)" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">hash</a>.<span title="=&gt; Boolean">nonEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#sbt.inc;IncrementalCommon.shortcutSameSource.b" title="xsbti.api.Source">b</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.hash(42d8891cb1)" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">hash</a>.<span title="=&gt; Boolean">nonEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#sbt.inc;IncrementalCommon.sameCompilation" title="(a: xsbti.api.Compilation, b: xsbti.api.Compilation)Boolean">sameCompilation</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.shortcutSameSource.a" title="xsbti.api.Source">a</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.compilation(8aa5067639)" title="()xsbti.api.Compilation">compilation</a>, <a href="#sbt.inc;IncrementalCommon.shortcutSameSource.b" title="xsbti.api.Source">b</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.compilation(8aa5067639)" title="()xsbti.api.Compilation">compilation</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.shortcutSameSource.a" title="xsbti.api.Source">a</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.hash(42d8891cb1)" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">hash</a>.<span title="=&gt; IndexedSeq[Any]">deep</span> <span title="(that: Any)Boolean">equals</span> <a href="#sbt.inc;IncrementalCommon.shortcutSameSource.b" title="xsbti.api.Source">b</a>.<a href="../../xsbti/api/Source.java.html#xsbti.api;Source.hash(42d8891cb1)" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">hash</a>.<span title="=&gt; IndexedSeq[Any]">deep</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(a: xsbti.api.Compilation, b: xsbti.api.Compilation)Boolean" id="sbt.inc;IncrementalCommon.sameCompilation">sameCompilation</a><span class="delimiter">(</span><a title="xsbti.api.Compilation" id="sbt.inc;IncrementalCommon.sameCompilation.a">a</a>: <a href="../../xsbti/api/Compilation.java.html#xsbti.api;Compilation" title="xsbti.api.Compilation">Compilation</a>, <a title="xsbti.api.Compilation" id="sbt.inc;IncrementalCommon.sameCompilation.b">b</a>: <a href="../../xsbti/api/Compilation.java.html#xsbti.api;Compilation" title="xsbti.api.Compilation">Compilation</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#sbt.inc;IncrementalCommon.sameCompilation.a" title="xsbti.api.Compilation">a</a>.<a href="../../xsbti/api/Compilation.java.html#xsbti.api;Compilation.startTime(8800fc39c7)" title="()Long">startTime</a> <span title="(x: Long)Boolean">==</span> <a href="#sbt.inc;IncrementalCommon.sameCompilation.b" title="xsbti.api.Compilation">b</a>.<a href="../../xsbti/api/Compilation.java.html#xsbti.api;Compilation.startTime(8800fc39c7)" title="()Long">startTime</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#sbt.inc;IncrementalCommon.sameCompilation.a" title="xsbti.api.Compilation">a</a>.<a href="../../xsbti/api/Compilation.java.html#xsbti.api;Compilation.outputs(5699f9a4c8)" title="(xs: Array[xsbti.api.OutputSetting])scala.collection.mutable.ArrayOps[xsbti.api.OutputSetting]">outputs</a>.<span title="(that: scala.collection.GenSeq[xsbti.api.OutputSetting])(p: (xsbti.api.OutputSetting, xsbti.api.OutputSetting) =&gt; Boolean)Boolean">corresponds</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.sameCompilation.b" title="xsbti.api.Compilation">b</a>.<a href="../../xsbti/api/Compilation.java.html#xsbti.api;Compilation.outputs(5699f9a4c8)" title="(xs: Array[xsbti.api.OutputSetting])scala.collection.mutable.WrappedArray[xsbti.api.OutputSetting]">outputs</a><span class="delimiter">)</span> <a href="#sbt.inc;IncrementalCommon.sameCompilation.$anonfun.x0$2" title="Boolean" class="delimiter">{</a>
    <span class="keyword">case</span> <span class="delimiter">(</span><a title="xsbti.api.OutputSetting" id="sbt.inc;IncrementalCommon.sameCompilation.$anonfun.co1">co1</a>, <a title="xsbti.api.OutputSetting" id="sbt.inc;IncrementalCommon.sameCompilation.$anonfun.co2">co2</a><span class="delimiter">)</span> =&gt; <a href="#sbt.inc;IncrementalCommon.sameCompilation.$anonfun.co1" title="xsbti.api.OutputSetting">co1</a>.<a href="../../xsbti/api/OutputSetting.java.html#xsbti.api;OutputSetting.sourceDirectory(612e557918)" title="()String">sourceDirectory</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#sbt.inc;IncrementalCommon.sameCompilation.$anonfun.co2" title="xsbti.api.OutputSetting">co2</a>.<a href="../../xsbti/api/OutputSetting.java.html#xsbti.api;OutputSetting.sourceDirectory(612e557918)" title="()String">sourceDirectory</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#sbt.inc;IncrementalCommon.sameCompilation.$anonfun.co1" title="xsbti.api.OutputSetting">co1</a>.<a href="../../xsbti/api/OutputSetting.java.html#xsbti.api;OutputSetting.outputDirectory(612e557918)" title="()String">outputDirectory</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#sbt.inc;IncrementalCommon.sameCompilation.$anonfun.co2" title="xsbti.api.OutputSetting">co2</a>.<a href="../../xsbti/api/OutputSetting.java.html#xsbti.api;OutputSetting.outputDirectory(612e557918)" title="()String">outputDirectory</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(entry: String =&gt; Option[java.io.File], sources: Set[java.io.File], previousAnalysis: sbt.inc.Analysis, current: sbt.inc.ReadStamps, forEntry: java.io.File =&gt; Option[sbt.inc.Analysis])(implicit equivS: Equiv[sbt.inc.Stamp])sbt.inc.InitialChanges" id="sbt.inc;IncrementalCommon.changedInitial">changedInitial</a><span class="delimiter">(</span><a title="String =&gt; Option[java.io.File]" id="sbt.inc;IncrementalCommon.changedInitial.entry">entry</a>: String =&gt; Option<span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.changedInitial.sources">sources</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.changedInitial.previousAnalysis">previousAnalysis</a>: <a href="Analysis.scala.html#sbt.inc;Analysis" title="sbt.inc.Analysis">Analysis</a>, <a title="sbt.inc.ReadStamps" id="sbt.inc;IncrementalCommon.changedInitial.current">current</a>: <a href="Stamp.scala.html#sbt.inc;ReadStamps" title="sbt.inc.ReadStamps">ReadStamps</a>,
    <a title="java.io.File =&gt; Option[sbt.inc.Analysis]" id="sbt.inc;IncrementalCommon.changedInitial.forEntry">forEntry</a>: File =&gt; Option<span class="delimiter">[</span>Analysis<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Equiv[sbt.inc.Stamp]" id="sbt.inc;IncrementalCommon.changedInitial.equivS">equivS</a>: <span title="Equiv[sbt.inc.Stamp]">Equiv</span><span class="delimiter">[</span>Stamp<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Changes.scala.html#sbt.inc;InitialChanges" title="sbt.inc.InitialChanges">InitialChanges</a> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="sbt.inc.Stamps" id="sbt.inc;IncrementalCommon.changedInitial.previous">previous</a> = <a href="#sbt.inc;IncrementalCommon.changedInitial.previousAnalysis" title="sbt.inc.Analysis">previousAnalysis</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.stamps" title="=&gt; sbt.inc.Stamps">stamps</a>
      <span class="keyword">val</span> <a title="sbt.inc.APIs" id="sbt.inc;IncrementalCommon.changedInitial.previousAPIs">previousAPIs</a> = <a href="#sbt.inc;IncrementalCommon.changedInitial.previousAnalysis" title="sbt.inc.Analysis">previousAnalysis</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.apis" title="=&gt; sbt.inc.APIs">apis</a>

      <span class="keyword">val</span> <a title="sbt.inc.Changes[java.io.File]" id="sbt.inc;IncrementalCommon.changedInitial.srcChanges">srcChanges</a> = <a href="#sbt.inc;IncrementalCommon.changes" title="(previous: Set[java.io.File], current: Set[java.io.File], existingModified: java.io.File =&gt; Boolean)sbt.inc.Changes[java.io.File]">changes</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.previous" title="sbt.inc.Stamps">previous</a>.<a href="Stamp.scala.html#sbt.inc;Stamps.allInternalSources" title="=&gt; scala.collection.Set[java.io.File]">allInternalSources</a>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span>, <a href="#sbt.inc;IncrementalCommon.changedInitial.sources" title="Set[java.io.File]">sources</a>, <a title="java.io.File" id="sbt.inc;IncrementalCommon.changedInitial.srcChanges.$anonfun.f">f</a> =&gt; <span title="=&gt; Boolean">!</span><a href="#sbt.inc;IncrementalCommon.changedInitial.equivS" title="Equiv[sbt.inc.Stamp]">equivS</a>.<span title="(x: sbt.inc.Stamp, y: sbt.inc.Stamp)Boolean">equiv</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.previous" title="sbt.inc.Stamps">previous</a>.<a href="Stamp.scala.html#sbt.inc;ReadStamps.internalSource" title="(src: java.io.File)sbt.inc.Stamp">internalSource</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.srcChanges.$anonfun.f" title="java.io.File">f</a><span class="delimiter">)</span>, <a href="#sbt.inc;IncrementalCommon.changedInitial.current" title="sbt.inc.ReadStamps">current</a>.<a href="Stamp.scala.html#sbt.inc;ReadStamps.internalSource" title="(src: java.io.File)sbt.inc.Stamp">internalSource</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.srcChanges.$anonfun.f" title="java.io.File">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.changedInitial.removedProducts">removedProducts</a> = <a href="#sbt.inc;IncrementalCommon.changedInitial.previous" title="sbt.inc.Stamps">previous</a>.<a href="Stamp.scala.html#sbt.inc;Stamps.allProducts" title="=&gt; scala.collection.Set[java.io.File]">allProducts</a>.<span title="(p: java.io.File =&gt; Boolean)scala.collection.Set[java.io.File]">filter</span><span class="delimiter">(</span><a title="java.io.File" id="sbt.inc;IncrementalCommon.changedInitial.removedProducts.$anonfun.p">p</a> =&gt; <span title="=&gt; Boolean">!</span><a href="#sbt.inc;IncrementalCommon.changedInitial.equivS" title="Equiv[sbt.inc.Stamp]">equivS</a>.<span title="(x: sbt.inc.Stamp, y: sbt.inc.Stamp)Boolean">equiv</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.previous" title="sbt.inc.Stamps">previous</a>.<a href="Stamp.scala.html#sbt.inc;ReadStamps.product" title="(prod: java.io.File)sbt.inc.Stamp">product</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.removedProducts.$anonfun.p" title="java.io.File">p</a><span class="delimiter">)</span>, <a href="#sbt.inc;IncrementalCommon.changedInitial.current" title="sbt.inc.ReadStamps">current</a>.<a href="Stamp.scala.html#sbt.inc;ReadStamps.product" title="(prod: java.io.File)sbt.inc.Stamp">product</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.removedProducts.$anonfun.p" title="java.io.File">p</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.changedInitial.binaryDepChanges">binaryDepChanges</a> = <a href="#sbt.inc;IncrementalCommon.changedInitial.previous" title="sbt.inc.Stamps">previous</a>.<a href="Stamp.scala.html#sbt.inc;Stamps.allBinaries" title="=&gt; scala.collection.Set[java.io.File]">allBinaries</a>.<span title="(p: java.io.File =&gt; Boolean)scala.collection.Set[java.io.File]">filter</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified" title="(entry: String =&gt; Option[java.io.File], analysis: java.io.File =&gt; Option[sbt.inc.Analysis], previous: sbt.inc.Stamps, current: sbt.inc.ReadStamps)(implicit equivS: Equiv[sbt.inc.Stamp])java.io.File =&gt; Boolean">externalBinaryModified</a><a href="#sbt.inc;IncrementalCommon.changedInitial.equivS" title="Equiv[sbt.inc.Stamp]" class="delimiter">(</a><a href="#sbt.inc;IncrementalCommon.changedInitial.entry" title="String =&gt; Option[java.io.File]">entry</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.forEntry" title="java.io.File =&gt; Option[sbt.inc.Analysis]">forEntry</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.previous" title="sbt.inc.Stamps">previous</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.current" title="sbt.inc.ReadStamps">current</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span>
      <span class="keyword">val</span> <a title="sbt.inc.APIChanges[String]" id="sbt.inc;IncrementalCommon.changedInitial.extChanges">extChanges</a> = <a href="#sbt.inc;IncrementalCommon.changedIncremental" title="(lastSources: scala.collection.Set[String], oldAPI: String =&gt; xsbti.api.Source, newAPI: String =&gt; xsbti.api.Source)sbt.inc.APIChanges[String]">changedIncremental</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.previousAPIs" title="sbt.inc.APIs">previousAPIs</a>.<a href="APIs.scala.html#sbt.inc;APIs.allExternals" title="=&gt; scala.collection.Set[String]">allExternals</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.previousAPIs" title="sbt.inc.APIs">previousAPIs</a>.<a href="APIs.scala.html#sbt.inc;APIs.externalAPI" title="(ext: String)xsbti.api.Source">externalAPI</a> _, <a href="#sbt.inc;IncrementalCommon.currentExternalAPI" title="(entry: String =&gt; Option[java.io.File], forEntry: java.io.File =&gt; Option[sbt.inc.Analysis])String =&gt; xsbti.api.Source">currentExternalAPI</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.entry" title="String =&gt; Option[java.io.File]">entry</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.forEntry" title="java.io.File =&gt; Option[sbt.inc.Analysis]">forEntry</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="Changes.scala.html#sbt.inc;InitialChanges" title="(internalSrc: sbt.inc.Changes[java.io.File], removedProducts: Set[java.io.File], binaryDeps: Set[java.io.File], external: sbt.inc.APIChanges[String])sbt.inc.InitialChanges">InitialChanges</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changedInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.removedProducts" title="scala.collection.immutable.Set[java.io.File]">removedProducts</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.binaryDepChanges" title="scala.collection.immutable.Set[java.io.File]">binaryDepChanges</a>, <a href="#sbt.inc;IncrementalCommon.changedInitial.extChanges" title="sbt.inc.APIChanges[String]">extChanges</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(previous: Set[java.io.File], current: Set[java.io.File], existingModified: java.io.File =&gt; Boolean)sbt.inc.Changes[java.io.File]" id="sbt.inc;IncrementalCommon.changes">changes</a><span class="delimiter">(</span><a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.changes.previous">previous</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.changes.current">current</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="java.io.File =&gt; Boolean" id="sbt.inc;IncrementalCommon.changes.existingModified">existingModified</a>: File =&gt; Boolean<span class="delimiter">)</span>: <a href="Changes.scala.html#sbt.inc;Changes" title="sbt.inc.Changes[java.io.File]">Changes</a><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <a href="#sbt.inc;IncrementalCommon.changes;$anon" title="sbt.inc.Changes[java.io.File]{}" class="keyword">new</a> <a title="anonymous class $anon extends AnyRef with sbt.inc.Changes[java.io.File]" id="sbt.inc;IncrementalCommon.changes;$anon">Changes</a><span class="delimiter">[</span>File<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.changes;$anon.inBoth">inBoth</a> = <a href="#sbt.inc;IncrementalCommon.changes.previous" title="Set[java.io.File]">previous</a> <span title="(that: scala.collection.GenSet[java.io.File])scala.collection.immutable.Set[java.io.File]">&amp;</span> <a href="#sbt.inc;IncrementalCommon.changes.current" title="Set[java.io.File]">current</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.changes;$anon.removed">removed</a> = <a href="#sbt.inc;IncrementalCommon.changes.previous" title="Set[java.io.File]">previous</a> <span title="(xs: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">--</span> <a href="#sbt.inc;IncrementalCommon.changes;$anon.inBoth" title="=&gt; scala.collection.immutable.Set[java.io.File]">inBoth</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.changes;$anon.added">added</a> = <a href="#sbt.inc;IncrementalCommon.changes.current" title="Set[java.io.File]">current</a> <span title="(xs: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">--</span> <a href="#sbt.inc;IncrementalCommon.changes;$anon.inBoth" title="=&gt; scala.collection.immutable.Set[java.io.File]">inBoth</a>
      <span class="keyword">val</span> <a href="#sbt.inc;IncrementalCommon.changes;$anon.changed" title="(scala.collection.immutable.Set[java.io.File], scala.collection.immutable.Set[java.io.File])" class="delimiter">(</a><a href="#sbt.inc;IncrementalCommon.changes;$anon.x$1" title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.changes;$anon.changed">changed</a>, <a href="#sbt.inc;IncrementalCommon.changes;$anon.x$1" title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.changes;$anon.unmodified">unmodified</a><span class="delimiter">)</span> = <a href="#sbt.inc;IncrementalCommon.changes;$anon.inBoth" title="=&gt; scala.collection.immutable.Set[java.io.File]">inBoth</a>.<span title="(p: java.io.File =&gt; Boolean)(scala.collection.immutable.Set[java.io.File], scala.collection.immutable.Set[java.io.File])">partition</span><span title="(scala.collection.immutable.Set[java.io.File], scala.collection.immutable.Set[java.io.File]) @unchecked" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.changes.existingModified" title="java.io.File =&gt; Boolean">existingModified</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(previous: sbt.inc.Relations, apis: sbt.inc.APIs, changes: sbt.inc.APIChanges[java.io.File], recompiledSources: Set[java.io.File], transitive: Boolean)Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental">invalidateIncremental</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateIncremental.previous">previous</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.APIs" id="sbt.inc;IncrementalCommon.invalidateIncremental.apis">apis</a>: <a href="APIs.scala.html#sbt.inc;APIs" title="sbt.inc.APIs">APIs</a>, <a title="sbt.inc.APIChanges[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental.changes">changes</a>: <a href="Changes.scala.html#sbt.inc;APIChanges" title="sbt.inc.APIChanges[java.io.File]">APIChanges</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental.recompiledSources">recompiledSources</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Boolean" id="sbt.inc;IncrementalCommon.invalidateIncremental.transitive">transitive</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.io.File =&gt; Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental.dependsOnSrc">dependsOnSrc</a> = <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.previous" title="sbt.inc.Relations">previous</a>.<a href="Relations.scala.html#sbt.inc;Relations.usesInternalSrc" title="(dep: java.io.File)Set[java.io.File]">usesInternalSrc</a> _
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental.propagated">propagated</a> =
        <span title="Set[java.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateIncremental.transitive" title="Boolean">transitive</a><span class="delimiter">)</span>
          <a href="#sbt.inc;IncrementalCommon.transitiveDependencies" title="(dependsOnSrc: java.io.File =&gt; Set[java.io.File], initial: Set[java.io.File])Set[java.io.File]">transitiveDependencies</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateIncremental.dependsOnSrc" title="java.io.File =&gt; Set[java.io.File]">dependsOnSrc</a>, <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.changes" title="sbt.inc.APIChanges[java.io.File]">changes</a>.<a href="Changes.scala.html#sbt.inc;APIChanges.allModified" title="=&gt; Iterable[java.io.File]">allModified</a>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="#sbt.inc;IncrementalCommon.invalidateIntermediate" title="(relations: sbt.inc.Relations, changes: sbt.inc.APIChanges[java.io.File])Set[java.io.File]">invalidateIntermediate</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateIncremental.previous" title="sbt.inc.Relations">previous</a>, <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.changes" title="sbt.inc.APIChanges[java.io.File]">changes</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental.dups">dups</a> = <a href="#sbt.inc;IncrementalCommon.invalidateDuplicates" title="(merged: sbt.inc.Relations)Set[java.io.File]">invalidateDuplicates</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateIncremental.previous" title="sbt.inc.Relations">previous</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateIncremental.dups" title="Set[java.io.File]">dups</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span>
        <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Invalidated due to generated class file collision: &quot;)" class="string">&quot;Invalidated due to generated class file collision: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.dups" title="Set[java.io.File]">dups</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental.inv">inv</a> = <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.propagated" title="Set[java.io.File]">propagated</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.dups" title="Set[java.io.File]">dups</a> <span class="comment">// ++ scopeInvalidations(previous.extAPI _, changes.modified, changes.names)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIncremental.newlyInvalidated">newlyInvalidated</a> = <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.inv" title="scala.collection.immutable.Set[java.io.File]">inv</a> <span title="(xs: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">--</span> <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.recompiledSources" title="Set[java.io.File]">recompiledSources</a>
      <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;All newly invalidated sources after taking into account (previously) recompiled sources:&quot;)" class="string">&quot;All newly invalidated sources after taking into account (previously) recompiled sources:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.newlyInvalidated" title="scala.collection.immutable.Set[java.io.File]">newlyInvalidated</a><span class="delimiter">)</span>
      <span title="scala.collection.immutable.Set[java.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateIncremental.newlyInvalidated" title="scala.collection.immutable.Set[java.io.File]">newlyInvalidated</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span title="=&gt; scala.collection.immutable.Set.type">Set</span>.<span title="scala.collection.immutable.Set[java.io.File]">empty</span> <span class="keyword">else</span> <a href="#sbt.inc;IncrementalCommon.invalidateIncremental.inv" title="scala.collection.immutable.Set[java.io.File]">inv</a>
    <span class="delimiter">}</span>

  <span class="comment">/** Invalidate all sources that claim to produce the same class file as another source file. */</span>
  <span class="keyword">def</span> <a title="(merged: sbt.inc.Relations)Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateDuplicates">invalidateDuplicates</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateDuplicates.merged">merged</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <a href="#sbt.inc;IncrementalCommon.invalidateDuplicates.merged" title="sbt.inc.Relations">merged</a>.<a href="Relations.scala.html#sbt.inc;Relations.srcProd" title="=&gt; sbt.Relation[java.io.File,java.io.File]">srcProd</a>.<a href="../Relation.scala.html#sbt;Relation.reverseMap" title="=&gt; Map[java.io.File,Set[java.io.File]]">reverseMap</a>.<span title="(f: ((java.io.File, Set[java.io.File])) =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[java.io.File,Set[java.io.File]],java.io.File,scala.collection.immutable.Iterable[java.io.File]])scala.collection.immutable.Iterable[java.io.File]">flatMap</span> <a href="#sbt.inc;IncrementalCommon.invalidateDuplicates.$anonfun.x0$3" title="&lt;root&gt; extends scala.collection.immutable.Iterable[java.io.File] with java.io.File with Int =&gt; Boolean" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a title="java.io.File" id="sbt.inc;IncrementalCommon.invalidateDuplicates.$anonfun.classFile">classFile</a>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateDuplicates.$anonfun.sources">sources</a><span class="delimiter">)</span> =&gt;
        <span title="&lt;root&gt; extends scala.collection.immutable.Iterable[java.io.File] with java.io.File with Int =&gt; Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateDuplicates.$anonfun.sources" title="Set[java.io.File]">sources</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#sbt.inc;IncrementalCommon.invalidateDuplicates.$anonfun.sources" title="Set[java.io.File]">sources</a> <span class="keyword">else</span> <span title="scala.collection.immutable.Nil.type">Nil</span>
    <span class="delimiter">}</span> <span title="scala.collection.immutable.Set[java.io.File]">toSet</span>;

  <span class="comment">/**
   * Returns the transitive source dependencies of `initial`.
   * Because the intermediate steps do not pull in cycles, this result includes the initial files
   * if they are part of a cycle containing newly invalidated files .
   */</span>
  <span class="keyword">def</span> <a title="(dependsOnSrc: java.io.File =&gt; Set[java.io.File], initial: Set[java.io.File])Set[java.io.File]" id="sbt.inc;IncrementalCommon.transitiveDependencies">transitiveDependencies</a><span class="delimiter">(</span><a title="java.io.File =&gt; Set[java.io.File]" id="sbt.inc;IncrementalCommon.transitiveDependencies.dependsOnSrc">dependsOnSrc</a>: File =&gt; Set<span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.transitiveDependencies.initial">initial</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.transitiveDependencies.transitiveWithInitial">transitiveWithInitial</a> = <a href="#sbt.inc;IncrementalCommon.transitiveDeps" title="(nodes: Iterable[java.io.File])(dependencies: java.io.File =&gt; Iterable[java.io.File])Set[java.io.File]">transitiveDeps</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDependencies.initial" title="Set[java.io.File]">initial</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDependencies.dependsOnSrc" title="java.io.File =&gt; Set[java.io.File]">dependsOnSrc</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.transitiveDependencies.transitivePartial">transitivePartial</a> = <a href="#sbt.inc;IncrementalCommon.includeInitialCond" title="(initial: Set[java.io.File], currentInvalidations: Set[java.io.File], allDeps: java.io.File =&gt; Set[java.io.File])Set[java.io.File]">includeInitialCond</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDependencies.initial" title="Set[java.io.File]">initial</a>, <a href="#sbt.inc;IncrementalCommon.transitiveDependencies.transitiveWithInitial" title="Set[java.io.File]">transitiveWithInitial</a>, <a href="#sbt.inc;IncrementalCommon.transitiveDependencies.dependsOnSrc" title="java.io.File =&gt; Set[java.io.File]">dependsOnSrc</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Final step, transitive dependencies:\n\t&quot;)" class="string">&quot;Final step, transitive dependencies:\n\t&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.transitiveDependencies.transitivePartial" title="Set[java.io.File]">transitivePartial</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.transitiveDependencies.transitivePartial" title="Set[java.io.File]">transitivePartial</a>
    <span class="delimiter">}</span>

  <span class="comment">/** Invalidates sources based on initially detected 'changes' to the sources, products, and dependencies.*/</span>
  <span class="keyword">def</span> <a title="(previous: sbt.inc.Relations, changes: sbt.inc.InitialChanges)Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateInitial">invalidateInitial</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateInitial.previous">previous</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.InitialChanges" id="sbt.inc;IncrementalCommon.invalidateInitial.changes">changes</a>: <a href="Changes.scala.html#sbt.inc;InitialChanges" title="sbt.inc.InitialChanges">InitialChanges</a><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="sbt.inc.Changes[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateInitial.srcChanges">srcChanges</a> = <a href="#sbt.inc;IncrementalCommon.invalidateInitial.changes" title="sbt.inc.InitialChanges">changes</a>.<a href="Changes.scala.html#sbt.inc;InitialChanges.internalSrc" title="=&gt; sbt.inc.Changes[java.io.File]">internalSrc</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateInitial.srcDirect">srcDirect</a> = <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.removed" title="=&gt; Set[java.io.File]">removed</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.removed" title="=&gt; Set[java.io.File]">removed</a>.<span title="(f: java.io.File =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[java.io.File],java.io.File,scala.collection.immutable.Set[java.io.File]])scala.collection.immutable.Set[java.io.File]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,java.io.File,scala.collection.immutable.Set[java.io.File]]" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateInitial.previous" title="sbt.inc.Relations">previous</a>.<a href="Relations.scala.html#sbt.inc;Relations.usesInternalSrc" title="(dep: java.io.File)Set[java.io.File]">usesInternalSrc</a><span class="delimiter">)</span> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.added" title="=&gt; Set[java.io.File]">added</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.changed" title="=&gt; Set[java.io.File]">changed</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateInitial.byProduct">byProduct</a> = <a href="#sbt.inc;IncrementalCommon.invalidateInitial.changes" title="sbt.inc.InitialChanges">changes</a>.<a href="Changes.scala.html#sbt.inc;InitialChanges.removedProducts" title="=&gt; Set[java.io.File]">removedProducts</a>.<span title="(f: java.io.File =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[java.io.File],java.io.File,scala.collection.immutable.Set[java.io.File]])scala.collection.immutable.Set[java.io.File]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,java.io.File,scala.collection.immutable.Set[java.io.File]]" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateInitial.previous" title="sbt.inc.Relations">previous</a>.<a href="Relations.scala.html#sbt.inc;Relations.produced" title="(prod: java.io.File)Set[java.io.File]">produced</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateInitial.byBinaryDep">byBinaryDep</a> = <a href="#sbt.inc;IncrementalCommon.invalidateInitial.changes" title="sbt.inc.InitialChanges">changes</a>.<a href="Changes.scala.html#sbt.inc;InitialChanges.binaryDeps" title="=&gt; Set[java.io.File]">binaryDeps</a>.<span title="(f: java.io.File =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[java.io.File],java.io.File,scala.collection.immutable.Set[java.io.File]])scala.collection.immutable.Set[java.io.File]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,java.io.File,scala.collection.immutable.Set[java.io.File]]" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateInitial.previous" title="sbt.inc.Relations">previous</a>.<a href="Relations.scala.html#sbt.inc;Relations.usesBinary" title="(dep: java.io.File)Set[java.io.File]">usesBinary</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateInitial.byExtSrcDep">byExtSrcDep</a> = <a href="#sbt.inc;IncrementalCommon.invalidateByAllExternal" title="(relations: sbt.inc.Relations, externalAPIChanges: sbt.inc.APIChanges[String])Set[java.io.File]">invalidateByAllExternal</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateInitial.previous" title="sbt.inc.Relations">previous</a>, <a href="#sbt.inc;IncrementalCommon.invalidateInitial.changes" title="sbt.inc.InitialChanges">changes</a>.<a href="Changes.scala.html#sbt.inc;InitialChanges.external" title="=&gt; sbt.inc.APIChanges[String]">external</a><span class="delimiter">)</span> <span class="comment">//changes.external.modified.flatMap(previous.usesExternal) // ++ scopeInvalidations</span>
      <a href="#sbt.inc;IncrementalCommon.checkAbsolute" title="(addedSources: List[java.io.File])Unit">checkAbsolute</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.added" title="=&gt; Set[java.io.File]">added</a>.<span title="=&gt; List[java.io.File]">toList</span><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span>
        <span title="String(&quot;\nInitial source changes: \n\tremoved:&quot;)" class="string">&quot;\nInitial source changes: \n\tremoved:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.removed" title="=&gt; Set[java.io.File]">removed</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n\tadded: &quot;)" class="string">&quot;\n\tadded: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.added" title="=&gt; Set[java.io.File]">added</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n\tmodified: &quot;)" class="string">&quot;\n\tmodified: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcChanges" title="sbt.inc.Changes[java.io.File]">srcChanges</a>.<a href="Changes.scala.html#sbt.inc;Changes.changed" title="=&gt; Set[java.io.File]">changed</a> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\nInvalidated products: &quot;)" class="string">&quot;\nInvalidated products: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.changes" title="sbt.inc.InitialChanges">changes</a>.<a href="Changes.scala.html#sbt.inc;InitialChanges.removedProducts" title="=&gt; Set[java.io.File]">removedProducts</a> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\nExternal API changes: &quot;)" class="string">&quot;\nExternal API changes: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.changes" title="sbt.inc.InitialChanges">changes</a>.<a href="Changes.scala.html#sbt.inc;InitialChanges.external" title="=&gt; sbt.inc.APIChanges[String]">external</a> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\nModified binary dependencies: &quot;)" class="string">&quot;\nModified binary dependencies: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.changes" title="sbt.inc.InitialChanges">changes</a>.<a href="Changes.scala.html#sbt.inc;InitialChanges.binaryDeps" title="=&gt; Set[java.io.File]">binaryDeps</a> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\nInitial directly invalidated sources: &quot;)" class="string">&quot;\nInitial directly invalidated sources: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcDirect" title="scala.collection.immutable.Set[java.io.File]">srcDirect</a> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\n\nSources indirectly invalidated by:&quot;)" class="string">&quot;\n\nSources indirectly invalidated by:&quot;</span> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\n\tproduct: &quot;)" class="string">&quot;\n\tproduct: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.byProduct" title="scala.collection.immutable.Set[java.io.File]">byProduct</a> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\n\tbinary dep: &quot;)" class="string">&quot;\n\tbinary dep: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.byBinaryDep" title="scala.collection.immutable.Set[java.io.File]">byBinaryDep</a> <span title="(x$1: Any)String">+</span>
          <span title="String(&quot;\n\texternal source: &quot;)" class="string">&quot;\n\texternal source: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.byExtSrcDep" title="Set[java.io.File]">byExtSrcDep</a>
      <span class="delimiter">)</span>

      <a href="#sbt.inc;IncrementalCommon.invalidateInitial.srcDirect" title="scala.collection.immutable.Set[java.io.File]">srcDirect</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.byProduct" title="scala.collection.immutable.Set[java.io.File]">byProduct</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.byBinaryDep" title="scala.collection.immutable.Set[java.io.File]">byBinaryDep</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.invalidateInitial.byExtSrcDep" title="Set[java.io.File]">byExtSrcDep</a>
    <span class="delimiter">}</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(addedSources: List[java.io.File])Unit" id="sbt.inc;IncrementalCommon.checkAbsolute">checkAbsolute</a><span class="delimiter">(</span><a title="List[java.io.File]" id="sbt.inc;IncrementalCommon.checkAbsolute.addedSources">addedSources</a>: <span title="List[java.io.File]">List</span><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.checkAbsolute.addedSources" title="List[java.io.File]">addedSources</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#sbt.inc;IncrementalCommon.checkAbsolute.addedSources" title="List[java.io.File]">addedSources</a>.<span title="(p: java.io.File =&gt; Boolean)List[java.io.File]">filterNot</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.checkAbsolute.$anonfun.x$2" title="java.io.File">_</a>.<span title="()Boolean">isAbsolute</span><span class="delimiter">)</span> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a title="java.io.File" id="sbt.inc;IncrementalCommon.checkAbsolute.first">first</a> :: <a title="List[java.io.File]" id="sbt.inc;IncrementalCommon.checkAbsolute.more">more</a> =&gt;
          <span class="keyword">val</span> <a title="String" id="sbt.inc;IncrementalCommon.checkAbsolute.fileStrings">fileStrings</a> = <a href="#sbt.inc;IncrementalCommon.checkAbsolute.more" title="List[java.io.File]">more</a> <span title="String" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">Nil</span>      =&gt; <a href="#sbt.inc;IncrementalCommon.checkAbsolute.first" title="java.io.File">first</a>.<span title="()String">toString</span>
            <span class="keyword">case</span> <a title="java.io.File" id="sbt.inc;IncrementalCommon.checkAbsolute.fileStrings.x">x</a> :: <span title="scala.collection.immutable.Nil.type">Nil</span> =&gt; <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#sbt.inc;IncrementalCommon.checkAbsolute.first" title="java.io.File">first</a><span title="String(&quot; and &quot;)"> and $</span><a href="#sbt.inc;IncrementalCommon.checkAbsolute.fileStrings.x" title="java.io.File">x</a><span title="String(&quot;&quot;)" class="string">&quot;</span>
            <span class="keyword">case</span> _        =&gt; <span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;&quot;)">$</span><a href="#sbt.inc;IncrementalCommon.checkAbsolute.first" title="java.io.File">first</a><span title="String(&quot; and &quot;)"> and $</span><span class="delimiter">{</span><a href="#sbt.inc;IncrementalCommon.checkAbsolute.more" title="List[java.io.File]">more</a>.<span title="=&gt; Int">size</span><span class="delimiter">}</span><span title="String(&quot; others&quot;)" class="string"> others&quot;</span>
          <span class="delimiter">}</span>
          sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;The incremental compiler requires absolute sources, but some were relative: &quot;)">The incremental compiler requires absolute sources, but some were relative: $</span><a href="#sbt.inc;IncrementalCommon.checkAbsolute.fileStrings" title="String">fileStrings</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="scala.collection.immutable.Nil.type">Nil</span> =&gt;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(relations: sbt.inc.Relations, externalAPIChanges: sbt.inc.APIChanges[String])Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateByAllExternal">invalidateByAllExternal</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateByAllExternal.relations">relations</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.APIChanges[String]" id="sbt.inc;IncrementalCommon.invalidateByAllExternal.externalAPIChanges">externalAPIChanges</a>: <a href="Changes.scala.html#sbt.inc;APIChanges" title="sbt.inc.APIChanges[String]">APIChanges</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateByAllExternal.externalAPIChanges" title="sbt.inc.APIChanges[String]">externalAPIChanges</a>.<a href="Changes.scala.html#sbt.inc;APIChanges.apiChanges" title="=&gt; Iterable[sbt.inc.APIChange[String]]">apiChanges</a>.<span title="(f: sbt.inc.APIChange[String] =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[sbt.inc.APIChange[String]],java.io.File,Iterable[java.io.File]])Iterable[java.io.File]">flatMap</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Iterable.Coll,java.io.File,Iterable[java.io.File]]" class="delimiter">{</span> <a title="sbt.inc.APIChange[String]" id="sbt.inc;IncrementalCommon.invalidateByAllExternal.$anonfun.externalAPIChange">externalAPIChange</a> =&gt;
      <a href="#sbt.inc;IncrementalCommon.invalidateByExternal" title="(relations: sbt.inc.Relations, externalAPIChange: sbt.inc.APIChange[String])Set[java.io.File]">invalidateByExternal</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateByAllExternal.relations" title="sbt.inc.Relations">relations</a>, <a href="#sbt.inc;IncrementalCommon.invalidateByAllExternal.$anonfun.externalAPIChange" title="sbt.inc.APIChange[String]">externalAPIChange</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Sources invalidated by `external` sources in other projects according to the previous `relations`. */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(relations: sbt.inc.Relations, externalAPIChange: sbt.inc.APIChange[String])Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateByExternal">invalidateByExternal</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateByExternal.relations">relations</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.APIChange[String]" id="sbt.inc;IncrementalCommon.invalidateByExternal.externalAPIChange">externalAPIChange</a>: <a href="Changes.scala.html#sbt.inc;APIChange" title="sbt.inc.APIChange[String]">APIChange</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>

  <span class="comment">/** Intermediate invalidation step: steps after the initial invalidation, but before the final transitive invalidation. */</span>
  <span class="keyword">def</span> <a title="(relations: sbt.inc.Relations, changes: sbt.inc.APIChanges[java.io.File])Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIntermediate">invalidateIntermediate</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateIntermediate.relations">relations</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.APIChanges[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateIntermediate.changes">changes</a>: <a href="Changes.scala.html#sbt.inc;APIChanges" title="sbt.inc.APIChanges[java.io.File]">APIChanges</a><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <a href="#sbt.inc;IncrementalCommon.invalidateSources" title="(relations: sbt.inc.Relations, changes: sbt.inc.APIChanges[java.io.File])Set[java.io.File]">invalidateSources</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateIntermediate.relations" title="sbt.inc.Relations">relations</a>, <a href="#sbt.inc;IncrementalCommon.invalidateIntermediate.changes" title="sbt.inc.APIChanges[java.io.File]">changes</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="comment">/**
   * Invalidates inheritance dependencies, transitively.  Then, invalidates direct dependencies.  Finally, excludes initial dependencies not
   * included in a cycle with newly invalidated sources.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(relations: sbt.inc.Relations, changes: sbt.inc.APIChanges[java.io.File])Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateSources">invalidateSources</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateSources.relations">relations</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.APIChanges[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateSources.changes">changes</a>: <a href="Changes.scala.html#sbt.inc;APIChanges" title="sbt.inc.APIChanges[java.io.File]">APIChanges</a><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateSources.initial">initial</a> = <a href="#sbt.inc;IncrementalCommon.invalidateSources.changes" title="sbt.inc.APIChanges[java.io.File]">changes</a>.<a href="Changes.scala.html#sbt.inc;APIChanges.allModified" title="=&gt; Iterable[java.io.File]">allModified</a>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateSources.all">all</a> = <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateSources.changes" title="sbt.inc.APIChanges[java.io.File]">changes</a>.<a href="Changes.scala.html#sbt.inc;APIChanges.apiChanges" title="=&gt; Iterable[sbt.inc.APIChange[java.io.File]]">apiChanges</a> <span title="(f: sbt.inc.APIChange[java.io.File] =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[sbt.inc.APIChange[java.io.File]],java.io.File,Iterable[java.io.File]])Iterable[java.io.File]">flatMap</span> <span class="delimiter">{</span> <a title="sbt.inc.APIChange[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateSources.all.$anonfun.change">change</a> =&gt;
        <a href="#sbt.inc;IncrementalCommon.invalidateSource" title="(relations: sbt.inc.Relations, change: sbt.inc.APIChange[java.io.File])Set[java.io.File]">invalidateSource</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateSources.relations" title="sbt.inc.Relations">relations</a>, <a href="#sbt.inc;IncrementalCommon.invalidateSources.all.$anonfun.change" title="sbt.inc.APIChange[java.io.File]">change</a><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span>
      <a href="#sbt.inc;IncrementalCommon.includeInitialCond" title="(initial: Set[java.io.File], currentInvalidations: Set[java.io.File], allDeps: java.io.File =&gt; Set[java.io.File])Set[java.io.File]">includeInitialCond</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateSources.initial" title="scala.collection.immutable.Set[java.io.File]">initial</a>, <a href="#sbt.inc;IncrementalCommon.invalidateSources.all" title="scala.collection.immutable.Set[java.io.File]">all</a>, <a href="#sbt.inc;IncrementalCommon.allDeps" title="(relations: sbt.inc.Relations)java.io.File =&gt; Set[java.io.File]">allDeps</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.invalidateSources.relations" title="sbt.inc.Relations">relations</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(relations: sbt.inc.Relations)java.io.File =&gt; Set[java.io.File]" id="sbt.inc;IncrementalCommon.allDeps">allDeps</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.allDeps.relations">relations</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a><span class="delimiter">)</span>: File =&gt; Set<span class="delimiter">[</span>File<span class="delimiter">]</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(relations: sbt.inc.Relations, change: sbt.inc.APIChange[java.io.File])Set[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateSource">invalidateSource</a><span class="delimiter">(</span><a title="sbt.inc.Relations" id="sbt.inc;IncrementalCommon.invalidateSource.relations">relations</a>: <a href="Relations.scala.html#sbt.inc;Relations" title="sbt.inc.Relations">Relations</a>, <a title="sbt.inc.APIChange[java.io.File]" id="sbt.inc;IncrementalCommon.invalidateSource.change">change</a>: <a href="Changes.scala.html#sbt.inc;APIChange" title="sbt.inc.APIChange[java.io.File]">APIChange</a><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>

  <span class="comment">/**
   * Conditionally include initial sources that are dependencies of newly invalidated sources.
   * * Initial sources included in this step can be because of a cycle, but not always.
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(initial: Set[java.io.File], currentInvalidations: Set[java.io.File], allDeps: java.io.File =&gt; Set[java.io.File])Set[java.io.File]" id="sbt.inc;IncrementalCommon.includeInitialCond">includeInitialCond</a><span class="delimiter">(</span><a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.includeInitialCond.initial">initial</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.includeInitialCond.currentInvalidations">currentInvalidations</a>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="java.io.File =&gt; Set[java.io.File]" id="sbt.inc;IncrementalCommon.includeInitialCond.allDeps">allDeps</a>: File =&gt; Set<span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[java.io.File]">Set</span><span class="delimiter">[</span>File<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.includeInitialCond.newInv">newInv</a> = <a href="#sbt.inc;IncrementalCommon.includeInitialCond.currentInvalidations" title="Set[java.io.File]">currentInvalidations</a> <span title="(xs: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">--</span> <a href="#sbt.inc;IncrementalCommon.includeInitialCond.initial" title="Set[java.io.File]">initial</a>
      <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;New invalidations:\n\t&quot;)" class="string">&quot;New invalidations:\n\t&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.includeInitialCond.newInv" title="scala.collection.immutable.Set[java.io.File]">newInv</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Set[java.io.File]" id="sbt.inc;IncrementalCommon.includeInitialCond.transitiveOfNew">transitiveOfNew</a> = <a href="#sbt.inc;IncrementalCommon.transitiveDeps" title="(nodes: Iterable[java.io.File])(dependencies: java.io.File =&gt; Iterable[java.io.File])Set[java.io.File]">transitiveDeps</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.includeInitialCond.newInv" title="scala.collection.immutable.Set[java.io.File]">newInv</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.includeInitialCond.allDeps" title="java.io.File =&gt; Set[java.io.File]">allDeps</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[java.io.File]" id="sbt.inc;IncrementalCommon.includeInitialCond.initialDependsOnNew">initialDependsOnNew</a> = <a href="#sbt.inc;IncrementalCommon.includeInitialCond.transitiveOfNew" title="Set[java.io.File]">transitiveOfNew</a> <span title="(that: scala.collection.GenSet[java.io.File])scala.collection.immutable.Set[java.io.File]">&amp;</span> <a href="#sbt.inc;IncrementalCommon.includeInitialCond.initial" title="Set[java.io.File]">initial</a>
      <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Previously invalidated, but (transitively) depend on new invalidations:\n\t&quot;)" class="string">&quot;Previously invalidated, but (transitively) depend on new invalidations:\n\t&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.includeInitialCond.initialDependsOnNew" title="scala.collection.immutable.Set[java.io.File]">initialDependsOnNew</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.includeInitialCond.newInv" title="scala.collection.immutable.Set[java.io.File]">newInv</a> <span title="(elems: scala.collection.GenTraversableOnce[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#sbt.inc;IncrementalCommon.includeInitialCond.initialDependsOnNew" title="scala.collection.immutable.Set[java.io.File]">initialDependsOnNew</a>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(entry: String =&gt; Option[java.io.File], analysis: java.io.File =&gt; Option[sbt.inc.Analysis], previous: sbt.inc.Stamps, current: sbt.inc.ReadStamps)(implicit equivS: Equiv[sbt.inc.Stamp])java.io.File =&gt; Boolean" id="sbt.inc;IncrementalCommon.externalBinaryModified">externalBinaryModified</a><span class="delimiter">(</span><a title="String =&gt; Option[java.io.File]" id="sbt.inc;IncrementalCommon.externalBinaryModified.entry">entry</a>: String =&gt; Option<span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="java.io.File =&gt; Option[sbt.inc.Analysis]" id="sbt.inc;IncrementalCommon.externalBinaryModified.analysis">analysis</a>: File =&gt; Option<span class="delimiter">[</span>Analysis<span class="delimiter">]</span>, <a title="sbt.inc.Stamps" id="sbt.inc;IncrementalCommon.externalBinaryModified.previous">previous</a>: <a href="Stamp.scala.html#sbt.inc;Stamps" title="sbt.inc.Stamps">Stamps</a>, <a title="sbt.inc.ReadStamps" id="sbt.inc;IncrementalCommon.externalBinaryModified.current">current</a>: <a href="Stamp.scala.html#sbt.inc;ReadStamps" title="sbt.inc.ReadStamps">ReadStamps</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="Equiv[sbt.inc.Stamp]" id="sbt.inc;IncrementalCommon.externalBinaryModified.equivS">equivS</a>: <span title="Equiv[sbt.inc.Stamp]">Equiv</span><span class="delimiter">[</span>Stamp<span class="delimiter">]</span><span class="delimiter">)</span>: File =&gt; Boolean =
    <a title="java.io.File" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn">dependsOn</a> =&gt;
      <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="(reason: String)Boolean" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.inv">inv</a><span class="delimiter">(</span><a title="String" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.inv.reason">reason</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
          <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Invalidating &quot;)" class="string">&quot;Invalidating &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn" title="java.io.File">dependsOn</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.inv.reason" title="String">reason</a><span class="delimiter">)</span>
          <span title="Boolean(true)" class="keyword">true</span>
        <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="(className: String, classpathEntry: java.io.File)Boolean" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified">entryModified</a><span class="delimiter">(</span><a title="String" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.className">className</a>: <span title="String">String</span>, <a title="java.io.File" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.classpathEntry">classpathEntry</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="java.io.File" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.resolved">resolved</a> = <a href="Locate.scala.html#sbt.inc.Locate" title="sbt.inc.Locate.type">Locate</a>.<a href="Locate.scala.html#sbt.inc.Locate.resolve" title="(f: java.io.File, className: String)java.io.File">resolve</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.classpathEntry" title="java.io.File">classpathEntry</a>, <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.className" title="String">className</a><span class="delimiter">)</span>
            <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.resolved" title="java.io.File">resolved</a>.<span title="()String">getCanonicalPath</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn" title="java.io.File">dependsOn</a>.<span title="()String">getCanonicalPath</span><span class="delimiter">)</span>
              <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.inv" title="(reason: String)Boolean">inv</a><span class="delimiter">(</span><span title="String(&quot;class &quot;)" class="string">&quot;class &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.className" title="String">className</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; now provided by &quot;)" class="string">&quot; now provided by &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.resolved" title="java.io.File">resolved</a>.<span title="()String">getCanonicalPath</span><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified" title="(previousFile: java.io.File, currentFile: java.io.File)Boolean">fileModified</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn" title="java.io.File">dependsOn</a>, <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified.resolved" title="java.io.File">resolved</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="(previousFile: java.io.File, currentFile: java.io.File)Boolean" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified">fileModified</a><span class="delimiter">(</span><a title="java.io.File" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.previousFile">previousFile</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.currentFile">currentFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="sbt.inc.Stamp" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.previousStamp">previousStamp</a> = <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.previous" title="sbt.inc.Stamps">previous</a>.<a href="Stamp.scala.html#sbt.inc;ReadStamps.binary" title="(bin: java.io.File)sbt.inc.Stamp">binary</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.previousFile" title="java.io.File">previousFile</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="sbt.inc.Stamp" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.currentStamp">currentStamp</a> = <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.current" title="sbt.inc.ReadStamps">current</a>.<a href="Stamp.scala.html#sbt.inc;ReadStamps.binary" title="(bin: java.io.File)sbt.inc.Stamp">binary</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.currentFile" title="java.io.File">currentFile</a><span class="delimiter">)</span>
            <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.equivS" title="Equiv[sbt.inc.Stamp]">equivS</a>.<span title="(x: sbt.inc.Stamp, y: sbt.inc.Stamp)Boolean">equiv</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.previousStamp" title="sbt.inc.Stamp">previousStamp</a>, <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.currentStamp" title="sbt.inc.Stamp">currentStamp</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span title="Boolean(false)" class="keyword">false</span>
            <span class="keyword">else</span>
              <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.inv" title="(reason: String)Boolean">inv</a><span class="delimiter">(</span><span title="String(&quot;stamp changed from &quot;)" class="string">&quot;stamp changed from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.previousStamp" title="sbt.inc.Stamp">previousStamp</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified.currentStamp" title="sbt.inc.Stamp">currentStamp</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">def</span> <a title="(file: java.io.File)Boolean" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified">dependencyModified</a><span class="delimiter">(</span><a title="java.io.File" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.file">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
          <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.previous" title="sbt.inc.Stamps">previous</a>.<a href="Stamp.scala.html#sbt.inc;Stamps.className" title="(bin: java.io.File)Option[String]">className</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.file" title="java.io.File">file</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="None.type">None</span> =&gt; <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.inv" title="(reason: String)Boolean">inv</a><span class="delimiter">(</span><span title="String(&quot;no class name was mapped for it.&quot;)" class="string">&quot;no class name was mapped for it.&quot;</span><span class="delimiter">)</span>
            <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="String" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.name">name</a><span class="delimiter">)</span> =&gt; <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.entry" title="(v1: String)Option[java.io.File]">entry</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.name" title="String">name</a><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="None.type">None</span>    =&gt; <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.inv" title="(reason: String)Boolean">inv</a><span class="delimiter">(</span><span title="String(&quot;could not find class &quot;)" class="string">&quot;could not find class &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.name" title="String">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; on the classpath.&quot;)" class="string">&quot; on the classpath.&quot;</span><span class="delimiter">)</span>
              <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="java.io.File" id="sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.e">e</a><span class="delimiter">)</span> =&gt; <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.entryModified" title="(className: String, classpathEntry: java.io.File)Boolean">entryModified</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.name" title="String">name</a>, <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified.e" title="java.io.File">e</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

        <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.analysis" title="(v1: java.io.File)Option[sbt.inc.Analysis]">analysis</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn" title="java.io.File">dependsOn</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
          <span class="delimiter">(</span><span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.skipClasspathLookup" title="=&gt; Boolean">skipClasspathLookup</a><span class="delimiter">)</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.fileModified" title="(previousFile: java.io.File, currentFile: java.io.File)Boolean">fileModified</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn" title="java.io.File">dependsOn</a>, <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn" title="java.io.File">dependsOn</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependencyModified" title="(file: java.io.File)Boolean">dependencyModified</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.externalBinaryModified.$anonfun.dependsOn" title="java.io.File">dependsOn</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(entry: String =&gt; Option[java.io.File], forEntry: java.io.File =&gt; Option[sbt.inc.Analysis])String =&gt; xsbti.api.Source" id="sbt.inc;IncrementalCommon.currentExternalAPI">currentExternalAPI</a><span class="delimiter">(</span><a title="String =&gt; Option[java.io.File]" id="sbt.inc;IncrementalCommon.currentExternalAPI.entry">entry</a>: String =&gt; Option<span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="java.io.File =&gt; Option[sbt.inc.Analysis]" id="sbt.inc;IncrementalCommon.currentExternalAPI.forEntry">forEntry</a>: File =&gt; Option<span class="delimiter">[</span>Analysis<span class="delimiter">]</span><span class="delimiter">)</span>: String =&gt; Source =
    <a title="String" id="sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.className">className</a> =&gt;
      <a href="#sbt.inc;IncrementalCommon.orEmpty" title="(o: Option[xsbti.api.Source])xsbti.api.Source">orEmpty</a><span class="delimiter">(</span>
        <span class="keyword">for</span> <span class="delimiter">{</span>
          <a title="java.io.File" id="sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.$anonfun.e">e</a> &lt;- <a href="#sbt.inc;IncrementalCommon.currentExternalAPI.entry" title="(v1: String)Option[java.io.File]">entry</a><span title="(f: java.io.File =&gt; Option[xsbti.api.Source])Option[xsbti.api.Source]" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.className" title="String">className</a><span class="delimiter">)</span>
          <a title="sbt.inc.Analysis" id="sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.$anonfun.$anonfun.analysis">analysis</a> &lt;- <a href="#sbt.inc;IncrementalCommon.currentExternalAPI.forEntry" title="(v1: java.io.File)Option[sbt.inc.Analysis]">forEntry</a><span title="(f: sbt.inc.Analysis =&gt; Option[xsbti.api.Source])Option[xsbti.api.Source]" class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.$anonfun.e" title="java.io.File">e</a><span class="delimiter">)</span>
          <a title="java.io.File" id="sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.$anonfun.$anonfun.$anonfun.src">src</a> &lt;- <a href="#sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.$anonfun.$anonfun.analysis" title="sbt.inc.Analysis">analysis</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.relations" title="=&gt; sbt.inc.Relations">relations</a>.<a href="Relations.scala.html#sbt.inc;Relations.definesClass" title="(name: String)Set[java.io.File]">definesClass</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.className" title="String">className</a><span class="delimiter">)</span>.<span title="(f: java.io.File =&gt; xsbti.api.Source)Option[xsbti.api.Source]">headOption</span>
        <span class="delimiter">}</span> <span class="keyword">yield</span> <a href="#sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.$anonfun.$anonfun.analysis" title="sbt.inc.Analysis">analysis</a>.<a href="Analysis.scala.html#sbt.inc;Analysis.apis" title="=&gt; sbt.inc.APIs">apis</a>.<a href="APIs.scala.html#sbt.inc;APIs.internalAPI" title="(src: java.io.File)xsbti.api.Source">internalAPI</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.currentExternalAPI.$anonfun.$anonfun.$anonfun.$anonfun.src" title="java.io.File">src</a><span class="delimiter">)</span>
      <span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(o: Option[xsbti.api.Source])xsbti.api.Source" id="sbt.inc;IncrementalCommon.orEmpty">orEmpty</a><span class="delimiter">(</span><a title="Option[xsbti.api.Source]" id="sbt.inc;IncrementalCommon.orEmpty.o">o</a>: <span title="Option[xsbti.api.Source]">Option</span><span class="delimiter">[</span>Source<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../xsbti/api/Source.java.html#xsbti.api;Source" title="xsbti.api.Source">Source</a> = <a href="#sbt.inc;IncrementalCommon.orEmpty.o" title="Option[xsbti.api.Source]">o</a> <span title="(default: =&gt; xsbti.api.Source)xsbti.api.Source">getOrElse</span> <a href="APIs.scala.html#sbt.inc.APIs" title="sbt.inc.APIs.type">APIs</a>.<a href="APIs.scala.html#sbt.inc.APIs.emptySource" title="=&gt; xsbti.api.Source">emptySource</a>
  <span class="keyword">def</span> <a title="(o: Option[Boolean])Boolean" id="sbt.inc;IncrementalCommon.orTrue">orTrue</a><span class="delimiter">(</span><a title="Option[Boolean]" id="sbt.inc;IncrementalCommon.orTrue.o">o</a>: <span title="Option[Boolean]">Option</span><span class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#sbt.inc;IncrementalCommon.orTrue.o" title="Option[Boolean]">o</a> <span title="(default: =&gt; Boolean)Boolean">getOrElse</span> <span title="Boolean(true)" class="keyword">true</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="[T](nodes: Iterable[T])(dependencies: T =&gt; Iterable[T])Set[T]" id="sbt.inc;IncrementalCommon.transitiveDeps">transitiveDeps</a><span class="delimiter">[</span><a title="" id="sbt.inc;IncrementalCommon.transitiveDeps;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[T]" id="sbt.inc;IncrementalCommon.transitiveDeps.nodes">nodes</a>: <span title="Iterable[T]">Iterable</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="T =&gt; Iterable[T]" id="sbt.inc;IncrementalCommon.transitiveDeps.dependencies">dependencies</a>: T =&gt; Iterable<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Set[T]">Set</span><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[T]" id="sbt.inc;IncrementalCommon.transitiveDeps.xs">xs</a> = <span title="()scala.collection.mutable.HashSet[T]" class="keyword">new</span> collection.mutable.<span title="scala.collection.mutable.HashSet[T]">HashSet</span><span class="delimiter">[</span>T<span class="delimiter">]</span>
      <span class="keyword">def</span> <a title="(from: T, tos: Iterable[T])Unit" id="sbt.inc;IncrementalCommon.transitiveDeps.all">all</a><span class="delimiter">(</span><a title="T" id="sbt.inc;IncrementalCommon.transitiveDeps.all.from">from</a>: <a href="#sbt.inc;IncrementalCommon.transitiveDeps;T" title="T">T</a>, <a title="Iterable[T]" id="sbt.inc;IncrementalCommon.transitiveDeps.all.tos">tos</a>: <span title="Iterable[T]">Iterable</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#sbt.inc;IncrementalCommon.transitiveDeps.all.tos" title="Iterable[T]">tos</a>.<span title="(f: T =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="T" id="sbt.inc;IncrementalCommon.transitiveDeps.all.$anonfun.to">to</a> =&gt; <a href="#sbt.inc;IncrementalCommon.transitiveDeps.visit" title="(from: T, to: T)Unit">visit</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.all.from" title="T">from</a>, <a href="#sbt.inc;IncrementalCommon.transitiveDeps.all.$anonfun.to" title="T">to</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(from: T, to: T)Unit" id="sbt.inc;IncrementalCommon.transitiveDeps.visit">visit</a><span class="delimiter">(</span><a title="T" id="sbt.inc;IncrementalCommon.transitiveDeps.visit.from">from</a>: <a href="#sbt.inc;IncrementalCommon.transitiveDeps;T" title="T">T</a>, <a title="T" id="sbt.inc;IncrementalCommon.transitiveDeps.visit.to">to</a>: <a href="#sbt.inc;IncrementalCommon.transitiveDeps;T" title="T">T</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.xs" title="scala.collection.mutable.HashSet[T]">xs</a>.<span title="(elem: T)Boolean">contains</span><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.visit.to" title="T">to</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Including &quot;)">Including $</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.visit.to" title="T">to</a><span title="String(&quot; by &quot;)"> by $</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.visit.from" title="T">from</a><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
          <a href="#sbt.inc;IncrementalCommon.transitiveDeps.xs" title="scala.collection.mutable.HashSet[T]">xs</a> <span title="(elem: T)xs.type">+=</span> <a href="#sbt.inc;IncrementalCommon.transitiveDeps.visit.to" title="T">to</a>
          <a href="#sbt.inc;IncrementalCommon.transitiveDeps.all" title="(from: T, tos: Iterable[T])Unit">all</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.visit.to" title="T">to</a>, <a href="#sbt.inc;IncrementalCommon.transitiveDeps.dependencies" title="(v1: T)Iterable[T]">dependencies</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.visit.to" title="T">to</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <a href="#sbt.inc;IncrementalCommon.log" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Initial set of included nodes: &quot;)" class="string">&quot;Initial set of included nodes: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.inc;IncrementalCommon.transitiveDeps.nodes" title="Iterable[T]">nodes</a><span class="delimiter">)</span>
      <a href="#sbt.inc;IncrementalCommon.transitiveDeps.nodes" title="Iterable[T]">nodes</a> <span title="(f: T =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="T" id="sbt.inc;IncrementalCommon.transitiveDeps.$anonfun.start">start</a> =&gt;
        <a href="#sbt.inc;IncrementalCommon.transitiveDeps.xs" title="scala.collection.mutable.HashSet[T]">xs</a> <span title="(elem: T)xs.type">+=</span> <a href="#sbt.inc;IncrementalCommon.transitiveDeps.$anonfun.start" title="T">start</a>
        <a href="#sbt.inc;IncrementalCommon.transitiveDeps.all" title="(from: T, tos: Iterable[T])Unit">all</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.$anonfun.start" title="T">start</a>, <a href="#sbt.inc;IncrementalCommon.transitiveDeps.dependencies" title="(v1: T)Iterable[T]">dependencies</a><span class="delimiter">(</span><a href="#sbt.inc;IncrementalCommon.transitiveDeps.$anonfun.start" title="T">start</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#sbt.inc;IncrementalCommon.transitiveDeps.xs" title="scala.collection.mutable.HashSet[T]">xs</a>.<span title="scala.collection.immutable.Set[T]">toSet</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
