<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/APIMappings.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.<span class="delimiter">{</span> MalformedURLException, URL <span class="delimiter">}</span>

<span class="keyword">import</span> sbt.mavenint.SbtPomExtraProperties

<span class="keyword">private</span><span class="delimiter">[</span>sbt<span class="delimiter">]</span> <span class="keyword">object</span> <a title="sbt.APIMappings.type" id="sbt.APIMappings">APIMappings</a> <a href="#sbt.APIMappings" title="sbt.APIMappings.type" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(cp: Seq[sbt.Attributed[java.io.File]], log: sbt.Logger)Seq[(java.io.File, java.net.URL)]" id="sbt.APIMappings.extract">extract</a><span class="delimiter">(</span><a title="Seq[sbt.Attributed[java.io.File]]" id="sbt.APIMappings.extract.cp">cp</a>: <span title="Seq[sbt.Attributed[java.io.File]]">Seq</span><span class="delimiter">[</span>Attributed<span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="sbt.Logger" id="sbt.APIMappings.extract.log">log</a>: <a href="Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a><span class="delimiter">)</span>: <span title="Seq[(java.io.File, java.net.URL)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>File, URL<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#sbt.APIMappings.extract.cp" title="Seq[sbt.Attributed[java.io.File]]">cp</a>.<span title="(f: sbt.Attributed[java.io.File] =&gt; scala.collection.GenTraversableOnce[(java.io.File, java.net.URL)])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[sbt.Attributed[java.io.File]],(java.io.File, java.net.URL),Seq[(java.io.File, java.net.URL)]])Seq[(java.io.File, java.net.URL)]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,(java.io.File, java.net.URL),Seq[(java.io.File, java.net.URL)]]" class="delimiter">(</span><a title="sbt.Attributed[java.io.File]" id="sbt.APIMappings.extract.$anonfun.entry">entry</a> =&gt; <a href="#sbt.APIMappings.extractFromEntry" title="(entry: sbt.Attributed[java.io.File], log: sbt.Logger)Option[(java.io.File, java.net.URL)]">extractFromEntry</a><span title="(xo: Option[(java.io.File, java.net.URL)])Iterable[(java.io.File, java.net.URL)]" class="delimiter">(</span><a href="#sbt.APIMappings.extract.$anonfun.entry" title="sbt.Attributed[java.io.File]">entry</a>, <a href="#sbt.APIMappings.extract.log" title="sbt.Logger">log</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(entry: sbt.Attributed[java.io.File], log: sbt.Logger)Option[(java.io.File, java.net.URL)]" id="sbt.APIMappings.extractFromEntry">extractFromEntry</a><span class="delimiter">(</span><a title="sbt.Attributed[java.io.File]" id="sbt.APIMappings.extractFromEntry.entry">entry</a>: <a href="Attributes.scala.html#sbt;Attributed" title="sbt.Attributed[java.io.File]">Attributed</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="sbt.Logger" id="sbt.APIMappings.extractFromEntry.log">log</a>: <a href="Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a><span class="delimiter">)</span>: <span title="Option[(java.io.File, java.net.URL)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>File, URL<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#sbt.APIMappings.extractFromEntry.entry" title="sbt.Attributed[java.io.File]">entry</a>.<a href="Attributes.scala.html#sbt;Attributed.get" title="(key: sbt.AttributeKey[java.net.URL])Option[java.net.URL]">get</a><span class="delimiter">(</span><a href="Keys.scala.html#sbt.Keys" title="sbt.Keys.type">Keys</a>.<a href="Keys.scala.html#sbt.Keys.entryApiURL" title="=&gt; sbt.AttributeKey[java.net.URL]">entryApiURL</a><span class="delimiter">)</span> <span title="Option[(java.io.File, java.net.URL)]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="java.net.URL" id="sbt.APIMappings.extractFromEntry.u">u</a><span class="delimiter">)</span> =&gt; <span title="(x: (java.io.File, java.net.URL))Some[(java.io.File, java.net.URL)]">Some</span><span class="delimiter">(</span><span title="(_1: java.io.File, _2: java.net.URL)(java.io.File, java.net.URL)" class="delimiter">(</span><a href="#sbt.APIMappings.extractFromEntry.entry" title="sbt.Attributed[java.io.File]">entry</a>.<a href="Attributes.scala.html#sbt;Attributed.data" title="=&gt; java.io.File">data</a>, <a href="#sbt.APIMappings.extractFromEntry.u" title="java.net.URL">u</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">None</span>    =&gt; <a href="#sbt.APIMappings.extractFromEntry.entry" title="sbt.Attributed[java.io.File]">entry</a>.<a href="Attributes.scala.html#sbt;Attributed.get" title="(key: sbt.AttributeKey[sbt.ModuleID])Option[sbt.ModuleID]">get</a><span class="delimiter">(</span><a href="Keys.scala.html#sbt.Keys" title="sbt.Keys.type">Keys</a>.<a href="Keys.scala.html#sbt.Keys.moduleID" title="=&gt; sbt.SettingKey[sbt.ModuleID]">moduleID</a>.<a href="Structure.scala.html#sbt;SettingKey.key" title="=&gt; sbt.AttributeKey[sbt.ModuleID]">key</a><span class="delimiter">)</span>.<span title="(f: sbt.ModuleID =&gt; Option[(java.io.File, java.net.URL)])Option[(java.io.File, java.net.URL)]">flatMap</span> <span class="delimiter">{</span> <a title="sbt.ModuleID" id="sbt.APIMappings.extractFromEntry.$anonfun.mid">mid</a> =&gt; <a href="#sbt.APIMappings.extractFromID" title="(entry: java.io.File, mid: sbt.ModuleID, log: sbt.Logger)Option[(java.io.File, java.net.URL)]">extractFromID</a><span class="delimiter">(</span><a href="#sbt.APIMappings.extractFromEntry.entry" title="sbt.Attributed[java.io.File]">entry</a>.<a href="Attributes.scala.html#sbt;Attributed.data" title="=&gt; java.io.File">data</a>, <a href="#sbt.APIMappings.extractFromEntry.$anonfun.mid" title="sbt.ModuleID">mid</a>, <a href="#sbt.APIMappings.extractFromEntry.log" title="sbt.Logger">log</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(entry: java.io.File, mid: sbt.ModuleID, log: sbt.Logger)Option[(java.io.File, java.net.URL)]" id="sbt.APIMappings.extractFromID">extractFromID</a><span class="delimiter">(</span><a title="java.io.File" id="sbt.APIMappings.extractFromID.entry">entry</a>: <span title="java.io.File">File</span>, <a title="sbt.ModuleID" id="sbt.APIMappings.extractFromID.mid">mid</a>: <a href="ModuleID.scala.html#sbt;ModuleID" title="sbt.ModuleID">ModuleID</a>, <a title="sbt.Logger" id="sbt.APIMappings.extractFromID.log">log</a>: <a href="Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a><span class="delimiter">)</span>: <span title="Option[(java.io.File, java.net.URL)]">Option</span><span class="delimiter">[</span><span class="delimiter">(</span>File, URL<span class="delimiter">)</span><span class="delimiter">]</span> =
    <span class="keyword">for</span> <span class="delimiter">{</span>
      <a title="String" id="sbt.APIMappings.extractFromID.$anonfun.urlString">urlString</a> &lt;- <a href="#sbt.APIMappings.extractFromID.mid" title="sbt.ModuleID">mid</a>.<a href="ModuleID.scala.html#sbt;ModuleID.extraAttributes" title="=&gt; Map[String,String]">extraAttributes</a>.<span title="(key: String)Option[String]">get</span><span title="(f: String =&gt; Option[(java.io.File, java.net.URL)])Option[(java.io.File, java.net.URL)]" class="delimiter">(</span><a href="mavenint/SbtPomExtraProperties.java.html#sbt.mavenint.SbtPomExtraProperties" title="sbt.mavenint.SbtPomExtraProperties.type">SbtPomExtraProperties</a>.<a href="mavenint/SbtPomExtraProperties.java.html#sbt.mavenint.SbtPomExtraProperties.POM_API_KEY" title="String">POM_API_KEY</a><span class="delimiter">)</span>
      <a title="java.net.URL" id="sbt.APIMappings.extractFromID.$anonfun.$anonfun.u">u</a> &lt;- <a href="#sbt.APIMappings.parseURL" title="(s: String, forEntry: java.io.File, log: sbt.Logger)Option[java.net.URL]">parseURL</a><span title="(f: java.net.URL =&gt; (java.io.File, java.net.URL))Option[(java.io.File, java.net.URL)]" class="delimiter">(</span><a href="#sbt.APIMappings.extractFromID.$anonfun.urlString" title="String">urlString</a>, <a href="#sbt.APIMappings.extractFromID.entry" title="java.io.File">entry</a>, <a href="#sbt.APIMappings.extractFromID.log" title="sbt.Logger">log</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">yield</span> <span title="(_1: java.io.File, _2: java.net.URL)(java.io.File, java.net.URL)" class="delimiter">(</span><a href="#sbt.APIMappings.extractFromID.entry" title="java.io.File">entry</a>, <a href="#sbt.APIMappings.extractFromID.$anonfun.$anonfun.u" title="java.net.URL">u</a><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="(s: String, forEntry: java.io.File, log: sbt.Logger)Option[java.net.URL]" id="sbt.APIMappings.parseURL">parseURL</a><span class="delimiter">(</span><a title="String" id="sbt.APIMappings.parseURL.s">s</a>: <span title="String">String</span>, <a title="java.io.File" id="sbt.APIMappings.parseURL.forEntry">forEntry</a>: <span title="java.io.File">File</span>, <a title="sbt.Logger" id="sbt.APIMappings.parseURL.log">log</a>: <a href="Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a><span class="delimiter">)</span>: <span title="Option[java.net.URL]">Option</span><span class="delimiter">[</span>URL<span class="delimiter">]</span> =
    <span class="keyword">try</span> <span title="(x: java.net.URL)Some[java.net.URL]">Some</span><span class="delimiter">(</span><span title="(x$1: String)java.net.URL" class="keyword">new</span> <span title="java.net.URL">URL</span><span class="delimiter">(</span><a href="#sbt.APIMappings.parseURL.s" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="java.net.MalformedURLException" id="sbt.APIMappings.parseURL.e">e</a>: <span title="java.net.MalformedURLException">MalformedURLException</span> =&gt;
        <a href="#sbt.APIMappings.parseURL.log" title="sbt.Logger">log</a>.<a href="Logger.scala.html#sbt;Logger.warn(83d3728a3c)" title="(message: =&gt; String)Unit">warn</a><span class="delimiter">(</span><span title="(args: Any*)String">s</span>&quot;<span title="String(&quot;Invalid API base URL \'&quot;)">Invalid API base URL '$</span><a href="#sbt.APIMappings.parseURL.s" title="String">s</a><span title="String(&quot;\' for classpath entry \'&quot;)">' for classpath entry '$</span><a href="#sbt.APIMappings.parseURL.forEntry" title="java.io.File">forEntry</a><span title="String(&quot;\': &quot;)">': $</span><span class="delimiter">{</span><a href="#sbt.APIMappings.parseURL.e" title="java.net.MalformedURLException">e</a>.<span title="()String">toString</span><span class="delimiter">}</span><span title="String(&quot;&quot;)" class="string">&quot;</span><span class="delimiter">)</span>
        <span title="None.type">None</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](attr: sbt.Attributed[T], entryAPI: Option[java.net.URL])sbt.Attributed[T]" id="sbt.APIMappings.store">store</a><span class="delimiter">[</span><a title="" id="sbt.APIMappings.store;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="sbt.Attributed[T]" id="sbt.APIMappings.store.attr">attr</a>: <a href="Attributes.scala.html#sbt;Attributed" title="sbt.Attributed[T]">Attributed</a><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="Option[java.net.URL]" id="sbt.APIMappings.store.entryAPI">entryAPI</a>: <span title="Option[java.net.URL]">Option</span><span class="delimiter">[</span>URL<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="Attributes.scala.html#sbt;Attributed" title="sbt.Attributed[T]">Attributed</a><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#sbt.APIMappings.store.entryAPI" title="Option[java.net.URL]">entryAPI</a> <span title="sbt.Attributed[T]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="None.type">None</span>    =&gt; <a href="#sbt.APIMappings.store.attr" title="sbt.Attributed[T]">attr</a>
    <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="java.net.URL" id="sbt.APIMappings.store.u">u</a><span class="delimiter">)</span> =&gt; <a href="#sbt.APIMappings.store.attr" title="sbt.Attributed[T]">attr</a>.<a href="Attributes.scala.html#sbt;Attributed.put" title="(key: sbt.AttributeKey[java.net.URL], value: java.net.URL)sbt.Attributed[T]">put</a><span class="delimiter">(</span><a href="Keys.scala.html#sbt.Keys" title="sbt.Keys.type">Keys</a>.<a href="Keys.scala.html#sbt.Keys.entryApiURL" title="=&gt; sbt.AttributeKey[java.net.URL]">entryApiURL</a>, <a href="#sbt.APIMappings.store.u" title="java.net.URL">u</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
