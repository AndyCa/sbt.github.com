<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Package.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> <span title="type">Predef</span>.<span class="delimiter">{</span> conforms =&gt; _, _ <span class="delimiter">}</span>
<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.util.jar.<span class="delimiter">{</span> Attributes, Manifest <span class="delimiter">}</span>
<span class="keyword">import</span> collection.<span title="scala.collection.JavaConversions.type">JavaConversions</span>._
<span class="keyword">import</span> <a href="Types.scala.html#sbt.Types" title="sbt.Types.type">Types</a>.:+:
<span class="keyword">import</span> <a href="Path.scala.html#sbt.Path" title="sbt.Path.type">Path</a>._

<span class="keyword">import</span> sbinary.<span class="delimiter">{</span> DefaultProtocol, Format <span class="delimiter">}</span>
<span class="keyword">import</span> <span title="sbinary.DefaultProtocol.type">DefaultProtocol</span>.<span class="delimiter">{</span> FileFormat, immutableMapFormat, StringFormat, UnitFormat <span class="delimiter">}</span>
<span class="keyword">import</span> <a href="Cache.scala.html#sbt.Cache" title="sbt.Cache.type">Cache</a>.<span class="delimiter">{</span> defaultEquiv, hConsCache, hNilCache, streamFormat, wrapIn <span class="delimiter">}</span>
<span class="keyword">import</span> <a href="Tracked.scala.html#sbt.Tracked" title="sbt.Tracked.type">Tracked</a>.<span class="delimiter">{</span> inputChanged, outputChanged <span class="delimiter">}</span>
<span class="keyword">import</span> <a href="FileInfo.scala.html#sbt.FileInfo" title="sbt.FileInfo.type">FileInfo</a>.exists
<span class="keyword">import</span> <a href="FileInfo.scala.html#sbt.FilesInfo" title="sbt.FilesInfo.type">FilesInfo</a>.lastModified

<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait PackageOption extends AnyRef" id="sbt;PackageOption">PackageOption</a>
<span title="AnyRef" class="keyword">object</span> <a title="sbt.Package.type" id="sbt.Package">Package</a> <a href="#sbt.Package" title="sbt.Package.type" class="delimiter">{</a>
  <span class="keyword">final</span> <span class="keyword">case class</span> <a title="class JarManifest extends AnyRef with sbt.PackageOption with Product with Serializable" id="sbt.Package.JarManifest.readResolve">JarManifest</a><a href="#sbt.Package.JarManifest.readResolve" title="Product" class="delimiter">(</a><a title="java.util.jar.Manifest" id="sbt.Package;JarManifest.m">m</a>: <span title="java.util.jar.Manifest">Manifest</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#sbt;PackageOption" title="sbt.PackageOption">PackageOption</a> <span class="delimiter">{</span>
    <span title="(assertion: Boolean)Unit">assert</span><span class="delimiter">(</span><a href="#sbt.Package;JarManifest.m" title="=&gt; java.util.jar.Manifest">m</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">final</span> <span class="keyword">case class</span> <a title="class MainClass extends AnyRef with sbt.PackageOption with Product with Serializable" id="sbt.Package.MainClass.readResolve">MainClass</a><a href="#sbt.Package.MainClass.readResolve" title="Product" class="delimiter">(</a><a title="String" id="sbt.Package;MainClass.mainClassName">mainClassName</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#sbt;PackageOption" title="sbt.PackageOption">PackageOption</a>
  <span class="keyword">final</span> <span class="keyword">case class</span> <a href="#sbt.Package;ManifestAttributes.productElement.x$1" title="class ManifestAttributes extends AnyRef with sbt.PackageOption with Product with Serializable" id="sbt.Package.ManifestAttributes.readResolve">ManifestAttributes</a><a href="#sbt.Package.ManifestAttributes.readResolve" title="Product" class="delimiter">(</a><a title="(java.util.jar.Attributes.Name, String)*" id="sbt.Package;ManifestAttributes.attributes">attributes</a>: <span title="(java.util.jar.Attributes.Name, String)*" class="delimiter">(</span>Attributes.Name, String<span class="delimiter">)</span>*<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#sbt;PackageOption" title="sbt.PackageOption">PackageOption</a>
  <span class="keyword">def</span> <a title="(attributes: (String, String)*)sbt.Package.ManifestAttributes" id="sbt.Package.ManifestAttributes(8134280ae2)">ManifestAttributes</a><span class="delimiter">(</span><a title="(String, String)*" id="sbt.Package.ManifestAttributes(8134280ae2).attributes">attributes</a>: <span title="(String, String)*" class="delimiter">(</span>String, String<span class="delimiter">)</span>*<span class="delimiter">)</span>: <a href="#sbt.Package.ManifestAttributes.readResolve" title="sbt.Package.ManifestAttributes">ManifestAttributes</a> =
    <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Seq[(java.util.jar.Attributes.Name, String)]" id="sbt.Package.ManifestAttributes(8134280ae2).converted">converted</a> = <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="sbt.Package.ManifestAttributes(8134280ae2).converted.$anonfun.name">name</a>, <a title="String" id="sbt.Package.ManifestAttributes(8134280ae2).converted.$anonfun.value">value</a><span class="delimiter">)</span> &lt;- <a href="#sbt.Package.ManifestAttributes(8134280ae2).attributes" title="(f: ((String, String)) =&gt; (java.util.jar.Attributes.Name, String))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(String, String)],(java.util.jar.Attributes.Name, String),Seq[(java.util.jar.Attributes.Name, String)]])Seq[(java.util.jar.Attributes.Name, String)]">attributes</a><span class="delimiter">)</span> <span class="keyword">yield</span> <span title="(_1: java.util.jar.Attributes.Name, _2: String)(java.util.jar.Attributes.Name, String)" class="delimiter">(</span><span title="java.util.jar.Attributes.Name" class="keyword">new</span> <span title="java.util.jar.Attributes.type">Attributes</span>.<span title="java.util.jar.Attributes.Name">Name</span><span class="delimiter">(</span><a href="#sbt.Package.ManifestAttributes(8134280ae2).converted.$anonfun.name" title="String">name</a><span class="delimiter">)</span>, <a href="#sbt.Package.ManifestAttributes(8134280ae2).converted.$anonfun.value" title="String">value</a><span class="delimiter">)</span>
      <span title="sbt.Package.ManifestAttributes" class="keyword">new</span> <a href="#sbt.Package.ManifestAttributes.readResolve" title="sbt.Package.ManifestAttributes">ManifestAttributes</a><span class="delimiter">(</span><a href="#sbt.Package.ManifestAttributes(8134280ae2).converted" title="Seq[(java.util.jar.Attributes.Name, String)]">converted</a>: _*<span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(a1: java.util.jar.Attributes, a2: java.util.jar.Attributes)scala.collection.mutable.Map[Object,Object]" id="sbt.Package.mergeAttributes">mergeAttributes</a><span class="delimiter">(</span><a title="java.util.jar.Attributes" id="sbt.Package.mergeAttributes.a1">a1</a>: <span title="java.util.jar.Attributes">Attributes</span>, <a title="java.util.jar.Attributes" id="sbt.Package.mergeAttributes.a2">a2</a>: <span title="java.util.jar.Attributes">Attributes</span><span class="delimiter">)</span> = <a href="#sbt.Package.mergeAttributes.a1" title="(m: java.util.Map[Object,Object])scala.collection.mutable.Map[Object,Object]">a1</a> <span title="(xs: scala.collection.TraversableOnce[(Object, Object)])scala.collection.mutable.Map[Object,Object]">++=</span> <a href="#sbt.Package.mergeAttributes.a2" title="(m: java.util.Map[Object,Object])scala.collection.mutable.Map[Object,Object]">a2</a>
  <span class="comment">// merges `mergeManifest` into `manifest` (mutating `manifest` in the process)</span>
  <span class="keyword">def</span> <a title="(manifest: java.util.jar.Manifest, mergeManifest: java.util.jar.Manifest)Unit" id="sbt.Package.mergeManifests">mergeManifests</a><span class="delimiter">(</span><a title="java.util.jar.Manifest" id="sbt.Package.mergeManifests.manifest">manifest</a>: <span title="java.util.jar.Manifest">Manifest</span>, <a title="java.util.jar.Manifest" id="sbt.Package.mergeManifests.mergeManifest">mergeManifest</a>: <span title="java.util.jar.Manifest">Manifest</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#sbt.Package.mergeAttributes" title="(a1: java.util.jar.Attributes, a2: java.util.jar.Attributes)scala.collection.mutable.Map[Object,Object]">mergeAttributes</a><span class="delimiter">(</span><a href="#sbt.Package.mergeManifests.manifest" title="java.util.jar.Manifest">manifest</a>.<span title="()java.util.jar.Attributes">getMainAttributes</span>, <a href="#sbt.Package.mergeManifests.mergeManifest" title="java.util.jar.Manifest">mergeManifest</a>.<span title="()java.util.jar.Attributes">getMainAttributes</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,java.util.jar.Attributes]" id="sbt.Package.mergeManifests.entryMap">entryMap</a> = <span title="(m: java.util.Map[String,java.util.jar.Attributes])scala.collection.mutable.Map[String,java.util.jar.Attributes]">mapAsScalaMap</span><span class="delimiter">(</span><a href="#sbt.Package.mergeManifests.manifest" title="java.util.jar.Manifest">manifest</a>.<span title="()java.util.Map[String,java.util.jar.Attributes]">getEntries</span><span class="delimiter">)</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a title="String" id="sbt.Package.mergeManifests.$anonfun.key">key</a>, <a title="java.util.jar.Attributes" id="sbt.Package.mergeManifests.$anonfun.value">value</a><span class="delimiter">)</span> &lt;- <a href="#sbt.Package.mergeManifests.mergeManifest" title="java.util.jar.Manifest">mergeManifest</a>.<a href="#sbt.Package.mergeManifests.$anonfun.check$ifrefutable$2" title="(f: ((String, java.util.jar.Attributes)) =&gt; Equals)Unit">getEntries</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#sbt.Package.mergeManifests.entryMap" title="scala.collection.mutable.Map[String,java.util.jar.Attributes]">entryMap</a>.<span title="(key: String)Option[java.util.jar.Attributes]">get</span><span class="delimiter">(</span><a href="#sbt.Package.mergeManifests.$anonfun.key" title="String">key</a><span class="delimiter">)</span> <span title="&lt;root&gt; extends Equals with Object" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<span class="delimiter">(</span><a title="java.util.jar.Attributes" id="sbt.Package.mergeManifests.$anonfun.attributes">attributes</a><span class="delimiter">)</span> =&gt; <a href="#sbt.Package.mergeAttributes" title="(a1: java.util.jar.Attributes, a2: java.util.jar.Attributes)scala.collection.mutable.Map[Object,Object]">mergeAttributes</a><span class="delimiter">(</span><a href="#sbt.Package.mergeManifests.$anonfun.attributes" title="java.util.jar.Attributes">attributes</a>, <a href="#sbt.Package.mergeManifests.$anonfun.value" title="java.util.jar.Attributes">value</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="None.type">None</span>             =&gt; <a href="#sbt.Package.mergeManifests.entryMap" title="scala.collection.mutable.Map[String,java.util.jar.Attributes]">entryMap</a> <span title="(key: String, value: java.util.jar.Attributes)Option[java.util.jar.Attributes]">put</span> <span class="delimiter">(</span><a href="#sbt.Package.mergeManifests.$anonfun.key" title="String">key</a>, <a href="#sbt.Package.mergeManifests.$anonfun.value" title="java.util.jar.Attributes">value</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">final</span> <span class="keyword">class</span> <a title="class Configuration extends AnyRef" id="sbt.Package;Configuration">Configuration</a><a href="#sbt.Package;Configuration" title="sbt.Package.Configuration" class="delimiter">(</a><span class="keyword">val</span> <a title="Seq[(java.io.File, String)]" id="sbt.Package;Configuration.sources">sources</a>: <span title="Seq[(java.io.File, String)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>File, String<span class="delimiter">)</span><span class="delimiter">]</span>, <span class="keyword">val</span> <a title="java.io.File" id="sbt.Package;Configuration.jar">jar</a>: <span title="java.io.File">File</span>, <span class="keyword">val</span> <a title="Seq[sbt.PackageOption]" id="sbt.Package;Configuration.options">options</a>: <span title="Seq[sbt.PackageOption]">Seq</span><span class="delimiter">[</span>PackageOption<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(conf: sbt.Package.Configuration, cacheFile: java.io.File, log: sbt.Logger)Unit" id="sbt.Package.apply">apply</a><span class="delimiter">(</span><a title="sbt.Package.Configuration" id="sbt.Package.apply.conf">conf</a>: <a href="#sbt.Package;Configuration" title="sbt.Package.Configuration">Configuration</a>, <a title="java.io.File" id="sbt.Package.apply.cacheFile">cacheFile</a>: <span title="java.io.File">File</span>, <a title="sbt.Logger" id="sbt.Package.apply.log">log</a>: <a href="Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.util.jar.Manifest" id="sbt.Package.apply.manifest">manifest</a> = <span title="java.util.jar.Manifest" class="keyword">new</span> <span title="java.util.jar.Manifest">Manifest</span>
    <span class="keyword">val</span> <a title="java.util.jar.Attributes" id="sbt.Package.apply.main">main</a> = <a href="#sbt.Package.apply.manifest" title="java.util.jar.Manifest">manifest</a>.<span title="()java.util.jar.Attributes">getMainAttributes</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="sbt.PackageOption" id="sbt.Package.apply.$anonfun.option">option</a> &lt;- <a href="#sbt.Package.apply.conf" title="sbt.Package.Configuration">conf</a>.<a href="#sbt.Package;Configuration.options" title="(f: sbt.PackageOption =&gt; Any)Unit">options</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#sbt.Package.apply.$anonfun.option" title="sbt.PackageOption">option</a> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> JarManifest<span class="delimiter">(</span><a title="java.util.jar.Manifest" id="sbt.Package.apply.$anonfun.mergeManifest">mergeManifest</a><span class="delimiter">)</span>          =&gt; <a href="#sbt.Package.mergeManifests" title="(manifest: java.util.jar.Manifest, mergeManifest: java.util.jar.Manifest)Unit">mergeManifests</a><span class="delimiter">(</span><a href="#sbt.Package.apply.manifest" title="java.util.jar.Manifest">manifest</a>, <a href="#sbt.Package.apply.$anonfun.mergeManifest" title="java.util.jar.Manifest">mergeManifest</a><span class="delimiter">)</span>
        <span class="keyword">case</span> MainClass<span class="delimiter">(</span><a title="String" id="sbt.Package.apply.$anonfun.mainClassName">mainClassName</a><span class="delimiter">)</span>            =&gt; <a href="#sbt.Package.apply.main" title="java.util.jar.Attributes">main</a>.<span title="(x$1: Any, x$2: Any)Object">put</span><span class="delimiter">(</span><span title="java.util.jar.Attributes.type">Attributes</span>.<span title="java.util.jar.Attributes.Name.type">Name</span>.<span title="java.util.jar.Attributes.Name">MAIN_CLASS</span>, <a href="#sbt.Package.apply.$anonfun.mainClassName" title="String">mainClassName</a><span class="delimiter">)</span>
        <span class="keyword">case</span> ManifestAttributes<span class="delimiter">(</span><a title="Seq[(java.util.jar.Attributes.Name, String)]" id="sbt.Package.apply.$anonfun.attributes">attributes</a> @ _*<span class="delimiter">)</span> =&gt; <a href="#sbt.Package.apply.main" title="(m: java.util.Map[Object,Object])scala.collection.mutable.Map[Object,Object]">main</a> <span title="(xs: scala.collection.TraversableOnce[(Object, Object)])scala.collection.mutable.Map[Object,Object]">++=</span> <a href="#sbt.Package.apply.$anonfun.attributes" title="Seq[(java.util.jar.Attributes.Name, String)]">attributes</a>
        <span class="keyword">case</span> _                                   =&gt; <a href="#sbt.Package.apply.log" title="sbt.Logger">log</a>.<a href="Logger.scala.html#sbt;Logger.warn(83d3728a3c)" title="(message: =&gt; String)Unit">warn</a><span class="delimiter">(</span><span title="String(&quot;Ignored unknown package option &quot;)" class="string">&quot;Ignored unknown package option &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.Package.apply.$anonfun.option" title="sbt.PackageOption">option</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#sbt.Package.setVersion" title="(main: java.util.jar.Attributes)Unit">setVersion</a><span class="delimiter">(</span><a href="#sbt.Package.apply.main" title="java.util.jar.Attributes">main</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]] =&gt; ((() =&gt; sbt.PlainFileInfo) =&gt; Unit)" id="sbt.Package.apply.cachedMakeJar">cachedMakeJar</a> = <a href="Tracked.scala.html#sbt.Tracked.inputChanged" title="(cacheFile: java.io.File)(f: (Boolean, sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]) =&gt; (() =&gt; sbt.PlainFileInfo) =&gt; Unit)(implicit ic: sbt.InputCache[sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]])sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]] =&gt; ((() =&gt; sbt.PlainFileInfo) =&gt; Unit)">inputChanged</a><span class="delimiter">(</span><a href="Path.scala.html#sbt;PathExtra.richFile" title="implicit sbt.PathExtra.richFile : (file: java.io.File)sbt.RichFile">cacheFile</a> <a href="Path.scala.html#sbt;RichFile./" title="(component: String)java.io.File">/</a> <span title="String(&quot;inputs&quot;)" class="string">&quot;inputs&quot;</span><span class="delimiter">)</span> <a href="Cache.scala.html#sbt;HListCacheImplicits.hConsCache" title="(implicit head: sbt.InputCache[Map[java.io.File,String]], implicit tail: sbt.InputCache[sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]])sbt.InputCache[sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]]" class="delimiter">{</a> <span class="delimiter">(</span><a title="Boolean" id="sbt.Package.apply.cachedMakeJar.$anonfun.inChanged">inChanged</a>, inputs: Map<span class="delimiter">[</span>File, String<span class="delimiter">]</span> <a href="HList.scala.html#sbt;HCons" title="sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]">:+:</a> FilesInfo<span class="delimiter">[</span>ModifiedFileInfo<span class="delimiter">]</span> :+: Manifest :+: HNil<span class="delimiter">)</span> =&gt;
      <span class="keyword">val</span> <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.x$3" title="Map[java.io.File,String]" id="sbt.Package.apply.cachedMakeJar.$anonfun.sources">sources</a> <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.sources" title="(Map[java.io.File,String], java.util.jar.Manifest)">:+:</a> _ :+: <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.x$3" title="java.util.jar.Manifest" id="sbt.Package.apply.cachedMakeJar.$anonfun.manifest">manifest</a> :+: <a href="HList.scala.html#sbt.HNil" title="sbt.HNil.type">HNil</a> = <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.inputs" title="sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]">inputs</a>
      <a href="Tracked.scala.html#sbt.Tracked.outputChanged" title="(cacheFile: java.io.File)(f: (Boolean, sbt.PlainFileInfo) =&gt; Unit)(implicit ic: sbt.InputCache[sbt.PlainFileInfo])(() =&gt; sbt.PlainFileInfo) =&gt; Unit">outputChanged</a><span class="delimiter">(</span><a href="Path.scala.html#sbt;PathExtra.richFile" title="implicit sbt.PathExtra.richFile : (file: java.io.File)sbt.RichFile">cacheFile</a> <a href="Path.scala.html#sbt;RichFile./" title="(component: String)java.io.File">/</a> <span title="String(&quot;output&quot;)" class="string">&quot;output&quot;</span><span class="delimiter">)</span> <a href="FileInfo.scala.html#sbt.FileInfo.existsInputCache" title="=&gt; sbt.InputCache[sbt.PlainFileInfo]" class="delimiter">{</a> <span class="delimiter">(</span><a title="Boolean" id="sbt.Package.apply.cachedMakeJar.$anonfun.$anonfun.outChanged">outChanged</a>, jar: <a href="FileInfo.scala.html#sbt;PlainFileInfo" title="sbt.PlainFileInfo">PlainFileInfo</a><span class="delimiter">)</span> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.Package.apply.cachedMakeJar.$anonfun.inChanged" title="Boolean">inChanged</a> <span title="(x: Boolean)Boolean">||</span> <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.$anonfun.outChanged" title="Boolean">outChanged</a><span class="delimiter">)</span>
          <a href="#sbt.Package.makeJar" title="(sources: Seq[(java.io.File, String)], jar: java.io.File, manifest: java.util.jar.Manifest, log: sbt.Logger)Unit">makeJar</a><span class="delimiter">(</span><a href="#sbt.Package.apply.cachedMakeJar.$anonfun.sources" title="Map[java.io.File,String]">sources</a>.<span title="=&gt; Seq[(java.io.File, String)]">toSeq</span>, <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.$anonfun.jar" title="sbt.PlainFileInfo">jar</a>.<a href="FileInfo.scala.html#sbt;FileInfo.file" title="=&gt; java.io.File">file</a>, <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.manifest" title="java.util.jar.Manifest">manifest</a>, <a href="#sbt.Package.apply.log" title="sbt.Logger">log</a><span class="delimiter">)</span>
        <span class="keyword">else</span>
          <a href="#sbt.Package.apply.log" title="sbt.Logger">log</a>.<a href="Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Jar uptodate: &quot;)" class="string">&quot;Jar uptodate: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.Package.apply.cachedMakeJar.$anonfun.$anonfun.jar" title="sbt.PlainFileInfo">jar</a>.<a href="FileInfo.scala.html#sbt;FileInfo.file" title="=&gt; java.io.File">file</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="scala.collection.immutable.Map[java.io.File,String]" id="sbt.Package.apply.map">map</a> = <a href="#sbt.Package.apply.conf" title="sbt.Package.Configuration">conf</a>.<a href="#sbt.Package;Configuration.sources" title="=&gt; Seq[(java.io.File, String)]">sources</a>.<span title="(implicit ev: &lt;:&lt;[(java.io.File, String),(java.io.File, String)])scala.collection.immutable.Map[java.io.File,String]">toMap</span>
    <span class="keyword">val</span> <a title="sbt.Types.:+:[scala.collection.immutable.Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.FilesInfo.lastModified.F],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]" id="sbt.Package.apply.inputs">inputs</a> = <a href="#sbt.Package.apply.map" title="scala.collection.immutable.Map[java.io.File,String]">map</a> <a href="HList.scala.html#sbt;HCons.:+:" title="(g: scala.collection.immutable.Map[java.io.File,String])sbt.Types.:+:[scala.collection.immutable.Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.FilesInfo.lastModified.F],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]">:+:</a> <a href="FileInfo.scala.html#sbt.FilesInfo;Style.apply" title="implicit sbt.FilesInfo.Style.apply : (files: Set[java.io.File])sbt.FilesInfo[sbt.FilesInfo.lastModified.F]">lastModified</a><span class="delimiter">(</span><a href="#sbt.Package.apply.map" title="scala.collection.immutable.Map[java.io.File,String]">map</a>.<span title="=&gt; scala.collection.immutable.Set[java.io.File]">keySet</span>.<span title="scala.collection.immutable.Set[java.io.File]">toSet</span><span class="delimiter">)</span> <a href="HList.scala.html#sbt;HCons.:+:" title="(g: sbt.FilesInfo[sbt.FilesInfo.lastModified.F])sbt.Types.:+:[sbt.FilesInfo[sbt.FilesInfo.lastModified.F],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]">:+:</a> <a href="#sbt.Package.apply.manifest" title="java.util.jar.Manifest">manifest</a> <a href="HList.scala.html#sbt;HNil.:+:" title="(g: java.util.jar.Manifest)sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]">:+:</a> <a href="HList.scala.html#sbt.HNil" title="sbt.HNil.type">HNil</a>
    <a href="#sbt.Package.apply.cachedMakeJar" title="(v1: sbt.Types.:+:[Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.ModifiedFileInfo],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]])(() =&gt; sbt.PlainFileInfo) =&gt; Unit">cachedMakeJar</a><span title="(v1: () =&gt; sbt.PlainFileInfo)Unit" class="delimiter">(</span><a href="#sbt.Package.apply.inputs" title="sbt.Types.:+:[scala.collection.immutable.Map[java.io.File,String],sbt.Types.:+:[sbt.FilesInfo[sbt.FilesInfo.lastModified.F],sbt.Types.:+:[java.util.jar.Manifest,sbt.HNil]]]">inputs</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="FileInfo.scala.html#sbt.FileInfo.exists.apply" title="implicit sbt.FileInfo.exists.apply : (file: java.io.File)sbt.PlainFileInfo">exists</a><span class="delimiter">(</span><a href="#sbt.Package.apply.conf" title="sbt.Package.Configuration">conf</a>.<a href="#sbt.Package;Configuration.jar" title="=&gt; java.io.File">jar</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(main: java.util.jar.Attributes)Unit" id="sbt.Package.setVersion">setVersion</a><span class="delimiter">(</span><a title="java.util.jar.Attributes" id="sbt.Package.setVersion.main">main</a>: <span title="java.util.jar.Attributes">Attributes</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.util.jar.Attributes.Name" id="sbt.Package.setVersion.version">version</a> = <span title="java.util.jar.Attributes.type">Attributes</span>.<span title="java.util.jar.Attributes.Name.type">Name</span>.<span title="java.util.jar.Attributes.Name">MANIFEST_VERSION</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#sbt.Package.setVersion.main" title="java.util.jar.Attributes">main</a>.<span title="(x$1: java.util.jar.Attributes.Name)String">getValue</span><span class="delimiter">(</span><a href="#sbt.Package.setVersion.version" title="java.util.jar.Attributes.Name">version</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="#sbt.Package.setVersion.main" title="java.util.jar.Attributes">main</a>.<span title="(x$1: Any, x$2: Any)Object">put</span><span title="Unit" class="delimiter">(</span><a href="#sbt.Package.setVersion.version" title="java.util.jar.Attributes.Name">version</a>, <span title="String(&quot;1.0&quot;)" class="string">&quot;1.0&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(name: String, version: String, orgName: String)sbt.PackageOption" id="sbt.Package.addSpecManifestAttributes">addSpecManifestAttributes</a><span class="delimiter">(</span><a title="String" id="sbt.Package.addSpecManifestAttributes.name">name</a>: <span title="String">String</span>, <a title="String" id="sbt.Package.addSpecManifestAttributes.version">version</a>: <span title="String">String</span>, <a title="String" id="sbt.Package.addSpecManifestAttributes.orgName">orgName</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#sbt;PackageOption" title="sbt.PackageOption">PackageOption</a> =
    <span class="delimiter">{</span>
      <span class="keyword">import</span> <span title="java.util.jar.Attributes.type">Attributes</span>.<span title="java.util.jar.Attributes.Name.type">Name</span>._
      <span class="keyword">val</span> <a title="Seq[java.util.jar.Attributes.Name]" id="sbt.Package.addSpecManifestAttributes.attribKeys">attribKeys</a> = <span title="(elems: java.util.jar.Attributes.Name*)Seq[java.util.jar.Attributes.Name]">Seq</span><span class="delimiter">(</span><span title="java.util.jar.Attributes.Name">SPECIFICATION_TITLE</span>, <span title="java.util.jar.Attributes.Name">SPECIFICATION_VERSION</span>, <span title="java.util.jar.Attributes.Name">SPECIFICATION_VENDOR</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Seq[String]" id="sbt.Package.addSpecManifestAttributes.attribVals">attribVals</a> = <span title="(elems: String*)Seq[String]">Seq</span><span class="delimiter">(</span><a href="#sbt.Package.addSpecManifestAttributes.name" title="String">name</a>, <a href="#sbt.Package.addSpecManifestAttributes.version" title="String">version</a>, <a href="#sbt.Package.addSpecManifestAttributes.orgName" title="String">orgName</a><span class="delimiter">)</span>
      <a href="#sbt.Package.ManifestAttributes.readResolve" title="(attributes: (java.util.jar.Attributes.Name, String)*)sbt.Package.ManifestAttributes">ManifestAttributes</a><span class="delimiter">(</span><a href="#sbt.Package.addSpecManifestAttributes.attribKeys" title="Seq[java.util.jar.Attributes.Name]">attribKeys</a> <span title="(that: scala.collection.GenIterable[String])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[java.util.jar.Attributes.Name],(java.util.jar.Attributes.Name, String),Seq[(java.util.jar.Attributes.Name, String)]])Seq[(java.util.jar.Attributes.Name, String)]">zip</span> <a href="#sbt.Package.addSpecManifestAttributes.attribVals" title="Seq[String]">attribVals</a>: _*<span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(name: String, version: String, homepage: Option[java.net.URL], org: String, orgName: String)sbt.PackageOption" id="sbt.Package.addImplManifestAttributes">addImplManifestAttributes</a><span class="delimiter">(</span><a title="String" id="sbt.Package.addImplManifestAttributes.name">name</a>: <span title="String">String</span>, <a title="String" id="sbt.Package.addImplManifestAttributes.version">version</a>: <span title="String">String</span>, <a title="Option[java.net.URL]" id="sbt.Package.addImplManifestAttributes.homepage">homepage</a>: <span title="Option[java.net.URL]">Option</span><span class="delimiter">[</span>java.net.URL<span class="delimiter">]</span>, <a title="String" id="sbt.Package.addImplManifestAttributes.org">org</a>: <span title="String">String</span>, <a title="String" id="sbt.Package.addImplManifestAttributes.orgName">orgName</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#sbt;PackageOption" title="sbt.PackageOption">PackageOption</a> =
    <span class="delimiter">{</span>
      <span class="keyword">import</span> <span title="java.util.jar.Attributes.type">Attributes</span>.<span title="java.util.jar.Attributes.Name.type">Name</span>._
      <span class="keyword">val</span> <a title="Seq[java.util.jar.Attributes.Name]" id="sbt.Package.addImplManifestAttributes.attribKeys">attribKeys</a> = <span title="(elems: java.util.jar.Attributes.Name*)Seq[java.util.jar.Attributes.Name]">Seq</span><span class="delimiter">(</span><span title="java.util.jar.Attributes.Name">IMPLEMENTATION_TITLE</span>, <span title="java.util.jar.Attributes.Name">IMPLEMENTATION_VERSION</span>, <span title="java.util.jar.Attributes.Name">IMPLEMENTATION_VENDOR</span>, <span title="java.util.jar.Attributes.Name">IMPLEMENTATION_VENDOR_ID</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Seq[String]" id="sbt.Package.addImplManifestAttributes.attribVals">attribVals</a> = <span title="(elems: String*)Seq[String]">Seq</span><span class="delimiter">(</span><a href="#sbt.Package.addImplManifestAttributes.name" title="String">name</a>, <a href="#sbt.Package.addImplManifestAttributes.version" title="String">version</a>, <a href="#sbt.Package.addImplManifestAttributes.orgName" title="String">orgName</a>, <a href="#sbt.Package.addImplManifestAttributes.org" title="String">org</a><span class="delimiter">)</span>
      <a href="#sbt.Package.ManifestAttributes.readResolve" title="(attributes: (java.util.jar.Attributes.Name, String)*)sbt.Package.ManifestAttributes">ManifestAttributes</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="#sbt.Package.addImplManifestAttributes.attribKeys" title="Seq[java.util.jar.Attributes.Name]">attribKeys</a> <span title="(that: scala.collection.GenIterable[String])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[java.util.jar.Attributes.Name],(java.util.jar.Attributes.Name, String),Seq[(java.util.jar.Attributes.Name, String)]])Seq[(java.util.jar.Attributes.Name, String)]">zip</span> <a href="#sbt.Package.addImplManifestAttributes.attribVals" title="Seq[String]">attribVals</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[(java.util.jar.Attributes.Name, String)])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(java.util.jar.Attributes.Name, String)],(java.util.jar.Attributes.Name, String),Seq[(java.util.jar.Attributes.Name, String)]])Seq[(java.util.jar.Attributes.Name, String)]">++</span> <span class="delimiter">{</span> <a href="#sbt.Package.addImplManifestAttributes.homepage" title="Option[java.net.URL]">homepage</a> <span title="(xo: Option[(java.util.jar.Attributes.Name, String)])Iterable[(java.util.jar.Attributes.Name, String)]">map</span> <span class="delimiter">(</span><a title="java.net.URL" id="sbt.Package.addImplManifestAttributes.$anonfun.h">h</a> =&gt; <span title="(_1: java.util.jar.Attributes.Name, _2: String)(java.util.jar.Attributes.Name, String)" class="delimiter">(</span><span title="java.util.jar.Attributes.Name">IMPLEMENTATION_URL</span>, <a href="#sbt.Package.addImplManifestAttributes.$anonfun.h" title="java.net.URL">h</a>.<span title="()String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>: _*<span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(sources: Seq[(java.io.File, String)], jar: java.io.File, manifest: java.util.jar.Manifest, log: sbt.Logger)Unit" id="sbt.Package.makeJar">makeJar</a><span class="delimiter">(</span><a title="Seq[(java.io.File, String)]" id="sbt.Package.makeJar.sources">sources</a>: <span title="Seq[(java.io.File, String)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>File, String<span class="delimiter">)</span><span class="delimiter">]</span>, <a title="java.io.File" id="sbt.Package.makeJar.jar">jar</a>: <span title="java.io.File">File</span>, <a title="java.util.jar.Manifest" id="sbt.Package.makeJar.manifest">manifest</a>: <span title="java.util.jar.Manifest">Manifest</span>, <a title="sbt.Logger" id="sbt.Package.makeJar.log">log</a>: <a href="Logger.scala.html#sbt;Logger" title="sbt.Logger">Logger</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#sbt.Package.makeJar.log" title="sbt.Logger">log</a>.<a href="Logger.scala.html#sbt;Logger.info(83d3728a3c)" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Packaging &quot;)" class="string">&quot;Packaging &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.Package.makeJar.jar" title="java.io.File">jar</a>.<span title="()String">getAbsolutePath</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; ...&quot;)" class="string">&quot; ...&quot;</span><span class="delimiter">)</span>
    <a href="IO.scala.html#sbt.IO" title="sbt.IO.type">IO</a>.<a href="IO.scala.html#sbt.IO.delete(e3f9ce1f75)" title="(file: java.io.File)Unit">delete</a><span class="delimiter">(</span><a href="#sbt.Package.makeJar.jar" title="java.io.File">jar</a><span class="delimiter">)</span>
    <a href="#sbt.Package.makeJar.log" title="sbt.Logger">log</a>.<a href="Logger.scala.html#sbt;Logger.debug(83d3728a3c)" title="(message: =&gt; String)Unit">debug</a><span class="delimiter">(</span><a href="#sbt.Package.sourcesDebugString" title="(sources: Seq[(java.io.File, String)])String">sourcesDebugString</a><span class="delimiter">(</span><a href="#sbt.Package.makeJar.sources" title="Seq[(java.io.File, String)]">sources</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="IO.scala.html#sbt.IO" title="sbt.IO.type">IO</a>.<a href="IO.scala.html#sbt.IO.jar" title="(sources: Traversable[(java.io.File, String)], outputJar: java.io.File, manifest: java.util.jar.Manifest)Unit">jar</a><span class="delimiter">(</span><a href="#sbt.Package.makeJar.sources" title="Seq[(java.io.File, String)]">sources</a>, <a href="#sbt.Package.makeJar.jar" title="java.io.File">jar</a>, <a href="#sbt.Package.makeJar.manifest" title="java.util.jar.Manifest">manifest</a><span class="delimiter">)</span>
    <a href="#sbt.Package.makeJar.log" title="sbt.Logger">log</a>.<a href="Logger.scala.html#sbt;Logger.info(83d3728a3c)" title="(message: =&gt; String)Unit">info</a><span class="delimiter">(</span><span title="String(&quot;Done packaging.&quot;)" class="string">&quot;Done packaging.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(sources: Seq[(java.io.File, String)])String" id="sbt.Package.sourcesDebugString">sourcesDebugString</a><span class="delimiter">(</span><a title="Seq[(java.io.File, String)]" id="sbt.Package.sourcesDebugString.sources">sources</a>: <span title="Seq[(java.io.File, String)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>File, String<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> =
    <span title="String(&quot;Input file mappings:\n\t&quot;)" class="string">&quot;Input file mappings:\n\t&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#sbt.Package.sourcesDebugString.sources" title="Seq[(java.io.File, String)]">sources</a> <span title="(f: ((java.io.File, String)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(java.io.File, String)],String,Seq[String]])Seq[String]">map</span> <a href="#sbt.Package.sourcesDebugString.$anonfun.x0$1" title="String" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a title="java.io.File" id="sbt.Package.sourcesDebugString.$anonfun.f">f</a>, <a title="String" id="sbt.Package.sourcesDebugString.$anonfun.s">s</a><span class="delimiter">)</span> =&gt; <a href="#sbt.Package.sourcesDebugString.$anonfun.s" title="String">s</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n\t  &quot;)" class="string">&quot;\n\t  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#sbt.Package.sourcesDebugString.$anonfun.f" title="java.io.File">f</a> <span class="delimiter">}</span> <span title="(sep: String)String">mkString</span> <span class="delimiter">(</span><span title="String(&quot;\n\t&quot;)" class="string">&quot;\n\t&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; Equiv[java.util.jar.Manifest]" id="sbt.Package.manifestEquiv">manifestEquiv</a>: <span title="Equiv[java.util.jar.Manifest]">Equiv</span><span class="delimiter">[</span>Manifest<span class="delimiter">]</span> = <a href="Cache.scala.html#sbt;BasicCacheImplicits.defaultEquiv" title="Equiv[java.util.jar.Manifest]">defaultEquiv</a>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; sbinary.Format[java.util.jar.Manifest]" id="sbt.Package.manifestFormat">manifestFormat</a>: <span title="sbinary.Format[java.util.jar.Manifest]">Format</span><span class="delimiter">[</span>Manifest<span class="delimiter">]</span> = <a href="Cache.scala.html#sbt;BasicCacheImplicits.streamFormat" title="(write: (java.util.jar.Manifest, java.io.OutputStream) =&gt; Unit, f: java.io.InputStream =&gt; java.util.jar.Manifest)sbinary.Format[java.util.jar.Manifest]">streamFormat</a><span class="delimiter">(</span><a href="#sbt.Package.manifestFormat.$anonfun.x$7" title="java.util.jar.Manifest">_</a> <span title="(x$1: java.io.OutputStream)Unit">write</span> <a href="#sbt.Package.manifestFormat.$anonfun.x$8" title="java.io.OutputStream">_</a>, <a title="java.io.InputStream" id="sbt.Package.manifestFormat.$anonfun.in">in</a> =&gt; <span title="(x$1: java.io.InputStream)java.util.jar.Manifest" class="keyword">new</span> <span title="java.util.jar.Manifest">Manifest</span><span class="delimiter">(</span><a href="#sbt.Package.manifestFormat.$anonfun.in" title="java.io.InputStream">in</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; Equiv[Map[java.io.File,String]]" id="sbt.Package.stringMapEquiv">stringMapEquiv</a>: <span title="Equiv[Map[java.io.File,String]]">Equiv</span><span class="delimiter">[</span>Map<span class="delimiter">[</span>File, String<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="Cache.scala.html#sbt;BasicCacheImplicits.defaultEquiv" title="Equiv[Map[java.io.File,String]]">defaultEquiv</a>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
