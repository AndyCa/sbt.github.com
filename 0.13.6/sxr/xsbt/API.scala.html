<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>xsbt/API.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010, 2011 Mark Harrah
 */</span>
<span class="keyword">package</span> xsbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.util.<span class="delimiter">{</span> Arrays, Comparator <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.<span class="delimiter">{</span> io, plugins, symtab, Global, Phase <span class="delimiter">}</span>
<span class="keyword">import</span> io.<span class="delimiter">{</span> AbstractFile, PlainFile, ZipArchive <span class="delimiter">}</span>
<span class="keyword">import</span> plugins.<span class="delimiter">{</span> Plugin, PluginComponent <span class="delimiter">}</span>
<span class="keyword">import</span> symtab.Flags
<span class="keyword">import</span> scala.collection.mutable.<span class="delimiter">{</span> HashMap, HashSet, ListBuffer <span class="delimiter">}</span>
<span class="keyword">import</span> xsbti.api.<span class="delimiter">{</span> ClassLike, DefinitionType, PathComponent, SimpleType <span class="delimiter">}</span>

<span class="keyword">object</span> <a title="xsbt.API.type" id="xsbt.API">API</a> <a href="#xsbt.API" title="xsbt.API.type" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="String" id="xsbt.API.name">name</a> = <span title="String(&quot;xsbt-api&quot;)" class="string">&quot;xsbt-api&quot;</span>
<span class="delimiter">}</span>

<span title="AnyRef" class="keyword">final</span> <span class="keyword">class</span> <a title="class API extends xsbt.Compat" id="xsbt;API">API</a><a href="#xsbt;API" title="xsbt.API" class="delimiter">(</a><span class="keyword">val</span> <a title="xsbt.CallbackGlobal" id="xsbt;API.global">global</a>: <a href="CompilerInterface.scala.html#xsbt;CallbackGlobal" title="xsbt.CallbackGlobal">CallbackGlobal</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Compat.scala.html#xsbt;Compat" title="xsbt.Compat">Compat</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#xsbt;API.global" title="=&gt; xsbt.CallbackGlobal">global</a>._

  @inline <span class="keyword">def</span> <a title="(msg: =&gt; String)Unit" id="xsbt;API.debug">debug</a><span class="delimiter">(</span><a title="=&gt; String" id="xsbt;API.debug.msg">msg</a>: =&gt; String<span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#xsbt;API.global" title="=&gt; scala.tools.nsc.Settings">settings</a>.<span title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</span>.<span title="=&gt; Boolean">value</span><span class="delimiter">)</span> <a href="#xsbt;API.global" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><a href="#xsbt;API.debug.msg" title="=&gt; String">msg</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(prev: tools.nsc.Phase)API.this.ApiPhase" id="xsbt;API.newPhase">newPhase</a><span class="delimiter">(</span><a title="tools.nsc.Phase" id="xsbt;API.newPhase.prev">prev</a>: <span title="tools.nsc.Phase">Phase</span><span class="delimiter">)</span> = <span title="API.this.ApiPhase" class="keyword">new</span> <a href="#xsbt;API;ApiPhase" title="API.this.ApiPhase">ApiPhase</a><span class="delimiter">(</span><a href="#xsbt;API.newPhase.prev" title="tools.nsc.Phase">prev</a><span class="delimiter">)</span>
  <span class="keyword">class</span> <a title="class ApiPhase extends tools.nsc.Phase" id="xsbt;API;ApiPhase">ApiPhase</a><a href="#xsbt;API;ApiPhase" title="API.this.ApiPhase" class="delimiter">(</a><a title="tools.nsc.Phase" id="xsbt;API;ApiPhase.prev">prev</a>: <span title="tools.nsc.Phase">Phase</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="tools.nsc.Phase">Phase</span><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.prev" title="tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="xsbt;API;ApiPhase.description">description</a> = <span title="String(&quot;Extracts the public API from source files.&quot;)" class="string">&quot;Extracts the public API from source files.&quot;</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="xsbt;API;ApiPhase.name">name</a> = <a href="#xsbt.API" title="xsbt.API.type">API</a>.<a href="#xsbt.API.name" title="=&gt; String">name</a>
    <span class="keyword">def</span> <a title="()Unit" id="xsbt;API;ApiPhase.run">run</a>: <span title="Unit">Unit</span> =
      <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Long" id="xsbt;API;ApiPhase.run.start">start</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
        <a href="#xsbt;API.global" title="=&gt; API.this.global.Run">currentRun</a>.<span title="=&gt; Iterator[API.this.global.CompilationUnit]">units</span>.<span title="(f: API.this.global.CompilationUnit =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processUnit" title="(unit: API.this.global.CompilationUnit)Unit">processUnit</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Long" id="xsbt;API;ApiPhase.run.stop">stop</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span>
        <a href="#xsbt;API.debug" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;API phase took : &quot;)" class="string">&quot;API phase took : &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.run.stop" title="Long">stop</a> <span title="(x: Long)Long">-</span> <a href="#xsbt;API;ApiPhase.run.start" title="Long">start</a><span class="delimiter">)</span> <span title="(x: Double)Double">/</span> <span title="Double(1000.0)" class="double">1000.0</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; s&quot;)" class="string">&quot; s&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(unit: API.this.global.CompilationUnit)Unit" id="xsbt;API;ApiPhase.processUnit">processUnit</a><span class="delimiter">(</span><a title="API.this.global.CompilationUnit" id="xsbt;API;ApiPhase.processUnit.unit">unit</a>: <span title="API.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#xsbt;API;ApiPhase.processUnit.unit" title="API.this.global.CompilationUnit">unit</a>.<span title="=&gt; Boolean">isJava</span><span class="delimiter">)</span> <a href="#xsbt;API;ApiPhase.processScalaUnit" title="(unit: API.this.global.CompilationUnit)Unit">processScalaUnit</a><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processUnit.unit" title="API.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(unit: API.this.global.CompilationUnit)Unit" id="xsbt;API;ApiPhase.processScalaUnit">processScalaUnit</a><span class="delimiter">(</span><a title="API.this.global.CompilationUnit" id="xsbt;API;ApiPhase.processScalaUnit.unit">unit</a>: <span title="API.this.global.CompilationUnit">CompilationUnit</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.io.File" id="xsbt;API;ApiPhase.processScalaUnit.sourceFile">sourceFile</a> = <a href="#xsbt;API;ApiPhase.processScalaUnit.unit" title="API.this.global.CompilationUnit">unit</a>.<span title="=&gt; scala.reflect.internal.util.SourceFile">source</span>.<span title="=&gt; scala.reflect.io.AbstractFile">file</span>.<span title="=&gt; java.io.File">file</span>
      <a href="#xsbt;API.debug" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Traversing &quot;)" class="string">&quot;Traversing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#xsbt;API;ApiPhase.processScalaUnit.sourceFile" title="java.io.File">sourceFile</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="xsbt.ExtractAPI[API.this.global.type]" id="xsbt;API;ApiPhase.processScalaUnit.extractApi">extractApi</a> = <span title="xsbt.ExtractAPI[API.this.global.type]" class="keyword">new</span> <a href="ExtractAPI.scala.html#xsbt;ExtractAPI" title="xsbt.ExtractAPI[API.this.global.type]">ExtractAPI</a><span class="delimiter">[</span>global.<span class="keyword">type</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#xsbt;API.global" title="=&gt; xsbt.CallbackGlobal">global</a>, <a href="#xsbt;API;ApiPhase.processScalaUnit.sourceFile" title="java.io.File">sourceFile</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="API.this.TopLevelHandler" id="xsbt;API;ApiPhase.processScalaUnit.traverser">traverser</a> = <span title="API.this.TopLevelHandler" class="keyword">new</span> <a href="#xsbt;API;TopLevelHandler" title="API.this.TopLevelHandler">TopLevelHandler</a><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processScalaUnit.extractApi" title="xsbt.ExtractAPI[API.this.global.type]">extractApi</a><span class="delimiter">)</span>
      <a href="#xsbt;API;ApiPhase.processScalaUnit.traverser" title="API.this.TopLevelHandler">traverser</a>.<span title="(tree: API.this.global.Tree)API.this.global.Tree">apply</span><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processScalaUnit.unit" title="API.this.global.CompilationUnit">unit</a>.<span title="=&gt; API.this.global.Tree">body</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#xsbt;API.global" title="=&gt; xsbt.CallbackGlobal">global</a>.<a href="CompilerInterface.scala.html#xsbt;CallbackGlobal.callback" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="../xsbti/AnalysisCallback.java.html#xsbti;AnalysisCallback.nameHashing" title="()Boolean">nameHashing</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="xsbt.ExtractUsedNames[API.this.global.type]" id="xsbt;API;ApiPhase.processScalaUnit.extractUsedNames">extractUsedNames</a> = <span title="xsbt.ExtractUsedNames[API.this.global.type]" class="keyword">new</span> <a href="ExtractUsedNames.scala.html#xsbt;ExtractUsedNames" title="xsbt.ExtractUsedNames[API.this.global.type]">ExtractUsedNames</a><span class="delimiter">[</span>global.<span class="keyword">type</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#xsbt;API.global" title="=&gt; xsbt.CallbackGlobal">global</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Set[String]" id="xsbt;API;ApiPhase.processScalaUnit.names">names</a> = <a href="#xsbt;API;ApiPhase.processScalaUnit.extractUsedNames" title="xsbt.ExtractUsedNames[API.this.global.type]">extractUsedNames</a>.<a href="ExtractUsedNames.scala.html#xsbt;ExtractUsedNames.extract" title="(unit: extractUsedNames.global.CompilationUnit)Set[String]">extract</a><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processScalaUnit.unit" title="API.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
        <a href="#xsbt;API.debug" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;The &quot;)" class="string">&quot;The &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#xsbt;API;ApiPhase.processScalaUnit.sourceFile" title="java.io.File">sourceFile</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; contains the following used names &quot;)" class="string">&quot; contains the following used names &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#xsbt;API;ApiPhase.processScalaUnit.names" title="Set[String]">names</a><span class="delimiter">)</span>
        <a href="#xsbt;API;ApiPhase.processScalaUnit.names" title="Set[String]">names</a> <span title="(f: String =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <span class="delimiter">(</span>name: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="CompilerInterface.scala.html#xsbt;CallbackGlobal.callback" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="../xsbti/AnalysisCallback.java.html#xsbti;AnalysisCallback.usedName" title="(sourceFile: java.io.File, names: String)Unit">usedName</a><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processScalaUnit.sourceFile" title="java.io.File">sourceFile</a>, <a href="#xsbt;API;ApiPhase.processScalaUnit.$anonfun.name" title="String">name</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="Array[xsbti.api.Package]" id="xsbt;API;ApiPhase.processScalaUnit.packages">packages</a> = <a href="#xsbt;API;ApiPhase.processScalaUnit.traverser" title="API.this.TopLevelHandler">traverser</a>.<a href="#xsbt;API;TopLevelHandler.packages" title="=&gt; scala.collection.mutable.HashSet[String]">packages</a>.<span title="[B &gt;: String](implicit evidence$1: scala.reflect.ClassTag[B])Array[B]">toArray</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span>.<span title="(f: String =&gt; xsbti.api.Package)(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],xsbti.api.Package,Array[xsbti.api.Package]])Array[xsbti.api.Package]">map</span><span title="(implicit t: scala.reflect.ClassTag[xsbti.api.Package])scala.collection.generic.CanBuildFrom[Array[_],xsbti.api.Package,Array[xsbti.api.Package]]" class="delimiter">(</span><a title="String" id="xsbt;API;ApiPhase.processScalaUnit.packages.$anonfun.p">p</a> =&gt; <span title="xsbti.api.Package" class="keyword">new</span> xsbti.api.<a href="../xsbti/api/Package.java.html#xsbti.api;Package" title="xsbti.api.Package">Package</a><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processScalaUnit.packages.$anonfun.p" title="String">p</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="xsbti.api.SourceAPI" id="xsbt;API;ApiPhase.processScalaUnit.source">source</a> = <span title="xsbti.api.SourceAPI" class="keyword">new</span> xsbti.api.<a href="../xsbti/api/SourceAPI.java.html#xsbti.api;SourceAPI" title="xsbti.api.SourceAPI">SourceAPI</a><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processScalaUnit.packages" title="Array[xsbti.api.Package]">packages</a>, <a href="#xsbt;API;ApiPhase.processScalaUnit.traverser" title="API.this.TopLevelHandler">traverser</a>.<a href="#xsbt;API;TopLevelHandler.definitions" title="=&gt; scala.collection.mutable.ListBuffer[xsbti.api.Definition]">definitions</a>.<span title="[B &gt;: xsbti.api.Definition](implicit evidence$1: scala.reflect.ClassTag[B])Array[B]">toArray</span><span title="(implicit evidence$1: scala.reflect.ClassTag[xsbti.api.Definition])Array[xsbti.api.Definition]" class="delimiter">[</span>xsbti.api.<a href="../xsbti/api/Definition.java.html#xsbti.api;Definition" title="xsbti.api.Definition">Definition</a><span class="delimiter">]</span><span class="delimiter">)</span>
      <a href="#xsbt;API;ApiPhase.processScalaUnit.extractApi" title="xsbt.ExtractAPI[API.this.global.type]">extractApi</a>.<a href="ExtractAPI.scala.html#xsbt;ExtractAPI.forceStructures" title="()Unit">forceStructures</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="CompilerInterface.scala.html#xsbt;CallbackGlobal.callback" title="=&gt; xsbti.AnalysisCallback">callback</a>.<a href="../xsbti/AnalysisCallback.java.html#xsbti;AnalysisCallback.api" title="(sourceFile: java.io.File, source: xsbti.api.SourceAPI)Unit">api</a><span class="delimiter">(</span><a href="#xsbt;API;ApiPhase.processScalaUnit.sourceFile" title="java.io.File">sourceFile</a>, <a href="#xsbt;API;ApiPhase.processScalaUnit.source" title="xsbti.api.SourceAPI">source</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">class</span> <a title="class TopLevelHandler extends API.this.TopLevelTraverser" id="xsbt;API;TopLevelHandler">TopLevelHandler</a><a href="#xsbt;API;TopLevelHandler" title="API.this.TopLevelHandler" class="delimiter">(</a><a title="xsbt.ExtractAPI[API.this.global.type]" id="xsbt;API;TopLevelHandler.extractApi">extractApi</a>: <a href="ExtractAPI.scala.html#xsbt;ExtractAPI" title="xsbt.ExtractAPI[API.this.global.type]">ExtractAPI</a><span class="delimiter">[</span>global.<span class="keyword">type</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#xsbt;API;TopLevelTraverser" title="API.this.TopLevelTraverser">TopLevelTraverser</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[String]" id="xsbt;API;TopLevelHandler.packages">packages</a> = <span title="()scala.collection.mutable.HashSet[String]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[String]">HashSet</span><span class="delimiter">[</span>String<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[xsbti.api.Definition]" id="xsbt;API;TopLevelHandler.definitions">definitions</a> = <span title="scala.collection.mutable.ListBuffer[xsbti.api.Definition]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[xsbti.api.Definition]">ListBuffer</span><span class="delimiter">[</span>xsbti.api.Definition<span class="delimiter">]</span>
    <span class="keyword">def</span> <a title="(c: API.this.global.Symbol)Unit" id="xsbt;API;TopLevelHandler.class">`class`</a><span class="delimiter">(</span><a title="API.this.global.Symbol" id="xsbt;API;TopLevelHandler.class.c">c</a>: <span title="API.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#xsbt;API;TopLevelHandler.definitions" title="=&gt; scala.collection.mutable.ListBuffer[xsbti.api.Definition]">definitions</a> <span title="(x: xsbti.api.Definition)TopLevelHandler.this.definitions.type">+=</span> <a href="#xsbt;API;TopLevelHandler.extractApi" title="xsbt.ExtractAPI[API.this.global.type]">extractApi</a>.<a href="ExtractAPI.scala.html#xsbt;ExtractAPI.classLike" title="(in: TopLevelHandler.this.extractApi.global.Symbol, c: TopLevelHandler.this.extractApi.global.Symbol)xsbti.api.ClassLike">classLike</a><span class="delimiter">(</span><a href="#xsbt;API;TopLevelHandler.class.c" title="API.this.global.Symbol">c</a>.<span title="=&gt; API.this.global.Symbol">owner</span>, <a href="#xsbt;API;TopLevelHandler.class.c" title="API.this.global.Symbol">c</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="comment">/** Record packages declared in the source file*/</span>
    <span class="keyword">def</span> <a title="(p: API.this.global.Symbol)Unit" id="xsbt;API;TopLevelHandler.package">`package`</a><span class="delimiter">(</span><a title="API.this.global.Symbol" id="xsbt;API;TopLevelHandler.package.p">p</a>: <span title="API.this.global.Symbol">Symbol</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#xsbt;API.global" title="=&gt; API.this.global.NoSymbol">NoSymbol</a> <span title="(x: Boolean)Boolean">||</span> <a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a>.<span title="=&gt; Boolean">isRoot</span> <span title="(x: Boolean)Boolean">||</span> <a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a>.<span title="=&gt; Boolean">isRootPackage</span> <span title="(x: Boolean)Boolean">||</span> <a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a>.<span title="=&gt; Boolean">isEmptyPackageClass</span> <span title="(x: Boolean)Boolean">||</span> <a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a>.<span title="=&gt; Boolean">isEmptyPackage</span><span class="delimiter">)</span>
        <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#xsbt;API;TopLevelHandler.packages" title="=&gt; scala.collection.mutable.HashSet[String]">packages</a> <span title="(elem: String)TopLevelHandler.this.packages.type">+=</span> <a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a>.<span title="=&gt; String">fullName</span>
        <a href="#xsbt;API;TopLevelHandler.package" title="(p: API.this.global.Symbol)Unit">`package`</a><span class="delimiter">(</span><a href="#xsbt;API;TopLevelHandler.package.p" title="API.this.global.Symbol">p</a>.<span title="=&gt; API.this.global.Symbol">enclosingPackage</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TopLevelTraverser extends API.this.global.Traverser" id="xsbt;API;TopLevelTraverser">TopLevelTraverser</a> <a href="#xsbt;API;TopLevelTraverser" title="API.this.TopLevelTraverser" class="keyword">extends</a> <a href="#xsbt;API.global" title="API.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(s: API.this.global.Symbol)Unit" id="xsbt;API;TopLevelTraverser.class">`class`</a><span class="delimiter">(</span><a title="API.this.global.Symbol" id="xsbt;API;TopLevelTraverser.class.s">s</a>: <span title="API.this.global.Symbol">Symbol</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(s: API.this.global.Symbol)Unit" id="xsbt;API;TopLevelTraverser.package">`package`</a><span class="delimiter">(</span><a title="API.this.global.Symbol" id="xsbt;API;TopLevelTraverser.package.s">s</a>: <span title="API.this.global.Symbol">Symbol</span><span class="delimiter">)</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: API.this.global.Tree)Unit" id="xsbt;API;TopLevelTraverser.traverse">traverse</a><span class="delimiter">(</span><a title="API.this.global.Tree" id="xsbt;API;TopLevelTraverser.traverse.tree">tree</a>: <span title="API.this.global.Tree">Tree</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#xsbt;API;TopLevelTraverser.traverse.tree" title="API.this.global.Tree">tree</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span class="delimiter">(</span>_: <span title="API.this.global.ClassDef">ClassDef</span> | _: <span title="API.this.global.ModuleDef">ModuleDef</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#xsbt;API;TopLevelTraverser.isTopLevel" title="(sym: API.this.global.Symbol)Boolean">isTopLevel</a><span class="delimiter">(</span><a href="#xsbt;API;TopLevelTraverser.traverse.tree" title="API.this.global.Tree">tree</a>.<span title="=&gt; API.this.global.Symbol">symbol</span><span class="delimiter">)</span> =&gt; <a href="#xsbt;API;TopLevelTraverser.class" title="(s: API.this.global.Symbol)Unit">`class`</a><span class="delimiter">(</span><a href="#xsbt;API;TopLevelTraverser.traverse.tree" title="API.this.global.Tree">tree</a>.<span title="=&gt; API.this.global.Symbol">symbol</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a title="API.this.global.PackageDef" id="xsbt;API;TopLevelTraverser.traverse.p">p</a>: <span title="API.this.global.PackageDef">PackageDef</span> =&gt;
          <a href="#xsbt;API;TopLevelTraverser.package" title="(s: API.this.global.Symbol)Unit">`package`</a><span class="delimiter">(</span><a href="#xsbt;API;TopLevelTraverser.traverse.p" title="API.this.global.PackageDef">p</a>.<span title="=&gt; API.this.global.Symbol">symbol</span><span class="delimiter">)</span>
          <a href="#xsbt;API;TopLevelTraverser" title="API.this.TopLevelTraverser" class="keyword">super</a>.<span title="(tree: API.this.global.Tree)Unit">traverse</span><span class="delimiter">(</span><a href="#xsbt;API;TopLevelTraverser.traverse.tree" title="API.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(sym: API.this.global.Symbol)Boolean" id="xsbt;API;TopLevelTraverser.isTopLevel">isTopLevel</a><span class="delimiter">(</span><a title="API.this.global.Symbol" id="xsbt;API;TopLevelTraverser.isTopLevel.sym">sym</a>: <span title="API.this.global.Symbol">Symbol</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> =
      <span class="delimiter">(</span><a href="#xsbt;API;TopLevelTraverser.isTopLevel.sym" title="API.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#xsbt;API;TopLevelTraverser.isTopLevel.sym" title="API.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#xsbt;API.global" title="=&gt; API.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#xsbt;API;TopLevelTraverser.isTopLevel.sym" title="API.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isImplClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#xsbt;API;TopLevelTraverser.isTopLevel.sym" title="API.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isNestedClass</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#xsbt;API;TopLevelTraverser.isTopLevel.sym" title="API.this.global.Symbol">sym</a>.<span title="=&gt; Boolean">isStatic</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span>
        <span title="=&gt; Boolean">!</span><a href="#xsbt;API;TopLevelTraverser.isTopLevel.sym" title="API.this.global.Symbol">sym</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span>Flags.<span title="Long(2097152L)">SYNTHETIC</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="=&gt; Boolean">!</span><a href="#xsbt;API;TopLevelTraverser.isTopLevel.sym" title="API.this.global.Symbol">sym</a>.<span title="(mask: Long)Boolean">hasFlag</span><span class="delimiter">(</span>Flags.<span title="Long(1048576L)">JAVA</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
